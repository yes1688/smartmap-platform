{"version":3,"file":"index-sDbxcFP4.js","sources":["../../node_modules/solid-js/dist/solid.js","../../node_modules/solid-js/web/dist/web.js","../../node_modules/solid-js/store/dist/store.js","../../src/config.ts","../../src/stores/gameStore.ts","../../src/components/Header.tsx","../../src/components/CesiumMap.tsx","../../src/components/GamePanel.tsx","../../src/components/ChatPanel.tsx","../../src/components/VoicePanel.tsx","../../src/components/HistoricalSitePanel.tsx","../../src/components/LoadingOverlay.tsx","../../src/App.tsx","../../src/index.tsx"],"sourcesContent":["let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  maxDeadline = 0,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      maxDeadline = currentTime + maxYieldInterval;\n      try {\n        const hasMoreWork = scheduledCallback(currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxDeadline;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && shouldYieldToHost()) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined,\n  effects: undefined,\n  done: false,\n  getContextId() {\n    return getContextId(this.context.count);\n  },\n  getNextContextId() {\n    return getContextId(this.context.count++);\n  }\n};\nfunction getContextId(count) {\n  const num = String(count),\n    len = num.length - 1;\n  return sharedConfig.context.id + (len ? String.fromCharCode(96 + len) : \"\") + num;\n}\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: sharedConfig.getNextContextId(),\n    count: 0\n  };\n}\n\nconst IS_DEV = false;\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst SUPPORTS_PROXY = typeof Proxy === \"function\";\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceConfig = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    current = detachedOwner === undefined ? owner : detachedOwner,\n    root = unowned ? UNOWNED : {\n      owned: null,\n      cleanups: null,\n      context: current ? current.context : null,\n      owner: current\n    },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(() => {\n      fn ? fn() : untrack(onInvalidate);\n      fn = undefined;\n    }, undefined, false, 0),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction isPromise(v) {\n  return v && typeof v === \"object\" && \"then\" in v;\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if (typeof pFetcher === \"function\") {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  } else {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = \"initialValue\" in options,\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = sharedConfig.getNextContextId();\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;else if (sharedConfig.load && sharedConfig.has(id)) initP = sharedConfig.load(id);\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    let error;\n    const p = initP !== NO_INIT ? initP : untrack(() => {\n      try {\n        return fetcher(lookup, {\n          value: value(),\n          refetching\n        });\n      } catch (fetcherError) {\n        error = fetcherError;\n      }\n    });\n    if (error !== undefined) {\n      loadEnd(pr, undefined, castError(error), lookup);\n      return;\n    } else if (!isPromise(p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    if (\"v\" in p) {\n      if (p.s === 1) loadEnd(pr, p.v, undefined, lookup);else loadEnd(pr, undefined, castError(p.v), lookup);\n      return p;\n    }\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(v => loadEnd(p, v, undefined, lookup), e => loadEnd(p, undefined, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  let owner = Owner;\n  if (dynamic) createComputed(() => (owner = Owner, load(false)));else load(false);\n  return [read, {\n    refetch: info => runWithOwner(owner, () => load(info)),\n    mutate: setValue\n  }];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(() => node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  const [deferred, setDeferred] = createSignal(Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, options);\n  updateComputation(node);\n  setDeferred(() => Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const [key, val] of subs.entries()) if (fn(key, v) !== fn(key, p)) {\n      for (const c of val.values()) {\n        c.state = STALE;\n        if (c.pure) Updates.push(c);else Effects.push(c);\n      }\n    }\n    return v;\n  }, undefined, true, STALE);\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if (l = subs.get(key)) l.add(listener);else subs.set(key, l = new Set([listener]));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(key, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (!ExternalSourceConfig && Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    if (ExternalSourceConfig) return ExternalSourceConfig.untrack(fn);\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return prevValue;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    ...Owner.context,\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        queue: new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise(res => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nconst [transPending, setTransPending] = /*@__PURE__*/createSignal(false);\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let value;\n  return Owner && Owner.context && (value = Owner.context[context.id]) !== undefined ? value : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext());\n}\nfunction enableExternalSource(factory, untrack = fn => fn()) {\n  if (ExternalSourceConfig) {\n    const {\n      factory: oldFactory,\n      untrack: oldUntrack\n    } = ExternalSourceConfig;\n    ExternalSourceConfig = {\n      factory: (fn, trigger) => {\n        const oldSource = oldFactory(fn, trigger);\n        const source = factory(x => oldSource.track(x), trigger);\n        return {\n          track: x => source.track(x),\n          dispose() {\n            source.dispose();\n            oldSource.dispose();\n          }\n        };\n      },\n      untrack: fn => oldUntrack(() => untrack(fn))\n    };\n  } else {\n    ExternalSourceConfig = {\n      factory,\n      untrack\n    };\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (IS_DEV) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const time = ExecCount;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  const owner = Owner,\n    listener = Listener;\n  Listener = Owner = node;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceConfig && c.fn) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceConfig.factory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceConfig.factory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    }\n    setHydrateContext();\n  }\n  if (sharedConfig.effects && (sharedConfig.done || !sharedConfig.count)) {\n    queue = [...sharedConfig.effects, ...queue];\n    userLength += sharedConfig.effects.length;\n    delete sharedConfig.effects;\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;else o.state = PENDING;\n      if (o.pure) Updates.push(o);else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (node.tOwned) {\n    for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n    delete node.tOwned;\n  }\n  if (Transition && Transition.running && node.pure) {\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;else node.state = 0;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, owner && owner.owner || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) throw error;\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(error, fns, owner);\n    },\n    state: STALE\n  });else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        ...Owner.context,\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), undefined);\n    return res;\n  };\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null || !Owner.context[ERROR]) {\n    Owner.context = {\n      ...Owner.context,\n      [ERROR]: [fn]\n    };\n    mutateContext(Owner, ERROR, [fn]);\n  } else Owner.context[ERROR].push(fn);\n}\nfunction mutateContext(o, key, value) {\n  if (o.owned) {\n    for (let i = 0; i < o.owned.length; i++) {\n      if (o.owned[i].context === o.context) mutateContext(o.owned[i], key, value);\n      if (!o.owned[i].context) {\n        o.owned[i].context = o.context;\n        mutateContext(o.owned[i], key, value);\n      } else if (!o.owned[i].context[key]) {\n        o.owned[i].context[key] = value;\n        mutateContext(o.owned[i], key, value);\n      }\n    }\n  }\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler = typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer, initalValue = undefined) {\n  const [s, set] = createSignal(initalValue, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => \"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub());\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      newLen = newItems.length,\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newIndices, newIndicesNext, temp, tempdisposers, tempIndexes, start, end, newEnd, item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [],\n      newLen = newItems.length;\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newLen; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newLen;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (SUPPORTS_PROXY && proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== undefined) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const sourcesMap = {};\n  const defined = Object.create(null);\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = sourceKeys.length - 1; i >= 0; i--) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined[key]) {\n        defined[key] = desc.get ? {\n          enumerable: true,\n          configurable: true,\n          get: resolveSources.bind(sourcesMap[key] = [desc.get.bind(source)])\n        } : desc.value !== undefined ? desc : undefined;\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) sources.push(desc.get.bind(source));else if (desc.value !== undefined) sources.push(() => desc.value);\n        }\n      }\n    }\n  }\n  const target = {};\n  const definedKeys = Object.keys(defined);\n  for (let i = definedKeys.length - 1; i >= 0; i--) {\n    const key = definedKeys[i],\n      desc = defined[key];\n    if (desc && desc.get) Object.defineProperty(target, key, desc);else target[key] = desc ? desc.value : undefined;\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if (SUPPORTS_PROXY && $PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : undefined;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter(property => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? undefined : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter(k => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc = !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc ? objects[objectIndex][propName] = desc.value : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc ? otherObject[propName] = desc.value : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        !sharedConfig.done && setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) ? untrack(() => {\n      if (IS_DEV) ;\n      if (!ctx || sharedConfig.done) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }) : \"\");\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => comp = () => mod.default), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? sharedConfig.getNextContextId() : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const conditionValue = createMemo(() => props.when, undefined, undefined);\n  const condition = keyed ? conditionValue : createMemo(conditionValue, undefined, {\n    equals: (a, b) => !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return conditionValue();\n      })) : child;\n    }\n    return props.fallback;\n  }, undefined, undefined);\n}\nfunction Switch(props) {\n  const chs = children(() => props.children);\n  const switchFunc = createMemo(() => {\n    const ch = chs();\n    const mps = Array.isArray(ch) ? ch : [ch];\n    let func = () => undefined;\n    for (let i = 0; i < mps.length; i++) {\n      const index = i;\n      const mp = mps[i];\n      const prevFunc = func;\n      const conditionValue = createMemo(() => prevFunc() ? undefined : mp.when, undefined, undefined);\n      const condition = mp.keyed ? conditionValue : createMemo(conditionValue, undefined, {\n        equals: (a, b) => !a === !b\n      });\n      func = () => prevFunc() || (condition() ? [index, conditionValue, mp] : undefined);\n    }\n    return func;\n  });\n  return createMemo(() => {\n    const sel = switchFunc()();\n    if (!sel) return props.fallback;\n    const [index, conditionValue, mp] = sel;\n    const child = mp.children;\n    const fn = typeof child === \"function\" && child.length > 0;\n    return fn ? untrack(() => child(mp.keyed ? conditionValue() : () => {\n      if (untrack(switchFunc)()?.[0] !== index) throw narrowedError(\"Match\");\n      return conditionValue();\n    })) : child;\n  }, undefined, undefined);\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  if (sharedConfig.context && sharedConfig.load) err = sharedConfig.load(sharedConfig.getContextId());\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(() => {\n    let e;\n    if (e = errored()) {\n      const f = props.fallback;\n      return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n    }\n    return catchError(() => props.children, setErrored);\n  }, undefined, undefined);\n}\n\nconst suspenseListEquals = (a, b) => a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = /* #__PURE__ */createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(prev => {\n    const reveal = props.revealOrder,\n      tail = props.tail,\n      {\n        showContent = true,\n        showFallback = true\n      } = show ? show() : {},\n      reg = registry(),\n      reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = reg.every(inFallback => !inFallback());\n      const res = reg.map(() => ({\n        showContent: all && showContent,\n        showFallback\n      }));\n      res.inFallback = !all;\n      return res;\n    }\n    let stop = false;\n    let inFallback = prev.inFallback;\n    const res = [];\n    for (let i = 0, len = reg.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n        s = reg[n]();\n      if (!stop && !s) {\n        res[n] = {\n          showContent,\n          showFallback\n        };\n      } else {\n        const next = !stop;\n        if (next) inFallback = true;\n        res[n] = {\n          showContent: next,\n          showFallback: !tail || next && tail === \"collapsed\" ? showFallback : false\n        };\n        stop = true;\n      }\n    }\n    if (!stop) inFallback = false;\n    res.inFallback = inFallback;\n    return res;\n  }, {\n    inFallback: false\n  });\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.getContextId();\n    let ref = sharedConfig.load(key);\n    if (ref) {\n      if (typeof ref !== \"object\" || ref.s !== 1) p = ref;else sharedConfig.gather(key);\n    }\n    if (p && p !== \"$$f\") {\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(() => {\n        if (sharedConfig.done) return set();\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      }, err => {\n        error = err;\n        set();\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return flicker = undefined;\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            {\n              showContent = true,\n              showFallback = true\n            } = show ? show() : {};\n          if ((!inFallback || p && p !== \"$$f\") && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"F\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport { $DEVCOMP, $PROXY, $TRACK, DEV, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, batch, cancelCallback, catchError, children, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, createUniqueId, enableExternalSource, enableHydration, enableScheduling, equalFn, from, getListener, getOwner, indexArray, lazy, mapArray, mergeProps, observable, on, onCleanup, onError, onMount, requestCallback, resetErrorBoundaries, runWithOwner, sharedConfig, splitProps, startTransition, untrack, useContext, useTransition };\n","import { createMemo, createRoot, createRenderEffect, untrack, sharedConfig, enableHydration, getOwner, createEffect, runWithOwner, createSignal, onCleanup, splitProps } from 'solid-js';\nexport { ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, createComponent, createRenderEffect as effect, getOwner, mergeProps, untrack } from 'solid-js';\n\nconst booleans = [\"allowfullscreen\", \"async\", \"alpha\",\n\"autofocus\",\n\"autoplay\", \"checked\", \"controls\", \"default\", \"disabled\", \"formnovalidate\", \"hidden\",\n\"indeterminate\", \"inert\",\n\"ismap\", \"loop\", \"multiple\", \"muted\", \"nomodule\", \"novalidate\", \"open\", \"playsinline\", \"readonly\", \"required\", \"reversed\", \"seamless\",\n\"selected\", \"adauctionheaders\",\n\"browsingtopics\",\n\"credentialless\",\n\"defaultchecked\", \"defaultmuted\", \"defaultselected\", \"defer\", \"disablepictureinpicture\", \"disableremoteplayback\", \"preservespitch\",\n\"shadowrootclonable\", \"shadowrootcustomelementregistry\",\n\"shadowrootdelegatesfocus\", \"shadowrootserializable\",\n\"sharedstoragewritable\"\n];\nconst Properties = /*#__PURE__*/new Set([\n\"className\", \"value\",\n\"readOnly\", \"noValidate\", \"formNoValidate\", \"isMap\", \"noModule\", \"playsInline\", \"adAuctionHeaders\",\n\"allowFullscreen\", \"browsingTopics\",\n\"defaultChecked\", \"defaultMuted\", \"defaultSelected\", \"disablePictureInPicture\", \"disableRemotePlayback\", \"preservesPitch\", \"shadowRootClonable\", \"shadowRootCustomElementRegistry\",\n\"shadowRootDelegatesFocus\", \"shadowRootSerializable\",\n\"sharedStorageWritable\",\n...booleans]);\nconst ChildProperties = /*#__PURE__*/new Set([\"innerHTML\", \"textContent\", \"innerText\", \"children\"]);\nconst Aliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  class: \"className\",\n  novalidate: {\n    $: \"noValidate\",\n    FORM: 1\n  },\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  },\n  adauctionheaders: {\n    $: \"adAuctionHeaders\",\n    IFRAME: 1\n  },\n  allowfullscreen: {\n    $: \"allowFullscreen\",\n    IFRAME: 1\n  },\n  browsingtopics: {\n    $: \"browsingTopics\",\n    IMG: 1\n  },\n  defaultchecked: {\n    $: \"defaultChecked\",\n    INPUT: 1\n  },\n  defaultmuted: {\n    $: \"defaultMuted\",\n    AUDIO: 1,\n    VIDEO: 1\n  },\n  defaultselected: {\n    $: \"defaultSelected\",\n    OPTION: 1\n  },\n  disablepictureinpicture: {\n    $: \"disablePictureInPicture\",\n    VIDEO: 1\n  },\n  disableremoteplayback: {\n    $: \"disableRemotePlayback\",\n    AUDIO: 1,\n    VIDEO: 1\n  },\n  preservespitch: {\n    $: \"preservesPitch\",\n    AUDIO: 1,\n    VIDEO: 1\n  },\n  shadowrootclonable: {\n    $: \"shadowRootClonable\",\n    TEMPLATE: 1\n  },\n  shadowrootdelegatesfocus: {\n    $: \"shadowRootDelegatesFocus\",\n    TEMPLATE: 1\n  },\n  shadowrootserializable: {\n    $: \"shadowRootSerializable\",\n    TEMPLATE: 1\n  },\n  sharedstoragewritable: {\n    $: \"sharedStorageWritable\",\n    IFRAME: 1,\n    IMG: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? a[tagName] ? a[\"$\"] : undefined : a;\n}\nconst DelegatedEvents = /*#__PURE__*/new Set([\"beforeinput\", \"click\", \"dblclick\", \"contextmenu\", \"focusin\", \"focusout\", \"input\", \"keydown\", \"keyup\", \"mousedown\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"pointerdown\", \"pointermove\", \"pointerout\", \"pointerover\", \"pointerup\", \"touchend\", \"touchmove\", \"touchstart\"]);\nconst SVGElements = /*#__PURE__*/new Set([\n\"altGlyph\", \"altGlyphDef\", \"altGlyphItem\", \"animate\", \"animateColor\", \"animateMotion\", \"animateTransform\", \"circle\", \"clipPath\", \"color-profile\", \"cursor\", \"defs\", \"desc\", \"ellipse\", \"feBlend\", \"feColorMatrix\", \"feComponentTransfer\", \"feComposite\", \"feConvolveMatrix\", \"feDiffuseLighting\", \"feDisplacementMap\", \"feDistantLight\", \"feDropShadow\", \"feFlood\", \"feFuncA\", \"feFuncB\", \"feFuncG\", \"feFuncR\", \"feGaussianBlur\", \"feImage\", \"feMerge\", \"feMergeNode\", \"feMorphology\", \"feOffset\", \"fePointLight\", \"feSpecularLighting\", \"feSpotLight\", \"feTile\", \"feTurbulence\", \"filter\", \"font\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\", \"font-face-uri\", \"foreignObject\", \"g\", \"glyph\", \"glyphRef\", \"hkern\", \"image\", \"line\", \"linearGradient\", \"marker\", \"mask\", \"metadata\", \"missing-glyph\", \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialGradient\", \"rect\",\n\"set\", \"stop\",\n\"svg\", \"switch\", \"symbol\", \"text\", \"textPath\",\n\"tref\", \"tspan\", \"use\", \"view\", \"vkern\"]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/new Set([\"html\", \"base\", \"head\", \"link\", \"meta\", \"style\", \"title\", \"body\", \"address\", \"article\", \"aside\", \"footer\", \"header\", \"main\", \"nav\", \"section\", \"body\", \"blockquote\", \"dd\", \"div\", \"dl\", \"dt\", \"figcaption\", \"figure\", \"hr\", \"li\", \"ol\", \"p\", \"pre\", \"ul\", \"a\", \"abbr\", \"b\", \"bdi\", \"bdo\", \"br\", \"cite\", \"code\", \"data\", \"dfn\", \"em\", \"i\", \"kbd\", \"mark\", \"q\", \"rp\", \"rt\", \"ruby\", \"s\", \"samp\", \"small\", \"span\", \"strong\", \"sub\", \"sup\", \"time\", \"u\", \"var\", \"wbr\", \"area\", \"audio\", \"img\", \"map\", \"track\", \"video\", \"embed\", \"iframe\", \"object\", \"param\", \"picture\", \"portal\", \"source\", \"svg\", \"math\", \"canvas\", \"noscript\", \"script\", \"del\", \"ins\", \"caption\", \"col\", \"colgroup\", \"table\", \"tbody\", \"td\", \"tfoot\", \"th\", \"thead\", \"tr\", \"button\", \"datalist\", \"fieldset\", \"form\", \"input\", \"label\", \"legend\", \"meter\", \"optgroup\", \"option\", \"output\", \"progress\", \"select\", \"textarea\", \"details\", \"dialog\", \"menu\", \"summary\", \"details\", \"slot\", \"template\", \"acronym\", \"applet\", \"basefont\", \"bgsound\", \"big\", \"blink\", \"center\", \"content\", \"dir\", \"font\", \"frame\", \"frameset\", \"hgroup\", \"image\", \"keygen\", \"marquee\", \"menuitem\", \"nobr\", \"noembed\", \"noframes\", \"plaintext\", \"rb\", \"rtc\", \"shadow\", \"spacer\", \"strike\", \"tt\", \"xmp\", \"a\", \"abbr\", \"acronym\", \"address\", \"applet\", \"area\", \"article\", \"aside\", \"audio\", \"b\", \"base\", \"basefont\", \"bdi\", \"bdo\", \"bgsound\", \"big\", \"blink\", \"blockquote\", \"body\", \"br\", \"button\", \"canvas\", \"caption\", \"center\", \"cite\", \"code\", \"col\", \"colgroup\", \"content\", \"data\", \"datalist\", \"dd\", \"del\", \"details\", \"dfn\", \"dialog\", \"dir\", \"div\", \"dl\", \"dt\", \"em\", \"embed\", \"fieldset\", \"figcaption\", \"figure\", \"font\", \"footer\", \"form\", \"frame\", \"frameset\", \"head\", \"header\", \"hgroup\", \"hr\", \"html\", \"i\", \"iframe\", \"image\", \"img\", \"input\", \"ins\", \"kbd\", \"keygen\", \"label\", \"legend\", \"li\", \"link\", \"main\", \"map\", \"mark\", \"marquee\", \"menu\", \"menuitem\", \"meta\", \"meter\", \"nav\", \"nobr\", \"noembed\", \"noframes\", \"noscript\", \"object\", \"ol\", \"optgroup\", \"option\", \"output\", \"p\", \"param\", \"picture\", \"plaintext\", \"portal\", \"pre\", \"progress\", \"q\", \"rb\", \"rp\", \"rt\", \"rtc\", \"ruby\", \"s\", \"samp\", \"script\", \"section\", \"select\", \"shadow\", \"slot\", \"small\", \"source\", \"spacer\", \"span\", \"strike\", \"strong\", \"style\", \"sub\", \"summary\", \"sup\", \"table\", \"tbody\", \"td\", \"template\", \"textarea\", \"tfoot\", \"th\", \"thead\", \"time\", \"title\", \"tr\", \"track\", \"tt\", \"u\", \"ul\", \"var\", \"video\", \"wbr\", \"xmp\", \"input\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\",\n\"webview\",\n\"isindex\", \"listing\", \"multicol\", \"nextid\", \"noindex\", \"search\"]);\n\nconst memo = fn => createMemo(() => fn());\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document ? code() : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isImportNode, isSVG, isMathML) {\n  let node;\n  const create = () => {\n    const t = isMathML ? document.createElementNS(\"http://www.w3.org/1998/Math/MathML\", \"template\") : document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : isMathML ? t.firstChild : t.content.firstChild;\n  };\n  const fn = isImportNode ? () => untrack(() => document.importNode(node || (node = create()), true)) : () => (node || (node = create())).cloneNode(true);\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setProperty(node, name, value) {\n  if (isHydrating(node)) return;\n  node[name] = value;\n}\nfunction setAttribute(node, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(name);else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttributeNS(namespace, name);else node.setAttributeNS(namespace, name, value);\n}\nfunction setBoolAttribute(node, name, value) {\n  if (isHydrating(node)) return;\n  value ? node.setAttribute(name, \"\") : node.removeAttribute(name);\n}\nfunction className(node, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(\"class\");else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, handler[0] = e => handlerFn.call(node, handler[1], e));\n  } else node.addEventListener(name, handler, typeof handler !== \"function\" && handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction setStyleProperty(node, name, value) {\n  value != null ? node.style.setProperty(name, value) : node.style.removeProperty(name);\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => typeof props.ref === \"function\" && use(props.ref, node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef, props);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef, props);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  if (globalThis._$HY.done) return render(code, element, [...element.childNodes], options);\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = id => globalThis._$HY.r[id];\n  sharedConfig.has = id => id in globalThis._$HY.r;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  try {\n    gatherHydratable(element, options.renderId);\n    return render(code, element, [...element.childNodes], options);\n  } finally {\n    sharedConfig.context = null;\n  }\n}\nfunction getNextElement(template) {\n  let node,\n    key,\n    hydrating = isHydrating();\n  if (!hydrating || !(node = sharedConfig.registry.get(key = getHydrationKey()))) {\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (isHydrating(start)) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"$\") count++;else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const {\n        completed,\n        events\n      } = sharedConfig;\n      if (!events) return;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        events.shift();\n        eventHandler(e);\n      }\n      if (sharedConfig.done) {\n        sharedConfig.events = _$HY.events = null;\n        sharedConfig.completed = _$HY.completed = null;\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction isHydrating(node) {\n  return !!sharedConfig.context && !sharedConfig.done && (!node || node.isConnected);\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++) node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef, props) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev, typeof prev !== \"function\" && prev);\n    value && node.addEventListener(e, value, typeof value !== \"function\" && value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if (prop.slice(0, 5) === \"bool:\") {\n    setBoolAttribute(node, prop.slice(5), value);\n  } else if ((forceProp = prop.slice(0, 5) === \"prop:\") || (isChildProp = ChildProperties.has(prop)) || !isSVG && ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop))) || (isCE = node.nodeName.includes(\"-\") || \"is\" in props)) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    } else if (isHydrating(node)) return value;\n    if (prop === \"class\" || prop === \"className\") className(node, value);else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  if (sharedConfig.registry && sharedConfig.events) {\n    if (sharedConfig.events.find(([el, ev]) => ev === e)) return;\n  }\n  let node = e.target;\n  const key = `$$${e.type}`;\n  const oriTarget = e.target;\n  const oriCurrentTarget = e.currentTarget;\n  const retarget = value => Object.defineProperty(e, \"target\", {\n    configurable: true,\n    value\n  });\n  const handleNode = () => {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node.host && typeof node.host !== \"string\" && !node.host._$host && node.contains(e.target) && retarget(node.host);\n    return true;\n  };\n  const walkUpTree = () => {\n    while (handleNode() && (node = node._$host || node.parentNode || node.host));\n  };\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  if (e.composedPath) {\n    const path = e.composedPath();\n    retarget(path[0]);\n    for (let i = 0; i < path.length - 2; i++) {\n      node = path[i];\n      if (!handleNode()) break;\n      if (node._$host) {\n        node = node._$host;\n        walkUpTree();\n        break;\n      }\n      if (node.parentNode === oriCurrentTarget) {\n        break;\n      }\n    }\n  }\n  else walkUpTree();\n  retarget(oriTarget);\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  const hydrating = isHydrating(parent);\n  if (hydrating) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (hydrating) return current;\n    if (t === \"number\") {\n      value = value.toString();\n      if (value === current) return current;\n    }\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data !== value && (node.data = value);\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (hydrating) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (hydrating) {\n      if (!array.length) return current;\n      if (marker === undefined) return current = [...parent.childNodes];\n      let node = array[0];\n      if (node.parentNode !== parent) return current;\n      const nodes = [node];\n      while ((node = node.nextSibling) !== marker) nodes.push(node);\n      return current = nodes;\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value.nodeType) {\n    if (hydrating && value.parentNode) return current = multi ? [value] : value;\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else ;\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[normalized.length],\n      t;\n    if (item == null || item === true || item === false) ; else if ((t = typeof item) === \"object\" && item.nodeType) {\n      normalized.push(item);\n    } else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if (t === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item], Array.isArray(prev) ? prev : [prev]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3 && prev.data === value) normalized.push(prev);else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key)) sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  return sharedConfig.getNextContextId();\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nconst voidFn = () => undefined;\nconst RequestContext = Symbol();\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false, is = undefined) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName, {\n    is\n  });\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const {\n      useShadow\n    } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(() => {\n    if (hydrating) getOwner().user = hydrating = false;\n    content || (content = runWithOwner(owner, () => createMemo(() => props.children)));\n    const el = mount();\n    if (el instanceof HTMLHeadElement) {\n      const [clean, setClean] = createSignal(false);\n      const cleanup = () => setClean(true);\n      createRoot(dispose => insert(el, () => !clean() ? content() : dispose(), null));\n      onCleanup(cleanup);\n    } else {\n      const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n        renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n          mode: \"open\"\n        }) : container;\n      Object.defineProperty(container, \"_$host\", {\n        get() {\n          return marker.parentNode;\n        },\n        configurable: true\n      });\n      insert(renderRoot, content);\n      el.appendChild(container);\n      props.ref && props.ref(container);\n      onCleanup(() => el.removeChild(container));\n    }\n  }, undefined, {\n    render: !hydrating\n  });\n  return marker;\n}\nfunction createDynamic(component, props) {\n  const cached = createMemo(component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        return untrack(() => component(props));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg, untrack(() => props.is));\n        spread(el, props, isSvg);\n        return el;\n    }\n  });\n}\nfunction Dynamic(props) {\n  const [, others] = splitProps(props, [\"component\"]);\n  return createDynamic(() => props.component, others);\n}\n\nexport { Aliases, voidFn as Assets, ChildProperties, DOMElements, DelegatedEvents, Dynamic, Hydration, voidFn as HydrationScript, NoHydration, Portal, Properties, RequestContext, SVGElements, SVGNamespace, addEventListener, assign, classList, className, clearDelegatedEvents, createDynamic, delegateEvents, dynamicProperty, escape, voidFn as generateHydrationScript, voidFn as getAssets, getHydrationKey, getNextElement, getNextMarker, getNextMatch, getPropAlias, voidFn as getRequestEvent, hydrate, innerHTML, insert, isDev, isServer, memo, render, renderToStream, renderToString, renderToStringAsync, resolveSSRNode, runHydrationEvents, setAttribute, setAttributeNS, setBoolAttribute, setProperty, setStyleProperty, spread, ssr, ssrAttribute, ssrClassList, ssrElement, ssrHydrationKey, ssrSpread, ssrStyle, style, template, use, voidFn as useAssets };\n","import { $PROXY, $TRACK, getListener, batch, createSignal } from 'solid-js';\n\nconst $RAW = Symbol(\"store-raw\"),\n  $NODE = Symbol(\"store-node\"),\n  $HAS = Symbol(\"store-has\"),\n  $SELF = Symbol(\"store-self\");\nfunction wrap$1(value) {\n  let p = value[$PROXY];\n  if (!p) {\n    Object.defineProperty(value, $PROXY, {\n      value: p = new Proxy(value, proxyTraps$1)\n    });\n    if (!Array.isArray(value)) {\n      const keys = Object.keys(value),\n        desc = Object.getOwnPropertyDescriptors(value);\n      for (let i = 0, l = keys.length; i < l; i++) {\n        const prop = keys[i];\n        if (desc[prop].get) {\n          Object.defineProperty(value, prop, {\n            enumerable: desc[prop].enumerable,\n            get: desc[prop].get.bind(p)\n          });\n        }\n      }\n    }\n  }\n  return p;\n}\nfunction isWrappable(obj) {\n  let proto;\n  return obj != null && typeof obj === \"object\" && (obj[$PROXY] || !(proto = Object.getPrototypeOf(obj)) || proto === Object.prototype || Array.isArray(obj));\n}\nfunction unwrap(item, set = new Set()) {\n  let result, unwrapped, v, prop;\n  if (result = item != null && item[$RAW]) return result;\n  if (!isWrappable(item) || set.has(item)) return item;\n  if (Array.isArray(item)) {\n    if (Object.isFrozen(item)) item = item.slice(0);else set.add(item);\n    for (let i = 0, l = item.length; i < l; i++) {\n      v = item[i];\n      if ((unwrapped = unwrap(v, set)) !== v) item[i] = unwrapped;\n    }\n  } else {\n    if (Object.isFrozen(item)) item = Object.assign({}, item);else set.add(item);\n    const keys = Object.keys(item),\n      desc = Object.getOwnPropertyDescriptors(item);\n    for (let i = 0, l = keys.length; i < l; i++) {\n      prop = keys[i];\n      if (desc[prop].get) continue;\n      v = item[prop];\n      if ((unwrapped = unwrap(v, set)) !== v) item[prop] = unwrapped;\n    }\n  }\n  return item;\n}\nfunction getNodes(target, symbol) {\n  let nodes = target[symbol];\n  if (!nodes) Object.defineProperty(target, symbol, {\n    value: nodes = Object.create(null)\n  });\n  return nodes;\n}\nfunction getNode(nodes, property, value) {\n  if (nodes[property]) return nodes[property];\n  const [s, set] = createSignal(value, {\n    equals: false,\n    internal: true\n  });\n  s.$ = set;\n  return nodes[property] = s;\n}\nfunction proxyDescriptor$1(target, property) {\n  const desc = Reflect.getOwnPropertyDescriptor(target, property);\n  if (!desc || desc.get || !desc.configurable || property === $PROXY || property === $NODE) return desc;\n  delete desc.value;\n  delete desc.writable;\n  desc.get = () => target[$PROXY][property];\n  return desc;\n}\nfunction trackSelf(target) {\n  getListener() && getNode(getNodes(target, $NODE), $SELF)();\n}\nfunction ownKeys(target) {\n  trackSelf(target);\n  return Reflect.ownKeys(target);\n}\nconst proxyTraps$1 = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    if (property === $TRACK) {\n      trackSelf(target);\n      return receiver;\n    }\n    const nodes = getNodes(target, $NODE);\n    const tracked = nodes[property];\n    let value = tracked ? tracked() : target[property];\n    if (property === $NODE || property === $HAS || property === \"__proto__\") return value;\n    if (!tracked) {\n      const desc = Object.getOwnPropertyDescriptor(target, property);\n      if (getListener() && (typeof value !== \"function\" || target.hasOwnProperty(property)) && !(desc && desc.get)) value = getNode(nodes, property, value)();\n    }\n    return isWrappable(value) ? wrap$1(value) : value;\n  },\n  has(target, property) {\n    if (property === $RAW || property === $PROXY || property === $TRACK || property === $NODE || property === $HAS || property === \"__proto__\") return true;\n    getListener() && getNode(getNodes(target, $HAS), property)();\n    return property in target;\n  },\n  set() {\n    return true;\n  },\n  deleteProperty() {\n    return true;\n  },\n  ownKeys: ownKeys,\n  getOwnPropertyDescriptor: proxyDescriptor$1\n};\nfunction setProperty(state, property, value, deleting = false) {\n  if (!deleting && state[property] === value) return;\n  const prev = state[property],\n    len = state.length;\n  if (value === undefined) {\n    delete state[property];\n    if (state[$HAS] && state[$HAS][property] && prev !== undefined) state[$HAS][property].$();\n  } else {\n    state[property] = value;\n    if (state[$HAS] && state[$HAS][property] && prev === undefined) state[$HAS][property].$();\n  }\n  let nodes = getNodes(state, $NODE),\n    node;\n  if (node = getNode(nodes, property, prev)) node.$(() => value);\n  if (Array.isArray(state) && state.length !== len) {\n    for (let i = state.length; i < len; i++) (node = nodes[i]) && node.$();\n    (node = getNode(nodes, \"length\", len)) && node.$(state.length);\n  }\n  (node = nodes[$SELF]) && node.$();\n}\nfunction mergeStoreNode(state, value) {\n  const keys = Object.keys(value);\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    setProperty(state, key, value[key]);\n  }\n}\nfunction updateArray(current, next) {\n  if (typeof next === \"function\") next = next(current);\n  next = unwrap(next);\n  if (Array.isArray(next)) {\n    if (current === next) return;\n    let i = 0,\n      len = next.length;\n    for (; i < len; i++) {\n      const value = next[i];\n      if (current[i] !== value) setProperty(current, i, value);\n    }\n    setProperty(current, \"length\", len);\n  } else mergeStoreNode(current, next);\n}\nfunction updatePath(current, path, traversed = []) {\n  let part,\n    prev = current;\n  if (path.length > 1) {\n    part = path.shift();\n    const partType = typeof part,\n      isArray = Array.isArray(current);\n    if (Array.isArray(part)) {\n      for (let i = 0; i < part.length; i++) {\n        updatePath(current, [part[i]].concat(path), traversed);\n      }\n      return;\n    } else if (isArray && partType === \"function\") {\n      for (let i = 0; i < current.length; i++) {\n        if (part(current[i], i)) updatePath(current, [i].concat(path), traversed);\n      }\n      return;\n    } else if (isArray && partType === \"object\") {\n      const {\n        from = 0,\n        to = current.length - 1,\n        by = 1\n      } = part;\n      for (let i = from; i <= to; i += by) {\n        updatePath(current, [i].concat(path), traversed);\n      }\n      return;\n    } else if (path.length > 1) {\n      updatePath(current[part], path, [part].concat(traversed));\n      return;\n    }\n    prev = current[part];\n    traversed = [part].concat(traversed);\n  }\n  let value = path[0];\n  if (typeof value === \"function\") {\n    value = value(prev, traversed);\n    if (value === prev) return;\n  }\n  if (part === undefined && value == undefined) return;\n  value = unwrap(value);\n  if (part === undefined || isWrappable(prev) && isWrappable(value) && !Array.isArray(value)) {\n    mergeStoreNode(prev, value);\n  } else setProperty(current, part, value);\n}\nfunction createStore(...[store, options]) {\n  const unwrappedStore = unwrap(store || {});\n  const isArray = Array.isArray(unwrappedStore);\n  const wrappedStore = wrap$1(unwrappedStore);\n  function setStore(...args) {\n    batch(() => {\n      isArray && args.length === 1 ? updateArray(unwrappedStore, args[0]) : updatePath(unwrappedStore, args);\n    });\n  }\n  return [wrappedStore, setStore];\n}\n\nfunction proxyDescriptor(target, property) {\n  const desc = Reflect.getOwnPropertyDescriptor(target, property);\n  if (!desc || desc.get || desc.set || !desc.configurable || property === $PROXY || property === $NODE) return desc;\n  delete desc.value;\n  delete desc.writable;\n  desc.get = () => target[$PROXY][property];\n  desc.set = v => target[$PROXY][property] = v;\n  return desc;\n}\nconst proxyTraps = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    if (property === $TRACK) {\n      trackSelf(target);\n      return receiver;\n    }\n    const nodes = getNodes(target, $NODE);\n    const tracked = nodes[property];\n    let value = tracked ? tracked() : target[property];\n    if (property === $NODE || property === $HAS || property === \"__proto__\") return value;\n    if (!tracked) {\n      const desc = Object.getOwnPropertyDescriptor(target, property);\n      const isFunction = typeof value === \"function\";\n      if (getListener() && (!isFunction || target.hasOwnProperty(property)) && !(desc && desc.get)) value = getNode(nodes, property, value)();else if (value != null && isFunction && value === Array.prototype[property]) {\n        return (...args) => batch(() => Array.prototype[property].apply(receiver, args));\n      }\n    }\n    return isWrappable(value) ? wrap(value) : value;\n  },\n  has(target, property) {\n    if (property === $RAW || property === $PROXY || property === $TRACK || property === $NODE || property === $HAS || property === \"__proto__\") return true;\n    getListener() && getNode(getNodes(target, $HAS), property)();\n    return property in target;\n  },\n  set(target, property, value) {\n    batch(() => setProperty(target, property, unwrap(value)));\n    return true;\n  },\n  deleteProperty(target, property) {\n    batch(() => setProperty(target, property, undefined, true));\n    return true;\n  },\n  ownKeys: ownKeys,\n  getOwnPropertyDescriptor: proxyDescriptor\n};\nfunction wrap(value) {\n  let p = value[$PROXY];\n  if (!p) {\n    Object.defineProperty(value, $PROXY, {\n      value: p = new Proxy(value, proxyTraps)\n    });\n    const keys = Object.keys(value),\n      desc = Object.getOwnPropertyDescriptors(value);\n    const proto = Object.getPrototypeOf(value);\n    const isClass = proto !== null && value !== null && typeof value === \"object\" && !Array.isArray(value) && proto !== Object.prototype;\n    if (isClass) {\n      let curProto = proto;\n      while (curProto != null) {\n        const descriptors = Object.getOwnPropertyDescriptors(curProto);\n        keys.push(...Object.keys(descriptors));\n        Object.assign(desc, descriptors);\n        curProto = Object.getPrototypeOf(curProto);\n      }\n    }\n    for (let i = 0, l = keys.length; i < l; i++) {\n      const prop = keys[i];\n      if (isClass && prop === \"constructor\") continue;\n      if (desc[prop].get) {\n        const get = desc[prop].get.bind(p);\n        Object.defineProperty(value, prop, {\n          get,\n          configurable: true\n        });\n      }\n      if (desc[prop].set) {\n        const og = desc[prop].set,\n          set = v => batch(() => og.call(p, v));\n        Object.defineProperty(value, prop, {\n          set,\n          configurable: true\n        });\n      }\n    }\n  }\n  return p;\n}\nfunction createMutable(state, options) {\n  const unwrappedStore = unwrap(state || {});\n  const wrappedStore = wrap(unwrappedStore);\n  return wrappedStore;\n}\nfunction modifyMutable(state, modifier) {\n  batch(() => modifier(unwrap(state)));\n}\n\nconst $ROOT = Symbol(\"store-root\");\nfunction applyState(target, parent, property, merge, key) {\n  const previous = parent[property];\n  if (target === previous) return;\n  const isArray = Array.isArray(target);\n  if (property !== $ROOT && (!isWrappable(target) || !isWrappable(previous) || isArray !== Array.isArray(previous) || key && target[key] !== previous[key])) {\n    setProperty(parent, property, target);\n    return;\n  }\n  if (isArray) {\n    if (target.length && previous.length && (!merge || key && target[0] && target[0][key] != null)) {\n      let i, j, start, end, newEnd, item, newIndicesNext, keyVal;\n      for (start = 0, end = Math.min(previous.length, target.length); start < end && (previous[start] === target[start] || key && previous[start] && target[start] && previous[start][key] && previous[start][key] === target[start][key]); start++) {\n        applyState(target[start], previous, start, merge, key);\n      }\n      const temp = new Array(target.length),\n        newIndices = new Map();\n      for (end = previous.length - 1, newEnd = target.length - 1; end >= start && newEnd >= start && (previous[end] === target[newEnd] || key && previous[end] && target[newEnd] && previous[end][key] && previous[end][key] === target[newEnd][key]); end--, newEnd--) {\n        temp[newEnd] = previous[end];\n      }\n      if (start > newEnd || start > end) {\n        for (j = start; j <= newEnd; j++) setProperty(previous, j, target[j]);\n        for (; j < target.length; j++) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        }\n        if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n        return;\n      }\n      newIndicesNext = new Array(newEnd + 1);\n      for (j = newEnd; j >= start; j--) {\n        item = target[j];\n        keyVal = key && item ? item[key] : item;\n        i = newIndices.get(keyVal);\n        newIndicesNext[j] = i === undefined ? -1 : i;\n        newIndices.set(keyVal, j);\n      }\n      for (i = start; i <= end; i++) {\n        item = previous[i];\n        keyVal = key && item ? item[key] : item;\n        j = newIndices.get(keyVal);\n        if (j !== undefined && j !== -1) {\n          temp[j] = previous[i];\n          j = newIndicesNext[j];\n          newIndices.set(keyVal, j);\n        }\n      }\n      for (j = start; j < target.length; j++) {\n        if (j in temp) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        } else setProperty(previous, j, target[j]);\n      }\n    } else {\n      for (let i = 0, len = target.length; i < len; i++) {\n        applyState(target[i], previous, i, merge, key);\n      }\n    }\n    if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n    return;\n  }\n  const targetKeys = Object.keys(target);\n  for (let i = 0, len = targetKeys.length; i < len; i++) {\n    applyState(target[targetKeys[i]], previous, targetKeys[i], merge, key);\n  }\n  const previousKeys = Object.keys(previous);\n  for (let i = 0, len = previousKeys.length; i < len; i++) {\n    if (target[previousKeys[i]] === undefined) setProperty(previous, previousKeys[i], undefined);\n  }\n}\nfunction reconcile(value, options = {}) {\n  const {\n      merge,\n      key = \"id\"\n    } = options,\n    v = unwrap(value);\n  return state => {\n    if (!isWrappable(state) || !isWrappable(v)) return v;\n    const res = applyState(v, {\n      [$ROOT]: state\n    }, $ROOT, merge, key);\n    return res === undefined ? state : res;\n  };\n}\nconst producers = new WeakMap();\nconst setterTraps = {\n  get(target, property) {\n    if (property === $RAW) return target;\n    const value = target[property];\n    let proxy;\n    return isWrappable(value) ? producers.get(value) || (producers.set(value, proxy = new Proxy(value, setterTraps)), proxy) : value;\n  },\n  set(target, property, value) {\n    setProperty(target, property, unwrap(value));\n    return true;\n  },\n  deleteProperty(target, property) {\n    setProperty(target, property, undefined, true);\n    return true;\n  }\n};\nfunction produce(fn) {\n  return state => {\n    if (isWrappable(state)) {\n      let proxy;\n      if (!(proxy = producers.get(state))) {\n        producers.set(state, proxy = new Proxy(state, setterTraps));\n      }\n      fn(proxy);\n    }\n    return state;\n  };\n}\n\nconst DEV = undefined;\n\nexport { $RAW, DEV, createMutable, createStore, modifyMutable, produce, reconcile, unwrap };\n","// Configuration for the Intelligent Spatial Platform\nexport const CONFIG = {\n  // API Configuration\n  api: {\n    baseUrl: import.meta.env.VITE_API_BASE_URL || window.location.origin + '/api/v1',\n    endpoints: {\n      locations: '/locations',\n      historicalSites: '/historical-sites',\n      voiceProcess: '/voice/process',\n      aiChat: '/ai/chat',\n      gameStatus: '/game/status',\n      gameCollect: '/game/collect',\n      gameMove: '/game/move'\n    }\n  },\n\n  // WebSocket Configuration\n  websocket: {\n    url: import.meta.env.VITE_WS_URL || `ws://${window.location.host}/ws`\n  },\n\n  // Cesium Configuration\n  cesium: {\n    // Use environment variable or default token\n    accessToken: import.meta.env.VITE_CESIUM_ACCESS_TOKEN ||\n      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5M2M4Njk1My02Y2NiLTQ0OWQtYWZmOS05ZDJlNjRjN2YzODUiLCJpZCI6NzM2NzIsImlhdCI6MTc1NzgxNjA3MH0.Bps4cz4M6_sFFrh1qHjc8CS7UVGJBBchdsK4VhipdKA',\n\n    // Default view settings\n    defaultView: {\n      longitude: 121.5654,  // Taipei, Taiwan\n      latitude: 25.0330,\n      height: 1000\n    },\n\n    // Terrain provider settings\n    terrain: {\n      url: 'https://assets.agi.com/stk-terrain/world'\n    }\n  },\n\n  // Game Configuration\n  game: {\n    collectionRadius: 50,  // meters\n    itemSpawnInterval: 30000,  // 30 seconds\n    maxItemsOnMap: 10,\n    scoreValues: {\n      common: 10,\n      rare: 50,\n      legendary: 100\n    },\n    itemColors: {\n      common: '#4CAF50',     // Green\n      rare: '#2196F3',       // Blue\n      legendary: '#FF9800'   // Orange\n    }\n  },\n\n  // Voice Configuration\n  voice: {\n    language: 'zh-TW',\n    recognitionTimeout: 5000,  // 5 seconds\n    supportedCommands: [\n      'navigate', 'collect', 'introduce', 'status'\n    ]\n  },\n\n  // AI Configuration\n  ai: {\n    maxMessageLength: 500,\n    responseTimeout: 10000,  // 10 seconds\n    contextWindow: 5  // Number of previous messages to include\n  },\n\n  // Map Styling\n  mapStyles: {\n    playerMarker: {\n      image: '🧑‍🚀',\n      scale: 1.5,\n      color: '#FF6B6B'\n    },\n    historicalSite: {\n      image: '🏛️',\n      scale: 1.2,\n      color: '#9C27B0'\n    },\n    itemMarker: {\n      scale: 0.8,\n      heightReference: 'CLAMP_TO_GROUND'\n    }\n  },\n\n  // UI Configuration\n  ui: {\n    animationDuration: 300,  // ms\n    notificationTimeout: 3000,  // ms\n    panelTransition: 'all 0.3s ease-in-out'\n  },\n\n  // Default bounds for Taiwan\n  defaultBounds: {\n    north: 25.3,\n    south: 24.7,\n    east: 121.8,\n    west: 121.3\n  }\n} as const;\n\nexport type Config = typeof CONFIG;","import { createSignal, createEffect } from 'solid-js';\nimport { createStore } from 'solid-js/store';\nimport type { GameState, Player, PlayerStats, GameItem, CollectResult } from '@/types';\nimport { CONFIG } from '@/config';\n\n// Game state store\nconst [gameState, setGameState] = createStore<GameState>({\n  player: undefined,\n  playerStats: {\n    playerId: '',\n    totalScore: 0,\n    totalSessions: 0,\n    totalItems: 0,\n    averageScore: 0,\n    bestScore: 0,\n    totalPlayTime: 0,\n    lastPlayed: undefined,\n  },\n  nearbyItems: [],\n  gameSession: undefined,\n  isGameActive: false,\n});\n\n// Signals for reactive values\nconst [isLoading, setIsLoading] = createSignal(false);\nconst [lastActivity, setLastActivity] = createSignal<string>('');\n\n// Game actions\nexport const gameActions = {\n  // Initialize game for a player\n  async initializeGame(playerId: string) {\n    setIsLoading(true);\n    try {\n      await loadPlayerStats(playerId);\n      await startGameSession(playerId);\n      setGameState('isGameActive', true);\n    } catch (error) {\n      console.error('Failed to initialize game:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  },\n\n  // Update player position\n  async updatePlayerPosition(latitude: number, longitude: number) {\n    if (!gameState.player) return;\n\n    try {\n      const response = await fetch(`${CONFIG.api.baseUrl}${CONFIG.api.endpoints.gameMove}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          playerId: gameState.player.id,\n          lat: latitude,\n          lng: longitude,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n\n        // Update player position\n        setGameState('player', 'latitude', latitude);\n        setGameState('player', 'longitude', longitude);\n\n        // Handle historical site encounter\n        if (data.historicalSite) {\n          handleHistoricalSiteEncounter(data.historicalSite, data.aiIntroduction);\n        }\n\n        // Update nearby items\n        updateNearbyItems();\n      }\n    } catch (error) {\n      console.error('Failed to update player position:', error);\n    }\n  },\n\n  // Collect an item\n  async collectItem(itemId: string, playerLat: number, playerLng: number): Promise<CollectResult | null> {\n    if (!gameState.player) return null;\n\n    try {\n      const response = await fetch(`${CONFIG.api.baseUrl}${CONFIG.api.endpoints.gameCollect}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          playerId: gameState.player.id,\n          itemId,\n          lat: playerLat,\n          lng: playerLng,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        const result = data.data as CollectResult;\n\n        if (result.success) {\n          // Update player stats\n          setGameState('playerStats', 'totalScore', result.totalScore);\n          setGameState('playerStats', 'totalItems', prev => prev + 1);\n\n          // Check for level up\n          const newLevel = calculateLevel(result.totalScore);\n          if (newLevel > gameState.player.level) {\n            setGameState('player', 'level', newLevel);\n            addActivity(`升級到第 ${newLevel} 級！`);\n          }\n\n          // Remove item from nearby items\n          setGameState('nearbyItems', prev => prev.filter(item => item.id !== itemId));\n\n          // Add activity\n          if (result.item) {\n            addActivity(`收集到 ${result.item.name}！+${result.score} 分`);\n          }\n\n          return result;\n        }\n      }\n    } catch (error) {\n      console.error('Failed to collect item:', error);\n    }\n\n    return null;\n  },\n\n  // Award points for various achievements\n  awardPoints(points: number, reason: string) {\n    const currentScore = gameState.playerStats.totalScore + points;\n    setGameState('playerStats', 'totalScore', currentScore);\n\n    if (gameState.player) {\n      const newLevel = calculateLevel(currentScore);\n      if (newLevel > gameState.player.level) {\n        setGameState('player', 'level', newLevel);\n        addActivity(`升級到第 ${newLevel} 級！`);\n      }\n    }\n\n    addActivity(`${reason} +${points} 分`);\n  },\n\n  // Update nearby items\n  updateNearbyItems() {\n    updateNearbyItems();\n  },\n\n  // Get player stats\n  getPlayerStats() {\n    return gameState.playerStats;\n  },\n\n  // End current game session\n  async endGameSession() {\n    if (!gameState.gameSession) return;\n\n    try {\n      const response = await fetch(`${CONFIG.api.baseUrl}/game/sessions/${gameState.gameSession.id}/end`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          score: gameState.playerStats.totalScore,\n          duration: Math.floor((Date.now() - new Date(gameState.gameSession.startTime).getTime()) / 1000),\n        }),\n      });\n\n      if (response.ok) {\n        setGameState('gameSession', undefined);\n        setGameState('isGameActive', false);\n      }\n    } catch (error) {\n      console.error('Failed to end game session:', error);\n    }\n  },\n};\n\n// Helper functions\nasync function loadPlayerStats(playerId: string) {\n  try {\n    const response = await fetch(`${CONFIG.api.baseUrl}${CONFIG.api.endpoints.gameStatus}?playerId=${playerId}`);\n\n    if (response.ok) {\n      const data = await response.json();\n      if (data.data) {\n        const player = data.data as Player;\n        setGameState('player', player);\n        setGameState('playerStats', {\n          playerId,\n          totalScore: player.score,\n          totalSessions: 0,\n          totalItems: 0,\n          averageScore: player.score,\n          bestScore: player.score,\n          totalPlayTime: 0,\n        });\n      }\n    } else {\n      // Create new player\n      await createNewPlayer(playerId);\n    }\n  } catch (error) {\n    console.error('Failed to load player stats:', error);\n    // 後端不可用時創建默認玩家\n    createDefaultPlayer(playerId);\n  }\n}\n\nasync function createNewPlayer(playerId: string) {\n  try {\n    const response = await fetch(`${CONFIG.api.baseUrl}/game/players`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        id: playerId,\n        name: `Player_${playerId.substring(0, 8)}`,\n        latitude: CONFIG.cesium.defaultView.latitude,\n        longitude: CONFIG.cesium.defaultView.longitude,\n      }),\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      const player = data.data as Player;\n      setGameState('player', player);\n    }\n  } catch (error) {\n    console.error('Failed to create new player:', error);\n    createDefaultPlayer(playerId);\n  }\n}\n\nfunction createDefaultPlayer(playerId: string) {\n  const defaultPlayer = {\n    id: playerId,\n    name: `Player_${playerId.substring(0, 8)}`,\n    latitude: CONFIG.cesium.defaultView.latitude,\n    longitude: CONFIG.cesium.defaultView.longitude,\n    level: 1,\n    score: 0,\n    items: 0,\n  };\n\n  setGameState('player', defaultPlayer);\n  setGameState('playerStats', {\n    playerId,\n    totalScore: 0,\n    totalSessions: 1,\n    totalItems: 0,\n    averageScore: 0,\n    bestScore: 0,\n    totalPlayTime: 0,\n    lastPlayed: new Date(),\n  });\n}\n\nasync function startGameSession(playerId: string) {\n  try {\n    const response = await fetch(`${CONFIG.api.baseUrl}/game/sessions`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ playerId }),\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      setGameState('gameSession', data.data);\n    }\n  } catch (error) {\n    console.error('Failed to start game session:', error);\n  }\n}\n\nfunction calculateLevel(score: number): number {\n  return Math.floor(score / 100) + 1;\n}\n\nfunction handleHistoricalSiteEncounter(site: any, aiIntroduction?: string) {\n  console.log('🏛️ Historical site encountered:', site.name);\n\n  // Award points for discovering historical sites\n  gameActions.awardPoints(25, '發現歷史景點');\n\n  addActivity(`發現歷史景點：${site.name}`);\n}\n\nfunction updateNearbyItems() {\n  // This would be implemented to fetch nearby items from the API\n  // For now, it's a placeholder\n}\n\nfunction addActivity(message: string) {\n  const timestamp = new Date().toLocaleTimeString();\n  setLastActivity(`${timestamp} - ${message}`);\n}\n\n// Computed values\nexport const gameComputed = {\n  get currentPlayer() {\n    return gameState.player;\n  },\n  get playerStats() {\n    return gameState.playerStats;\n  },\n  get nearbyItems() {\n    return gameState.nearbyItems;\n  },\n  get isGameActive() {\n    return gameState.isGameActive;\n  },\n  get isLoading() {\n    return isLoading();\n  },\n  get lastActivity() {\n    return lastActivity();\n  },\n};\n\n","import { Component, createSignal } from 'solid-js';\nimport { gameComputed } from '@/stores/gameStore';\n\ninterface HeaderProps {\n  onToggleVoice: () => void;\n  onToggleChat: () => void;\n}\n\nconst Header: Component<HeaderProps> = (props) => {\n  const [activeTab, setActiveTab] = createSignal('explore');\n\n  const navigationTabs = [\n    { id: 'explore', label: '探索', icon: 'M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z' },\n    { id: 'analytics', label: '分析', icon: 'M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z' },\n    { id: 'settings', label: '設定', icon: 'M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z' }\n  ];\n\n  return (\n    <header class=\"nav sticky top-0 z-50 animate-fade-in\">\n      <div class=\"container\">\n        <div class=\"flex items-center justify-between h-16\">\n          {/* Brand */}\n          <div class=\"flex items-center space-x-4\">\n            <div class=\"flex items-center space-x-3\">\n              <div class=\"w-10 h-10 bg-primary rounded-xl flex items-center justify-center shadow-sm\">\n                <svg class=\"w-5 h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\"/>\n                </svg>\n              </div>\n              <div>\n                <h1 class=\"text-heading-sm text-primary\">智能空間平台</h1>\n                <p class=\"text-body-sm text-secondary\">Intelligent Spatial Platform</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Navigation Tabs */}\n          <nav class=\"hidden lg:flex items-center space-x-1 bg-white/50 rounded-2xl p-2 border border-neutral-200/50\">\n            {navigationTabs.map((tab) => (\n              <button\n                onClick={() => setActiveTab(tab.id)}\n                class={`nav-item flex items-center space-x-2 px-4 py-2.5 rounded-xl transition-all duration-200 ${\n                  activeTab() === tab.id\n                    ? 'nav-item active bg-white shadow-sm'\n                    : 'text-secondary hover:text-primary hover:bg-white/50'\n                }`}\n              >\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d={tab.icon} />\n                </svg>\n                <span class=\"text-body-md font-medium\">{tab.label}</span>\n              </button>\n            ))}\n          </nav>\n\n          {/* Actions */}\n          <div class=\"flex items-center space-x-3\">\n            {/* Voice Control */}\n            <button\n              onClick={props.onToggleVoice}\n              class=\"btn-ghost btn-icon group relative\"\n              title=\"語音控制\"\n            >\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"\n                      d=\"M12 1v6m0 0l4-4m-4 4L8 3m0 18v-6m0 0l4 4m-4-4l-4 4\" />\n              </svg>\n              <div class=\"absolute -inset-2 rounded-lg bg-neutral-100 opacity-0 group-hover:opacity-100 transition-opacity -z-10\"></div>\n            </button>\n\n            {/* AI Chat */}\n            <button\n              onClick={props.onToggleChat}\n              class=\"btn-primary space-x-2\"\n            >\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\"\n                      d=\"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z\" />\n              </svg>\n              <span>AI 助手</span>\n            </button>\n\n            {/* Status Badge */}\n            <div class=\"flex items-center space-x-2 bg-surface border border-neutral-200/50 rounded-full px-3 py-2\">\n              <div class=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse-subtle\"></div>\n              <div class=\"flex flex-col\">\n                <span class=\"text-body-sm text-primary font-semibold\">{gameComputed.playerStats.totalScore}</span>\n                <span class=\"text-caption text-tertiary\">積分</span>\n              </div>\n            </div>\n\n            {/* User Menu */}\n            <button class=\"w-9 h-9 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white shadow-sm hover:shadow-md transition-all\">\n              <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fill-rule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clip-rule=\"evenodd\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;","import { Component, onMount, onCleanup, createSignal, For } from 'solid-js';\nimport * as Cesium from 'cesium';\nimport { CONFIG } from '@/config';\nimport type { HistoricalSite, Position } from '@/types';\n\ninterface CesiumMapProps {\n  onPlayerMove: (latitude: number, longitude: number) => void;\n  onHistoricalSiteClick: (site: HistoricalSite) => void;\n}\n\ninterface MapLocation {\n  id: string;\n  name: string;\n  type: 'landmark' | 'poi' | 'user';\n  lat: number;\n  lng: number;\n  description?: string;\n}\n\nconst CesiumMap: Component<CesiumMapProps> = (props) => {\n  let mapContainer: HTMLDivElement;\n  let viewer: Cesium.Viewer | undefined;\n\n  const [playerPosition, setPlayerPosition] = createSignal<Position>({\n    latitude: 25.0330,\n    longitude: 121.5654,\n  });\n\n  const [mapMode, setMapMode] = createSignal<'satellite' | 'terrain' | 'street'>('satellite');\n  const [isLoading, setIsLoading] = createSignal(true);\n\n  // Mock locations for demonstration\n  const sampleLocations: MapLocation[] = [\n    {\n      id: '1',\n      name: '台北101',\n      type: 'landmark',\n      lat: 25.0338,\n      lng: 121.5645,\n      description: '台北市地標建築'\n    },\n    {\n      id: '2',\n      name: '國父紀念館',\n      type: 'poi',\n      lat: 25.0408,\n      lng: 121.5598,\n      description: '歷史文化景點'\n    },\n    {\n      id: '3',\n      name: '玩家位置',\n      type: 'user',\n      lat: playerPosition().latitude,\n      lng: playerPosition().longitude,\n      description: '您的當前位置'\n    }\n  ];\n\n  onMount(async () => {\n    console.log('🗺️ Initializing CesiumJS 3D Map');\n\n    try {\n      // Set Cesium access token\n      Cesium.Ion.defaultAccessToken = CONFIG.cesium.accessToken;\n\n      // Initialize Cesium viewer\n      viewer = new Cesium.Viewer(mapContainer, {\n        terrain: Cesium.Terrain.fromWorldTerrain(),\n        baseLayerPicker: false,\n        geocoder: false,\n        homeButton: false,\n        sceneModePicker: false,\n        navigationHelpButton: false,\n        animation: false,\n        timeline: false,\n        fullscreenButton: false,\n        vrButton: false,\n        scene3DOnly: true,\n      });\n\n      // 暴露 viewer 到全域以便調試\n      (window as any).cesiumViewer = viewer;\n\n      // 確保地球儀顯示\n      viewer.scene.globe.show = true;\n      viewer.scene.skyBox.show = true;\n\n      // 設定背景色確保可見性\n      viewer.scene.backgroundColor = Cesium.Color.DARKSLATEGRAY;\n\n      // 強制渲染確保地球儀可見\n      viewer.scene.globe.enableLighting = false;\n      viewer.scene.fog.enabled = false;\n      viewer.scene.skyAtmosphere.show = true;\n\n      // Set initial camera position\n      viewer.camera.setView({\n        destination: Cesium.Cartesian3.fromDegrees(\n          CONFIG.cesium.defaultView.longitude,\n          CONFIG.cesium.defaultView.latitude,\n          CONFIG.cesium.defaultView.height\n        ),\n      });\n\n      // Add click event listener\n      viewer.cesiumWidget.screenSpaceEventHandler.setInputAction((event: any) => {\n        const pickedPosition = viewer!.camera.pickEllipsoid(event.position, viewer!.scene.globe.ellipsoid);\n        if (pickedPosition) {\n          const cartographic = Cesium.Cartographic.fromCartesian(pickedPosition);\n          const longitude = Cesium.Math.toDegrees(cartographic.longitude);\n          const latitude = Cesium.Math.toDegrees(cartographic.latitude);\n\n          setPlayerPosition({ latitude, longitude });\n          props.onPlayerMove(latitude, longitude);\n        }\n      }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n\n      setIsLoading(false);\n      console.log('🗺️ CesiumJS 3D Map initialized successfully');\n    } catch (error) {\n      console.error('Failed to initialize CesiumJS:', error);\n      setIsLoading(false);\n    }\n  });\n\n  onCleanup(() => {\n    if (viewer) {\n      viewer.destroy();\n    }\n  });\n\n  const handleMapClick = (event: MouseEvent) => {\n    const rect = mapContainer.getBoundingClientRect();\n    const x = ((event.clientX - rect.left) / rect.width - 0.5) * 360;\n    const y = ((rect.bottom - event.clientY) / rect.height - 0.5) * 180;\n\n    console.log(`Map clicked at: ${y.toFixed(6)}, ${x.toFixed(6)}`);\n    setPlayerPosition({ latitude: y, longitude: x });\n    props.onPlayerMove(y, x);\n  };\n\n  const getLocationIcon = (type: string) => {\n    switch (type) {\n      case 'landmark':\n        return 'M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5';\n      case 'poi':\n        return 'M15 10.5a3 3 0 11-6 0 3 3 0 016 0z M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z';\n      case 'user':\n        return 'M15 10.5a3 3 0 11-6 0 3 3 0 016 0z M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z';\n      default:\n        return 'M15 10.5a3 3 0 11-6 0 3 3 0 016 0z';\n    }\n  };\n\n  return (\n    <div class=\"w-full h-full relative overflow-hidden\">\n      {/* CesiumJS Map Container */}\n      <div\n        ref={mapContainer!}\n        class=\"w-full h-full\"\n        style=\"min-height: 400px; height: calc(100vh - 65px);\"\n      >\n\n      </div>\n\n      {/* Loading State */}\n      {isLoading() && (\n        <div class=\"absolute inset-0 bg-white/95 backdrop-blur-sm flex items-center justify-center z-30\">\n          <div class=\"text-center space-y-4 animate-scale-in\">\n            <div class=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto shadow-lg animate-pulse-subtle\">\n              <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2z\" />\n              </svg>\n            </div>\n            <div class=\"space-y-2\">\n              <h3 class=\"text-heading-sm text-primary\">載入 CesiumJS 3D 地圖</h3>\n              <p class=\"text-body-md text-secondary\">初始化地球儀系統...</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Position Display */}\n      <div class=\"absolute bottom-6 left-6 z-20\">\n        <div class=\"card p-4 space-y-2\">\n          <div class=\"flex items-center space-x-2\">\n            <div class=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse-subtle\"></div>\n            <span class=\"text-body-sm text-secondary\">當前位置</span>\n          </div>\n          <div class=\"space-y-1\">\n            <p class=\"text-body-sm text-primary font-mono\">\n              緯度: {playerPosition().latitude.toFixed(6)}\n            </p>\n            <p class=\"text-body-sm text-primary font-mono\">\n              經度: {playerPosition().longitude.toFixed(6)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CesiumMap;","import { Component, Show, createSignal, For } from 'solid-js';\nimport { gameComputed } from '@/stores/gameStore';\n\ninterface GamePanelProps {\n  isExpanded: boolean;\n  onToggle: () => void;\n}\n\ninterface MetricCard {\n  id: string;\n  title: string;\n  value: string | number;\n  change: string;\n  trend: 'up' | 'down' | 'neutral';\n  icon: string;\n  color: string;\n}\n\nconst GamePanel: Component<GamePanelProps> = (props) => {\n  const [activeMetricTab, setActiveMetricTab] = createSignal('overview');\n\n  const metricCards: MetricCard[] = [\n    {\n      id: 'level',\n      title: '等級',\n      value: gameComputed.currentPlayer?.level || 1,\n      change: '+2 本週',\n      trend: 'up',\n      icon: 'M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.228a25.073 25.073 0 012.916.52 6.003 6.003 0 01-4.395 4.972m0 0a6.726 6.726 0 01-2.749 1.35m0 0A6.772 6.772 0 0112 15.75c-2.622 0-5.033-.732-7.2-2z',\n      color: 'from-blue-500 to-blue-600'\n    },\n    {\n      id: 'score',\n      title: '積分',\n      value: gameComputed.playerStats.totalScore,\n      change: '+156 今天',\n      trend: 'up',\n      icon: 'M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.228a25.073 25.073 0 012.916.52 6.003 6.003 0 01-4.395 4.972m0 0a6.726 6.726 0 01-2.749 1.35m0 0A6.772 6.772 0 0112 15.75c-2.622 0-5.033-.732-7.2-2z',\n      color: 'from-emerald-500 to-emerald-600'\n    },\n    {\n      id: 'items',\n      title: '道具',\n      value: gameComputed.playerStats.totalItems,\n      change: '穩定',\n      trend: 'neutral',\n      icon: 'M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125',\n      color: 'from-purple-500 to-purple-600'\n    }\n  ];\n\n  const recentActivities = [\n    { time: '2分鐘前', action: '探索新區域', type: 'explore', icon: '🗺️' },\n    { time: '5分鐘前', action: '獲得成就獎勵', type: 'achievement', icon: '🏆' },\n    { time: '12分鐘前', action: '與AI助手對話', type: 'chat', icon: '💬' },\n    { time: '18分鐘前', action: '收集稀有道具', type: 'item', icon: '💎' }\n  ];\n\n  return (\n    <div class={`fixed top-6 right-6 w-96 transition-all duration-500 ease-out z-30 ${\n      props.isExpanded ? 'translate-x-0' : 'translate-x-80'\n    }`}>\n      <div class=\"card-elevated animate-slide-up\">\n        {/* Header */}\n        <div class=\"p-6 border-b border-neutral-200/50\">\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex items-center space-x-4\">\n              <div class=\"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-sm\">\n                <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                </svg>\n              </div>\n              <div>\n                <h3 class=\"text-heading-sm text-primary\">控制台</h3>\n                <p class=\"text-body-sm text-secondary\">即時數據監控</p>\n              </div>\n            </div>\n\n            <button\n              onClick={props.onToggle}\n              class=\"btn-ghost btn-icon group\"\n              title={props.isExpanded ? '收起面板' : '展開面板'}\n            >\n              <svg\n                class={`w-5 h-5 transition-transform duration-300 ${props.isExpanded ? 'rotate-45' : ''}`}\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M12 4v16m8-8H4\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <Show when={props.isExpanded}>\n          <div class=\"p-6 space-y-6 animate-fade-in\">\n            {/* Metric Cards Grid */}\n            <div>\n              <div class=\"flex items-center justify-between mb-4\">\n                <h4 class=\"text-heading-sm text-primary\">數據概覽</h4>\n                <div class=\"flex items-center space-x-1\">\n                  <div class=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse-subtle\"></div>\n                  <span class=\"text-body-sm text-secondary\">即時</span>\n                </div>\n              </div>\n\n              <div class=\"grid gap-4\">\n                <For each={metricCards}>\n                  {(metric) => (\n                    <div class=\"card-interactive p-4\">\n                      <div class=\"flex items-center justify-between\">\n                        <div class=\"flex-1\">\n                          <div class=\"flex items-center space-x-3 mb-2\">\n                            <div class={`w-10 h-10 bg-gradient-to-br ${metric.color} rounded-xl flex items-center justify-center shadow-sm`}>\n                              <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d={metric.icon} />\n                              </svg>\n                            </div>\n                            <div>\n                              <p class=\"text-body-sm text-secondary\">{metric.title}</p>\n                              <p class=\"text-heading-lg text-primary font-bold\">{metric.value}</p>\n                            </div>\n                          </div>\n                          <div class=\"flex items-center space-x-2\">\n                            {metric.trend === 'up' && (\n                              <svg class=\"w-4 h-4 text-emerald-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                              </svg>\n                            )}\n                            {metric.trend === 'down' && (\n                              <svg class=\"w-4 h-4 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6\" />\n                              </svg>\n                            )}\n                            <span class={`text-body-sm font-medium ${\n                              metric.trend === 'up' ? 'text-emerald-600' :\n                              metric.trend === 'down' ? 'text-red-600' :\n                              'text-secondary'\n                            }`}>\n                              {metric.change}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </For>\n              </div>\n            </div>\n\n            <div class=\"divider\"></div>\n\n            {/* System Status */}\n            <div>\n              <h4 class=\"text-heading-sm text-primary mb-4\">系統狀態</h4>\n              <div class=\"card p-4\">\n                <div class=\"flex items-center justify-between\">\n                  <div class=\"flex items-center space-x-3\">\n                    <div class=\"w-3 h-3 bg-emerald-500 rounded-full animate-pulse-subtle\"></div>\n                    <div>\n                      <p class=\"text-body-md text-primary font-medium\">運行中</p>\n                      <p class=\"text-body-sm text-secondary\">系統正常運作</p>\n                    </div>\n                  </div>\n                  <div class=\"text-right\">\n                    <p class=\"text-body-sm text-secondary\">連線品質</p>\n                    <div class=\"flex items-center space-x-1 mt-1\">\n                      <div class=\"w-1 h-4 bg-emerald-500 rounded-full\"></div>\n                      <div class=\"w-1 h-4 bg-emerald-500 rounded-full\"></div>\n                      <div class=\"w-1 h-4 bg-emerald-500 rounded-full\"></div>\n                      <div class=\"w-1 h-3 bg-emerald-500 rounded-full\"></div>\n                      <span class=\"text-body-sm text-primary font-medium ml-2\">優良</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"divider\"></div>\n\n            {/* Recent Activity */}\n            <div>\n              <h4 class=\"text-heading-sm text-primary mb-4\">最近活動</h4>\n              <div class=\"space-y-3\">\n                <For each={recentActivities}>\n                  {(activity) => (\n                    <div class=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-neutral-50/50 transition-colors\">\n                      <div class=\"text-2xl\">{activity.icon}</div>\n                      <div class=\"flex-1\">\n                        <p class=\"text-body-md text-primary font-medium\">{activity.action}</p>\n                        <p class=\"text-body-sm text-secondary\">{activity.time}</p>\n                      </div>\n                      <svg class=\"w-4 h-4 text-tertiary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 5l7 7-7 7\" />\n                      </svg>\n                    </div>\n                  )}\n                </For>\n              </div>\n            </div>\n          </div>\n        </Show>\n\n        {/* Collapsed State */}\n        <Show when={!props.isExpanded}>\n          <div class=\"p-4 flex items-center justify-center\">\n            <button\n              onClick={props.onToggle}\n              class=\"w-full btn-ghost text-center py-3 rounded-xl\"\n            >\n              <svg class=\"w-6 h-6 mx-auto text-secondary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </button>\n          </div>\n        </Show>\n      </div>\n    </div>\n  );\n};\n\nexport default GamePanel;","import { Component, createSignal, For, Show } from 'solid-js';\nimport type { ChatMessage } from '@/types';\n\ninterface ChatPanelProps {\n  onClose: () => void;\n}\n\nconst ChatPanel: Component<ChatPanelProps> = (props) => {\n  const [messages, setMessages] = createSignal<ChatMessage[]>([\n    {\n      id: '1',\n      sender: 'ai',\n      message: '您好！我是智能空間平台的AI助手，很高興為您服務！有什麼我可以幫助您的嗎？',\n      timestamp: Date.now() - 5000,\n    },\n  ]);\n\n  const [inputValue, setInputValue] = createSignal('');\n  const [isProcessing, setIsProcessing] = createSignal(false);\n\n  const handleSendMessage = async () => {\n    const message = inputValue().trim();\n    if (!message || isProcessing()) return;\n\n    // Add user message\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      sender: 'user',\n      message,\n      timestamp: Date.now(),\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    setIsProcessing(true);\n\n    try {\n      // Simulate AI response (replace with actual API call)\n      setTimeout(() => {\n        const aiResponse: ChatMessage = {\n          id: (Date.now() + 1).toString(),\n          sender: 'ai',\n          message: getQuickResponse(message) || '我正在思考您的問題...',\n          timestamp: Date.now(),\n        };\n\n        setMessages(prev => [...prev, aiResponse]);\n        setIsProcessing(false);\n      }, 1000);\n    } catch (error) {\n      console.error('Failed to send message:', error);\n      setIsProcessing(false);\n    }\n  };\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const getQuickResponse = (query: string): string | null => {\n    const lowerQuery = query.toLowerCase();\n\n    const quickResponses: Record<string, string> = {\n      '你好': '您好！我是智能空間平台的AI助手，很高興為您服務！有什麼我可以幫助您的嗎？',\n      '怎麼玩': '這是一個結合3D地圖和收集遊戲的平台！您可以：\\n• 在地圖上移動探索\\n• 收集散落的物品獲得分數\\n• 發現歷史景點聆聽介紹\\n• 使用語音控制與我對話',\n      '語音控制': '您可以使用以下語音指令：\\n• \"導航到...\" - 地圖導航\\n• \"收集附近物品\" - 自動收集\\n• \"介紹這個地方\" - 獲取景點資訊\\n• \"我的分數\" - 查看遊戲狀態',\n      '分數': '您可以透過以下方式獲得分數：\\n• 收集地圖上的物品（10-100分）\\n• 發現歷史景點（25分）\\n• 完成特殊任務',\n      '幫助': '我可以協助您：\\n• 🗺️ 地圖導航和位置查詢\\n• 🎮 遊戲規則和策略建議\\n• 🏛️ 歷史景點介紹和文化知識\\n• 🎤 語音控制指導\\n• 📊 遊戲統計和進度追蹤',\n    };\n\n    for (const [key, response] of Object.entries(quickResponses)) {\n      if (lowerQuery.includes(key)) {\n        return response;\n      }\n    }\n\n    return null;\n  };\n\n  const formatTime = (timestamp: number): string => {\n    return new Date(timestamp).toLocaleTimeString('zh-TW', {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div class=\"absolute top-5 left-5 w-96 max-w-[90vw] h-[500px] bg-gradient-to-br from-white/95 via-slate-50/95 to-gray-100/95 backdrop-blur-md rounded-2xl shadow-2xl border border-white/50 z-10 flex flex-col overflow-hidden\">\n      {/* Decorative Elements */}\n      <div class=\"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-blue-500/5 to-purple-500/5 rounded-2xl\"></div>\n      <div class=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 via-blue-500 to-purple-600 rounded-t-2xl\"></div>\n\n      {/* Panel Header */}\n      <div class=\"relative p-4 border-b border-gradient-to-r from-gray-200/50 to-gray-300/50 bg-gradient-to-r from-emerald-50/80 via-teal-50/80 to-blue-50/80 rounded-t-2xl\">\n        <div class=\"flex justify-between items-center\">\n          <div class=\"flex items-center gap-3\">\n            <div class=\"relative\">\n              <div class=\"w-10 h-10 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-xl flex items-center justify-center shadow-lg\">\n                <span class=\"text-white text-lg\">🤖</span>\n              </div>\n              <div class=\"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm\">\n                <div class=\"w-full h-full bg-white rounded-full flex items-center justify-center\">\n                  <div class=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                </div>\n              </div>\n            </div>\n            <div>\n              <h3 class=\"font-bold text-gray-800 text-lg\">AI 智能助手</h3>\n              <p class=\"text-xs text-gray-500 font-medium\">隨時為您服務</p>\n            </div>\n          </div>\n          <button\n            onClick={props.onClose}\n            class=\"group relative w-8 h-8 bg-gradient-to-br from-red-100 to-red-200 hover:from-red-200 hover:to-red-300 text-red-600 hover:text-red-700 transition-all duration-300 rounded-lg shadow-sm hover:shadow-md active:scale-95\"\n          >\n            <span class=\"text-lg font-bold transition-transform duration-300 group-hover:scale-110\">×</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Messages Area */}\n      <div class=\"relative flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\n        <For each={messages()}>\n          {(message) => (\n            <div class={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'} animate-fadeIn`}>\n              <div class={`relative group max-w-[85%] ${message.sender === 'user' ? 'order-1' : 'order-2'}`}>\n                {message.sender === 'ai' && (\n                  <div class=\"absolute -left-3 top-0 w-6 h-6 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full flex items-center justify-center shadow-sm\">\n                    <span class=\"text-white text-xs\">🤖</span>\n                  </div>\n                )}\n                <div\n                  class={`relative p-4 shadow-lg transition-all duration-300 group-hover:shadow-xl ${\n                    message.sender === 'user'\n                      ? 'bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-2xl rounded-br-md ml-3'\n                      : 'bg-gradient-to-br from-white to-gray-50 text-gray-800 rounded-2xl rounded-bl-md border border-gray-200/50 ml-3'\n                  }`}\n                >\n                  <div class=\"whitespace-pre-wrap break-words text-sm leading-relaxed\">\n                    {message.message}\n                  </div>\n                  <div class={`text-xs mt-2 flex justify-end ${\n                    message.sender === 'user'\n                      ? 'text-indigo-100/80'\n                      : 'text-gray-400'\n                  }`}>\n                    {formatTime(message.timestamp)}\n                  </div>\n\n                  {/* Message tail */}\n                  <div class={`absolute ${\n                    message.sender === 'user'\n                      ? 'bottom-2 -right-2 w-4 h-4 bg-gradient-to-br from-indigo-500 to-purple-600 transform rotate-45'\n                      : 'bottom-2 -left-2 w-4 h-4 bg-gradient-to-br from-white to-gray-50 border-l border-b border-gray-200/50 transform rotate-45'\n                  }`}></div>\n                </div>\n              </div>\n            </div>\n          )}\n        </For>\n\n        <Show when={isProcessing()}>\n          <div class=\"flex justify-start animate-fadeIn\">\n            <div class=\"relative ml-3\">\n              <div class=\"absolute -left-3 top-0 w-6 h-6 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full flex items-center justify-center shadow-sm\">\n                <span class=\"text-white text-xs\">🤖</span>\n              </div>\n              <div class=\"bg-gradient-to-br from-white to-gray-50 text-gray-800 rounded-2xl rounded-bl-md p-4 max-w-[85%] shadow-lg border border-gray-200/50\">\n                <div class=\"flex items-center gap-3\">\n                  <div class=\"flex space-x-1\">\n                    <div class=\"w-2 h-2 bg-gradient-to-r from-emerald-400 to-teal-500 rounded-full animate-bounce\"></div>\n                    <div class=\"w-2 h-2 bg-gradient-to-r from-emerald-400 to-teal-500 rounded-full animate-bounce\" style=\"animation-delay: 0.1s\"></div>\n                    <div class=\"w-2 h-2 bg-gradient-to-r from-emerald-400 to-teal-500 rounded-full animate-bounce\" style=\"animation-delay: 0.2s\"></div>\n                  </div>\n                  <span class=\"text-sm text-gray-600 font-medium\">AI 正在思考...</span>\n                </div>\n                <div class=\"absolute bottom-2 -left-2 w-4 h-4 bg-gradient-to-br from-white to-gray-50 border-l border-b border-gray-200/50 transform rotate-45\"></div>\n              </div>\n            </div>\n          </div>\n        </Show>\n      </div>\n\n      {/* Input Area */}\n      <div class=\"relative p-4 border-t border-gray-200/50 bg-gradient-to-r from-gray-50/90 via-white/90 to-gray-50/90 backdrop-blur-sm rounded-b-2xl\">\n        <div class=\"relative flex gap-3\">\n          <div class=\"flex-1 relative\">\n            <textarea\n              value={inputValue()}\n              onInput={(e) => setInputValue(e.currentTarget.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"輸入訊息或語音指令...\"\n              class=\"w-full px-4 py-3 pr-12 border-2 border-gray-200/50 bg-white/80 backdrop-blur-sm rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-400/50 transition-all duration-300 shadow-sm hover:shadow-md text-sm leading-relaxed\"\n              rows=\"1\"\n              disabled={isProcessing()}\n            />\n            <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400\">\n              <span class=\"text-xs\">💬</span>\n            </div>\n          </div>\n          <button\n            onClick={handleSendMessage}\n            disabled={!inputValue().trim() || isProcessing()}\n            class=\"group relative px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl disabled:shadow-sm active:scale-95 font-medium text-sm\"\n          >\n            <div class=\"flex items-center gap-2\">\n              <span class={`transition-transform duration-300 ${isProcessing() ? 'animate-spin' : 'group-hover:scale-110'}`}>\n                {isProcessing() ? '⏳' : '📤'}\n              </span>\n              <span class=\"hidden sm:inline\">\n                {isProcessing() ? '發送中' : '發送'}\n              </span>\n            </div>\n            <div class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 disabled:opacity-0 transition-opacity duration-300\"></div>\n          </button>\n        </div>\n\n        {/* Input hints */}\n        <div class=\"mt-2 flex flex-wrap gap-2\">\n          {['你好', '怎麼玩', '幫助'].map(hint => (\n            <button\n              onClick={() => setInputValue(hint)}\n              class=\"px-3 py-1.5 text-xs bg-gradient-to-r from-gray-100 to-gray-200 hover:from-emerald-100 hover:to-teal-100 text-gray-600 hover:text-emerald-700 rounded-full transition-all duration-200 border border-gray-200/50 hover:border-emerald-300/50 hover:shadow-sm\"\n              disabled={isProcessing()}\n            >\n              {hint}\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatPanel;","import { Component, createSignal, Show } from 'solid-js';\n\ninterface VoicePanelProps {\n  onClose: () => void;\n}\n\nconst VoicePanel: Component<VoicePanelProps> = (props) => {\n  const [isRecording, setIsRecording] = createSignal(false);\n  const [status, setStatus] = createSignal('準備就緒');\n  const [isSupported] = createSignal(typeof window !== 'undefined' && ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window));\n\n  const handleToggleRecording = () => {\n    if (isRecording()) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  };\n\n  const startRecording = () => {\n    // Voice processing is handled by external service\n    setIsRecording(true);\n    setStatus('連接外部語音處理服務中...');\n\n    // Simulate connection to external voice service\n    setTimeout(() => {\n      setStatus('語音處理由外部專案處理');\n      setIsRecording(false);\n    }, 2000);\n  };\n\n  const stopRecording = () => {\n    setIsRecording(false);\n    setStatus('準備就緒');\n  };\n\n  const processVoiceCommand = (transcript: string) => {\n    console.log('Voice command:', transcript);\n\n    // Simple command processing\n    const lowerText = transcript.toLowerCase();\n\n    if (lowerText.includes('導航') || lowerText.includes('前往')) {\n      setStatus('正在處理導航指令...');\n    } else if (lowerText.includes('收集') || lowerText.includes('撿起')) {\n      setStatus('正在搜尋附近物品...');\n    } else if (lowerText.includes('介紹') || lowerText.includes('說明')) {\n      setStatus('正在取得地點資訊...');\n    } else if (lowerText.includes('分數') || lowerText.includes('狀態')) {\n      setStatus('正在顯示遊戲狀態...');\n    } else {\n      setStatus('正在與AI助手對話...');\n    }\n\n    // Clear status after 3 seconds\n    setTimeout(() => {\n      setStatus('準備就緒');\n    }, 3000);\n  };\n\n  return (\n    <div class=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50\">\n      <div class=\"bg-white rounded-2xl shadow-2xl p-6 w-96 max-w-[90vw] mx-4\">\n        {/* Panel Header */}\n        <div class=\"flex justify-between items-center mb-6\">\n          <h3 class=\"text-xl font-semibold text-gray-800 flex items-center gap-2\">\n            <span class=\"text-2xl\">🎤</span>\n            語音控制\n          </h3>\n          <button\n            onClick={props.onClose}\n            class=\"text-gray-500 hover:text-gray-700 transition-colors p-1 rounded-lg hover:bg-gray-100\"\n          >\n            <span class=\"text-xl\">×</span>\n          </button>\n        </div>\n\n        {/* Voice Status */}\n        <div class=\"mb-6\">\n          <div class={`\n            p-4 rounded-lg text-center font-medium transition-colors\n            ${isRecording()\n              ? 'bg-red-100 text-red-700 animate-pulse'\n              : 'bg-green-100 text-green-700'\n            }\n          `}>\n            {status()}\n          </div>\n        </div>\n\n        {/* Recording Button */}\n        <div class=\"text-center mb-6\">\n          <Show\n            when={isSupported()}\n            fallback={\n              <div class=\"text-red-600 text-center\">\n                此瀏覽器不支援語音識別功能\n              </div>\n            }\n          >\n            <button\n              onClick={handleToggleRecording}\n              class={`\n                w-20 h-20 rounded-full text-white text-2xl font-bold transition-all duration-200 shadow-lg\n                ${isRecording()\n                  ? 'bg-red-500 hover:bg-red-600 animate-pulse scale-110'\n                  : 'bg-red-500 hover:bg-red-600 hover:scale-105'\n                }\n              `}\n            >\n              {isRecording() ? '⏹️' : '🎤'}\n            </button>\n            <div class=\"mt-2 text-sm text-gray-600\">\n              {isRecording() ? '點擊停止錄音' : '點擊開始錄音'}\n            </div>\n          </Show>\n        </div>\n\n        {/* Voice Commands Help */}\n        <div class=\"bg-gray-50 rounded-lg p-4\">\n          <h4 class=\"font-medium text-gray-800 mb-3 flex items-center gap-2\">\n            <span class=\"text-blue-500\">💡</span>\n            語音指令範例\n          </h4>\n          <ul class=\"space-y-2 text-sm text-gray-600\">\n            <li class=\"flex items-start gap-2\">\n              <span class=\"text-blue-500\">▸</span>\n              \"導航到最近的歷史景點\"\n            </li>\n            <li class=\"flex items-start gap-2\">\n              <span class=\"text-blue-500\">▸</span>\n              \"收集附近的物品\"\n            </li>\n            <li class=\"flex items-start gap-2\">\n              <span class=\"text-blue-500\">▸</span>\n              \"介紹這個地方\"\n            </li>\n            <li class=\"flex items-start gap-2\">\n              <span class=\"text-blue-500\">▸</span>\n              \"顯示我的遊戲統計\"\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VoicePanel;","import { Component, Show } from 'solid-js';\nimport type { HistoricalSite } from '@/types';\n\ninterface HistoricalSitePanelProps {\n  site: HistoricalSite;\n  onClose: () => void;\n}\n\nconst HistoricalSitePanel: Component<HistoricalSitePanelProps> = (props) => {\n  const handlePlayAudio = () => {\n    // Implement audio playback functionality\n    console.log('Playing audio guide for:', props.site.name);\n\n    // For now, just show a notification\n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(\n        `歡迎來到 ${props.site.name}。${props.site.description}`\n      );\n      utterance.lang = 'zh-TW';\n      speechSynthesis.speak(utterance);\n    }\n  };\n\n  return (\n    <div class=\"absolute bottom-5 left-5 w-[400px] max-w-[90vw] bg-white/95 backdrop-blur-sm rounded-xl shadow-lg z-10\">\n      {/* Panel Header */}\n      <div class=\"p-4 border-b border-gray-200 flex justify-between items-center bg-gradient-to-r from-purple-50 to-indigo-50 rounded-t-xl\">\n        <h3 class=\"font-semibold text-gray-800 flex items-center gap-2\">\n          <span class=\"text-lg\">🏛️</span>\n          {props.site.name}\n        </h3>\n        <button\n          onClick={props.onClose}\n          class=\"text-gray-600 hover:text-gray-800 transition-colors p-1 rounded hover:bg-gray-100\"\n        >\n          <span class=\"text-lg\">×</span>\n        </button>\n      </div>\n\n      {/* Panel Content */}\n      <div class=\"p-4 space-y-4\">\n        {/* Site Description */}\n        <div>\n          <p class=\"text-gray-700 leading-relaxed\">\n            {props.site.description}\n          </p>\n        </div>\n\n        {/* Site Era */}\n        <div class=\"flex items-center gap-2 text-sm\">\n          <span class=\"font-medium text-gray-600\">歷史年代:</span>\n          <span class=\"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full font-medium\">\n            {props.site.era}\n          </span>\n        </div>\n\n        {/* Visit Count */}\n        <div class=\"flex items-center gap-2 text-sm text-gray-600\">\n          <span>👥 參觀人次:</span>\n          <span class=\"font-medium\">{props.site.visitCount.toLocaleString()}</span>\n        </div>\n\n        {/* Address */}\n        <Show when={props.site.address}>\n          <div class=\"flex items-start gap-2 text-sm text-gray-600\">\n            <span class=\"mt-0.5\">📍</span>\n            <span>{props.site.address}</span>\n          </div>\n        </Show>\n\n        {/* AI Introduction */}\n        <Show when={props.site.aiIntroduction}>\n          <div class=\"bg-gradient-to-r from-blue-50 to-purple-50 p-3 rounded-lg border-l-4 border-l-indigo-500\">\n            <div class=\"flex items-center gap-2 mb-2\">\n              <span class=\"text-indigo-500\">🤖</span>\n              <span class=\"font-medium text-indigo-700\">AI 導覽介紹</span>\n            </div>\n            <p class=\"text-gray-700 leading-relaxed\">\n              {props.site.aiIntroduction}\n            </p>\n          </div>\n        </Show>\n\n        {/* Action Buttons */}\n        <div class=\"flex gap-2 pt-2\">\n          <button\n            onClick={handlePlayAudio}\n            class=\"flex items-center gap-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\n          >\n            <span>🔊</span>\n            <span class=\"text-sm font-medium\">播放語音介紹</span>\n          </button>\n\n          <Show when={props.site.images && props.site.images.length > 0}>\n            <button\n              class=\"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors\"\n            >\n              <span>🖼️</span>\n              <span class=\"text-sm font-medium\">查看圖片</span>\n            </button>\n          </Show>\n        </div>\n\n        {/* Coordinates */}\n        <div class=\"pt-2 border-t border-gray-200\">\n          <div class=\"text-xs text-gray-500 space-y-1\">\n            <div>緯度: {props.site.latitude.toFixed(6)}</div>\n            <div>經度: {props.site.longitude.toFixed(6)}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HistoricalSitePanel;","import { Component } from 'solid-js';\n\ninterface LoadingOverlayProps {\n  message?: string;\n}\n\nconst LoadingOverlay: Component<LoadingOverlayProps> = (props) => {\n  return (\n    <div class=\"fixed inset-0 bg-white/90 backdrop-blur-sm flex flex-col justify-center items-center z-[9999]\">\n      {/* Loading Spinner */}\n      <div class=\"relative mb-4\">\n        <div class=\"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin\"></div>\n        <div class=\"absolute inset-0 flex items-center justify-center\">\n          <span class=\"text-2xl\">🌍</span>\n        </div>\n      </div>\n\n      {/* Loading Message */}\n      <div class=\"text-lg font-medium text-indigo-600 mb-2\">\n        {props.message || '載入中...'}\n      </div>\n\n      <div class=\"text-sm text-gray-600\">\n        正在初始化智能空間平台\n      </div>\n    </div>\n  );\n};\n\nexport default LoadingOverlay;","import { Component, onMount, createSignal, Show } from 'solid-js';\nimport { createStore } from 'solid-js/store';\nimport Header from '@/components/Header';\nimport CesiumMap from '@/components/CesiumMap';\nimport GamePanel from '@/components/GamePanel';\nimport ChatPanel from '@/components/ChatPanel';\nimport VoicePanel from '@/components/VoicePanel';\nimport HistoricalSitePanel from '@/components/HistoricalSitePanel';\nimport LoadingOverlay from '@/components/LoadingOverlay';\nimport { gameActions } from '@/stores/gameStore';\nimport type { UIState, HistoricalSite } from '@/types';\nimport '@/styles/animations.css';\n\nconst App: Component = () => {\n  // UI state management\n  const [uiState, setUiState] = createStore<UIState>({\n    isVoicePanelOpen: false,\n    isChatPanelOpen: false,\n    isGamePanelExpanded: true,\n    isSiteInfoPanelOpen: false,\n    isLoading: true,\n    currentHistoricalSite: undefined,\n  });\n\n  const [userId] = createSignal(generateUserId());\n\n  onMount(async () => {\n    try {\n      // Initialize the game system\n      await gameActions.initializeGame(userId());\n\n      setUiState('isLoading', false);\n      console.log('🚀 Intelligent Spatial Platform initialized successfully');\n    } catch (error) {\n      console.error('Failed to initialize application:', error);\n      setUiState('isLoading', false);\n    }\n  });\n\n  // UI event handlers\n  const handleToggleVoicePanel = () => {\n    setUiState('isVoicePanelOpen', !uiState.isVoicePanelOpen);\n  };\n\n  const handleToggleChatPanel = () => {\n    setUiState('isChatPanelOpen', !uiState.isChatPanelOpen);\n  };\n\n  const handleToggleGamePanel = () => {\n    setUiState('isGamePanelExpanded', !uiState.isGamePanelExpanded);\n  };\n\n  const handleShowHistoricalSite = (site: HistoricalSite) => {\n    setUiState('currentHistoricalSite', site);\n    setUiState('isSiteInfoPanelOpen', true);\n  };\n\n  const handleCloseHistoricalSite = () => {\n    setUiState('isSiteInfoPanelOpen', false);\n    setUiState('currentHistoricalSite', undefined);\n  };\n\n  const handlePlayerMove = (latitude: number, longitude: number) => {\n    gameActions.updatePlayerPosition(latitude, longitude);\n  };\n\n  function generateUserId(): string {\n    return 'user_' + Math.random().toString(36).substring(2) + Date.now().toString(36);\n  }\n\n  return (\n    <div class=\"min-h-screen bg-neutral-50 flex flex-col relative overflow-hidden animate-fade-in\">\n      {/* Modern Background System */}\n      <div class=\"absolute inset-0 pointer-events-none\">\n        {/* Primary gradient background */}\n        <div class=\"absolute inset-0 bg-gradient-to-br from-slate-50 via-white to-blue-50/30\"></div>\n\n        {/* Subtle geometric overlay */}\n        <div\n          class=\"absolute inset-0 opacity-[0.02]\"\n          style=\"background-image: radial-gradient(circle at 2px 2px, rgb(var(--color-neutral-400)) 1px, transparent 0); background-size: 40px 40px;\"\n        ></div>\n\n        {/* Ambient light effects */}\n        <div class=\"absolute top-0 left-1/4 w-96 h-96 bg-blue-400/[0.05] rounded-full blur-3xl animate-pulse-subtle\"></div>\n        <div class=\"absolute bottom-0 right-1/4 w-80 h-80 bg-purple-400/[0.05] rounded-full blur-3xl animate-pulse-subtle\" style=\"animation-delay: 1s;\"></div>\n\n        {/* Noise texture overlay */}\n        <div class=\"absolute inset-0 opacity-[0.015] bg-gradient-to-tr from-transparent via-neutral-500/10 to-transparent\"></div>\n      </div>\n\n      {/* Header Navigation */}\n      <Header\n        onToggleVoice={handleToggleVoicePanel}\n        onToggleChat={handleToggleChatPanel}\n      />\n\n      {/* Main Application Container */}\n      <main class=\"flex-1 relative\" style=\"height: calc(100vh - 65px);\">\n        {/* Primary Content Area */}\n        <div class=\"relative w-full h-full\" style=\"height: 100%;\">\n          {/* Map Interface */}\n          <div class=\"absolute inset-0 w-full h-full\" style=\"height: 100%;\">\n            <CesiumMap\n              onPlayerMove={handlePlayerMove}\n              onHistoricalSiteClick={handleShowHistoricalSite}\n            />\n          </div>\n\n          {/* Overlay panels and UI elements */}\n          <div class=\"absolute inset-0 pointer-events-none\">\n            {/* Game Panel */}\n            <div class=\"pointer-events-auto\">\n              <GamePanel\n                isExpanded={uiState.isGamePanelExpanded}\n                onToggle={handleToggleGamePanel}\n              />\n            </div>\n\n            {/* Floating Action Button (Mobile) */}\n            <div class=\"lg:hidden fixed bottom-6 right-6 z-40 pointer-events-auto\">\n              <button\n                onClick={handleToggleGamePanel}\n                class=\"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full shadow-xl flex items-center justify-center text-white animate-scale-in\"\n              >\n                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Modal Panels */}\n        <div class=\"fixed inset-0 pointer-events-none z-50\">\n          {/* Chat Panel */}\n          <Show when={uiState.isChatPanelOpen}>\n            <div class=\"pointer-events-auto\">\n              <ChatPanel\n                onClose={() => setUiState('isChatPanelOpen', false)}\n              />\n            </div>\n          </Show>\n\n          {/* Voice Panel */}\n          <Show when={uiState.isVoicePanelOpen}>\n            <div class=\"pointer-events-auto\">\n              <VoicePanel\n                onClose={() => setUiState('isVoicePanelOpen', false)}\n              />\n            </div>\n          </Show>\n\n          {/* Historical Site Panel */}\n          <Show when={uiState.isSiteInfoPanelOpen && uiState.currentHistoricalSite}>\n            <div class=\"pointer-events-auto\">\n              <HistoricalSitePanel\n                site={uiState.currentHistoricalSite!}\n                onClose={handleCloseHistoricalSite}\n              />\n            </div>\n          </Show>\n        </div>\n      </main>\n\n      {/* Global Loading Overlay */}\n      <Show when={uiState.isLoading}>\n        <div class=\"fixed inset-0 z-[100] pointer-events-auto\">\n          <LoadingOverlay message=\"載入智能空間平台...\" />\n        </div>\n      </Show>\n\n      {/* Status Bar (Mobile) */}\n      <div class=\"lg:hidden fixed bottom-0 left-0 right-0 bg-glass border-t border-neutral-200/50 p-4 z-30\">\n        <div class=\"flex items-center justify-between\">\n          <div class=\"flex items-center space-x-3\">\n            <div class=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse-subtle\"></div>\n            <span class=\"text-body-sm text-primary font-medium\">系統運行中</span>\n          </div>\n          <div class=\"flex items-center space-x-2\">\n            <button\n              onClick={handleToggleVoicePanel}\n              class=\"btn-ghost btn-icon\"\n            >\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z\" />\n              </svg>\n            </button>\n            <button\n              onClick={handleToggleChatPanel}\n              class=\"btn-primary btn-icon\"\n            >\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;","/* @refresh reload */\nimport { render } from 'solid-js/web';\nimport './index.css';\nimport App from './App';\n\nconst root = document.getElementById('root');\n\nif (import.meta.env.DEV && !(root instanceof HTMLElement)) {\n  throw new Error(\n    'Root element not found. Did you forget to add it to your index.html? Or maybe the id attribute got misspelled?',\n  );\n}\n\nrender(() => <App />, root!);"],"names":["IS_DEV","equalFn","a","b","$PROXY","$TRACK","signalOptions","runEffects","runQueue","STALE","PENDING","UNOWNED","Owner","Transition","ExternalSourceConfig","Listener","Updates","Effects","ExecCount","createRoot","fn","detachedOwner","listener","owner","unowned","current","root","updateFn","untrack","cleanNode","runUpdates","createSignal","value","options","s","setter","writeSignal","readSignal","createRenderEffect","c","createComputation","updateComputation","createEffect","runUserEffects","createMemo","batch","onMount","onCleanup","getListener","updates","lookUpstream","sSlot","node","isComp","i","o","TransitionRunning","markDownstream","time","runComputation","nextValue","err","handleError","init","pure","state","runTop","ancestors","wait","res","completeUpdates","e","queue","userLength","ignore","source","index","obs","castError","FALLBACK","dispose","d","mapArray","list","mapFn","items","mapped","disposers","len","indexes","newItems","newLen","j","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","start","end","newEnd","item","disposer","mapper","set","createComponent","Comp","props","narrowedError","name","For","fallback","Show","keyed","conditionValue","condition","child","memo","reconcileArrays","parentNode","bLength","aEnd","bEnd","aStart","bStart","after","map","sequence","t","$$EVENTS","render","code","element","insert","template","html","isImportNode","isSVG","isMathML","create","delegateEvents","eventNames","document","eventHandler","setAttribute","className","addEventListener","handler","delegate","use","arg","parent","accessor","marker","initial","insertExpression","key","oriTarget","oriCurrentTarget","retarget","handleNode","data","walkUpTree","path","unwrapArray","multi","cleanChildren","v","array","currentArray","normalizeIncomingArray","appendNodes","normalized","unwrap","dynamic","prev","replacement","inserted","el","isParent","$RAW","$NODE","$HAS","$SELF","wrap$1","p","proxyTraps$1","keys","desc","l","prop","isWrappable","obj","proto","result","unwrapped","getNodes","target","symbol","nodes","getNode","property","proxyDescriptor$1","trackSelf","ownKeys","receiver","tracked","setProperty","deleting","mergeStoreNode","updateArray","next","updatePath","traversed","part","partType","isArray","from","to","by","createStore","store","unwrappedStore","wrappedStore","setStore","args","CONFIG","gameState","setGameState","isLoading","setIsLoading","lastActivity","setLastActivity","gameActions","playerId","loadPlayerStats","startGameSession","error","latitude","longitude","response","handleHistoricalSiteEncounter","itemId","playerLat","playerLng","newLevel","calculateLevel","addActivity","points","reason","currentScore","player","createNewPlayer","createDefaultPlayer","defaultPlayer","score","site","aiIntroduction","message","timestamp","gameComputed","Header","activeTab","setActiveTab","navigationTabs","id","label","icon","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","_el$5","nextSibling","_el$6","_el$7","_el$8","_el$9","_el$0","_el$1","_el$10","_$insert","_el$11","_tmpl$2","_el$12","_el$13","_el$14","$$click","tab","_$effect","_p$","_v$","_v$2","_$className","_$setAttribute","undefined","_$addEventListener","onToggleVoice","onToggleChat","playerStats","totalScore","_$delegateEvents","CesiumMap","mapContainer","viewer","playerPosition","setPlayerPosition","console","log","Cesium","defaultAccessToken","cesium","accessToken","terrain","fromWorldTerrain","baseLayerPicker","geocoder","homeButton","sceneModePicker","navigationHelpButton","animation","timeline","fullscreenButton","vrButton","scene3DOnly","window","cesiumViewer","scene","globe","show","skyBox","backgroundColor","DARKSLATEGRAY","enableLighting","fog","enabled","skyAtmosphere","camera","setView","destination","fromDegrees","defaultView","height","cesiumWidget","screenSpaceEventHandler","setInputAction","event","pickedPosition","pickEllipsoid","position","ellipsoid","cartographic","fromCartesian","toDegrees","onPlayerMove","LEFT_CLICK","destroy","_ref$","_$use","_c$","_$memo","toFixed","GamePanel","metricCards","title","currentPlayer","level","change","trend","color","totalItems","recentActivities","action","type","_tmpl$3","onToggle","_$createComponent","when","isExpanded","children","_el$15","each","_el$18","_tmpl$4","_el$19","_el$20","_el$21","_el$22","_el$23","_el$24","_el$25","_el$26","_el$27","_el$28","_el$29","metric","_tmpl$5","_c$2","_tmpl$6","_v$4","_v$5","_v$6","_el$32","_tmpl$7","_el$33","_el$34","_el$35","_el$36","activity","_el$16","_el$17","_v$3","ChatPanel","messages","setMessages","sender","Date","now","inputValue","setInputValue","isProcessing","setIsProcessing","handleSendMessage","trim","userMessage","toString","setTimeout","aiResponse","getQuickResponse","handleKeyPress","shiftKey","preventDefault","query","lowerQuery","toLowerCase","quickResponses","Object","entries","includes","formatTime","toLocaleTimeString","hour","minute","onClose","_v$7","_v$8","$$input","currentTarget","hint","disabled","VoicePanel","isRecording","setIsRecording","status","setStatus","isSupported","handleToggleRecording","stopRecording","startRecording","HistoricalSitePanel","handlePlayAudio","utterance","SpeechSynthesisUtterance","description","lang","speechSynthesis","speak","era","visitCount","toLocaleString","address","images","length","LoadingOverlay","App","uiState","setUiState","isVoicePanelOpen","isChatPanelOpen","isGamePanelExpanded","isSiteInfoPanelOpen","currentHistoricalSite","userId","generateUserId","initializeGame","handleToggleVoicePanel","handleToggleChatPanel","handleToggleGamePanel","handleShowHistoricalSite","handleCloseHistoricalSite","handlePlayerMove","updatePlayerPosition","Math","random","substring","onHistoricalSiteClick","getElementById"],"mappings":"wyBAiJA,MAAMA,GAAS,GACTC,GAAU,CAACC,EAAGC,IAAMD,IAAMC,EAC1BC,EAAS,OAAO,aAAa,EAE7BC,GAAS,OAAO,aAAa,EAE7BC,GAAgB,CACpB,OAAQL,EACV,EAEA,IAAIM,GAAaC,GACjB,MAAMC,EAAQ,EACRC,GAAU,EACVC,GAAU,CACd,MAAO,KACP,SAAU,KACV,QAAS,KACT,MAAO,IACT,EAEA,IAAIC,EAAQ,KACZ,IAAIC,GAAa,KAEbC,GAAuB,KACvBC,EAAW,KACXC,EAAU,KACVC,EAAU,KACVC,GAAY,EAChB,SAASC,GAAWC,EAAIC,EAAe,CACrC,MAAMC,EAAWP,EACfQ,EAAQX,EACRY,EAAUJ,EAAG,SAAW,EACxBK,EAAUJ,IAAkB,OAAYE,EAAQF,EAChDK,EAAOF,EAAUb,GAAU,CACzB,MAAO,KACP,SAAU,KACV,QAASc,EAAUA,EAAQ,QAAU,KACrC,MAAOA,CACb,EACIE,EAAWH,EAAUJ,EAAK,IAAMA,EAAG,IAAMQ,EAAQ,IAAMC,GAAUH,CAAI,CAAC,CAAC,EACzEd,EAAQc,EACRX,EAAW,KACX,GAAI,CACF,OAAOe,GAAWH,EAAU,EAAI,CAClC,QAAC,CACCZ,EAAWO,EACXV,EAAQW,CACV,CACF,CACA,SAASQ,EAAaC,EAAOC,EAAS,CACpCA,EAAUA,EAAU,OAAO,OAAO,CAAA,EAAI3B,GAAe2B,CAAO,EAAI3B,GAChE,MAAM4B,EAAI,CACR,MAAAF,EACA,UAAW,KACX,cAAe,KACf,WAAYC,EAAQ,QAAU,MAClC,EACQE,EAASH,IACT,OAAOA,GAAU,aAC6EA,EAAQA,EAAME,EAAE,KAAK,GAEhHE,GAAYF,EAAGF,CAAK,GAE7B,MAAO,CAACK,GAAW,KAAKH,CAAC,EAAGC,CAAM,CACpC,CAKA,SAASG,EAAmBlB,EAAIY,EAAOC,EAAS,CAC9C,MAAMM,EAAIC,GAAkBpB,EAAIY,EAAO,GAAOvB,CAAK,EACqBgC,GAAkBF,CAAC,CAC7F,CACA,SAASG,GAAatB,EAAIY,EAAOC,EAAS,CACxC1B,GAAaoC,GACR,MAACJ,EAAIC,GAAkBpB,EAAIY,EAAO,GAAOvB,CAAK,EAGlB8B,EAAE,KAAO,GAC1CtB,EAAUA,EAAQ,KAAKsB,CAAC,EAAIE,GAAkBF,CAAC,CACjD,CAeA,SAASK,GAAWxB,EAAIY,EAAOC,EAAS,CACtCA,EAAUA,EAAU,OAAO,OAAO,CAAA,EAAI3B,GAAe2B,CAAO,EAAI3B,GAChE,MAAMiC,EAAIC,GAAkBpB,EAAIY,EAAO,GAAM,CAAC,EAC9C,OAAAO,EAAE,UAAY,KACdA,EAAE,cAAgB,KAClBA,EAAE,WAAaN,EAAQ,QAAU,OAI1BQ,GAAkBF,CAAC,EACnBF,GAAW,KAAKE,CAAC,CAC1B,CA+LA,SAASM,GAAMzB,EAAI,CACjB,OAAOU,GAAWV,EAAI,EAAK,CAC7B,CACA,SAASQ,EAAQR,EAAI,CACnB,GAA6BL,IAAa,KAAM,OAAOK,EAAE,EACzD,MAAME,EAAWP,EACjBA,EAAW,KACX,GAAI,CAEF,OAAOK,EAAE,CACX,QAAC,CACCL,EAAWO,CACb,CACF,CAoBA,SAASwB,GAAQ1B,EAAI,CACnBsB,GAAa,IAAMd,EAAQR,CAAE,CAAC,CAChC,CACA,SAAS2B,GAAU3B,EAAI,CACrB,OAAIR,IAAU,OAAgBA,EAAM,WAAa,KAAMA,EAAM,SAAW,CAACQ,CAAE,EAAOR,EAAM,SAAS,KAAKQ,CAAE,GACjGA,CACT,CAiBA,SAAS4B,IAAc,CACrB,OAAOjC,CACT,CA6GA,SAASsB,IAAa,CAEpB,GAAI,KAAK,SAA8C,KAAK,MAC1D,GAAuC,KAAK,QAAW5B,EAAOgC,GAAkB,IAAI,MAAO,CACzF,MAAMQ,EAAUjC,EAChBA,EAAU,KACVc,GAAW,IAAMoB,GAAa,IAAI,EAAG,EAAK,EAC1ClC,EAAUiC,CACZ,CAEF,GAAIlC,EAAU,CACZ,MAAMoC,EAAQ,KAAK,UAAY,KAAK,UAAU,OAAS,EAClDpC,EAAS,SAIZA,EAAS,QAAQ,KAAK,IAAI,EAC1BA,EAAS,YAAY,KAAKoC,CAAK,IAJ/BpC,EAAS,QAAU,CAAC,IAAI,EACxBA,EAAS,YAAc,CAACoC,CAAK,GAK1B,KAAK,WAIR,KAAK,UAAU,KAAKpC,CAAQ,EAC5B,KAAK,cAAc,KAAKA,EAAS,QAAQ,OAAS,CAAC,IAJnD,KAAK,UAAY,CAACA,CAAQ,EAC1B,KAAK,cAAgB,CAACA,EAAS,QAAQ,OAAS,CAAC,EAKrD,CAEA,OAAO,KAAK,KACd,CACA,SAASqB,GAAYgB,EAAMpB,EAAOqB,EAAQ,CACxC,IAAI5B,EAA2F2B,EAAK,MACpG,OAAI,CAACA,EAAK,YAAc,CAACA,EAAK,WAAW3B,EAASO,CAAK,KAQ9CoB,EAAK,MAAQpB,EAChBoB,EAAK,WAAaA,EAAK,UAAU,QACnCtB,GAAW,IAAM,CACf,QAASwB,EAAI,EAAGA,EAAIF,EAAK,UAAU,OAAQE,GAAK,EAAG,CACjD,MAAMC,EAAIH,EAAK,UAAUE,CAAC,EACpBE,EAAoB3C,IAAcA,GAAW,QAC/C2C,GAAqB3C,GAAW,SAAS,IAAI0C,CAAC,GAC9CC,EAAoB,CAACD,EAAE,OAAS,CAACA,EAAE,SACjCA,EAAE,KAAMvC,EAAQ,KAAKuC,CAAC,EAAOtC,EAAQ,KAAKsC,CAAC,EAC3CA,EAAE,WAAWE,GAAeF,CAAC,GAE9BC,IAAmBD,EAAE,MAAQ9C,EACpC,CACA,GAAIO,EAAQ,OAAS,IACnB,MAAAA,EAAU,CAAA,EAEJ,IAAI,KAEd,EAAG,EAAK,GAGLgB,CACT,CACA,SAASS,GAAkBW,EAAM,CAC/B,GAAI,CAACA,EAAK,GAAI,OACdvB,GAAUuB,CAAI,EACd,MAAMM,EAAOxC,GACbyC,GAAeP,EAAuFA,EAAK,MAAOM,CAAI,CAWxH,CACA,SAASC,GAAeP,EAAMpB,EAAO0B,EAAM,CACzC,IAAIE,EACJ,MAAMrC,EAAQX,EACZU,EAAWP,EACbA,EAAWH,EAAQwC,EACnB,GAAI,CACFQ,EAAYR,EAAK,GAAGpB,CAAK,CAC3B,OAAS6B,EAAK,CACZ,OAAIT,EAAK,OAMLA,EAAK,MAAQ3C,EACb2C,EAAK,OAASA,EAAK,MAAM,QAAQvB,EAAS,EAC1CuB,EAAK,MAAQ,MAGjBA,EAAK,UAAYM,EAAO,EACjBI,GAAYD,CAAG,CACxB,QAAC,CACC9C,EAAWO,EACXV,EAAQW,CACV,EACI,CAAC6B,EAAK,WAAaA,EAAK,WAAaM,KACnCN,EAAK,WAAa,MAAQ,cAAeA,EAC3ChB,GAAYgB,EAAMQ,CAAe,EAI5BR,EAAK,MAAQQ,EACpBR,EAAK,UAAYM,EAErB,CACA,SAASlB,GAAkBpB,EAAI2C,EAAMC,EAAMC,EAAQxD,EAAOwB,EAAS,CACjE,MAAMM,EAAI,CACR,GAAAnB,EACA,MAAO6C,EACP,UAAW,KACX,MAAO,KACP,QAAS,KACT,YAAa,KACb,SAAU,KACV,MAAOF,EACP,MAAOnD,EACP,QAASA,EAAQA,EAAM,QAAU,KACjC,KAAAoD,CACJ,EAKE,OAAIpD,IAAU,MAAgBA,IAAUD,KAI/BC,EAAM,MAA8BA,EAAM,MAAM,KAAK2B,CAAC,EAAzC3B,EAAM,MAAQ,CAAC2B,CAAC,GAgB/BA,CACT,CACA,SAAS2B,GAAOd,EAAM,CAEpB,GAAuCA,EAAK,QAAW,EAAG,OAC1D,GAAuCA,EAAK,QAAW1C,GAAS,OAAOwC,GAAaE,CAAI,EACxF,GAAIA,EAAK,UAAYxB,EAAQwB,EAAK,SAAS,UAAU,EAAG,OAAOA,EAAK,SAAS,QAAQ,KAAKA,CAAI,EAC9F,MAAMe,EAAY,CAACf,CAAI,EACvB,MAAQA,EAAOA,EAAK,SAAW,CAACA,EAAK,WAAaA,EAAK,UAAYlC,KAE3BkC,EAAK,OAAOe,EAAU,KAAKf,CAAI,EAEvE,QAAS,EAAIe,EAAU,OAAS,EAAG,GAAK,EAAG,IASzC,GARAf,EAAOe,EAAU,CAAC,EAQqBf,EAAK,QAAW3C,EACrDgC,GAAkBW,CAAI,UACsBA,EAAK,QAAW1C,GAAS,CACrE,MAAMuC,EAAUjC,EAChBA,EAAU,KACVc,GAAW,IAAMoB,GAAaE,EAAMe,EAAU,CAAC,CAAC,EAAG,EAAK,EACxDnD,EAAUiC,CACZ,CAEJ,CACA,SAASnB,GAAWV,EAAI2C,EAAM,CAC5B,GAAI/C,EAAS,OAAOI,EAAE,EACtB,IAAIgD,EAAO,GACNL,IAAM/C,EAAU,CAAA,GACjBC,EAASmD,EAAO,GAAUnD,EAAU,CAAA,EACxCC,KACA,GAAI,CACF,MAAMmD,EAAMjD,EAAE,EACd,OAAAkD,GAAgBF,CAAI,EACbC,CACT,OAASR,EAAK,CACPO,IAAMnD,EAAU,MACrBD,EAAU,KACV8C,GAAYD,CAAG,CACjB,CACF,CACA,SAASS,GAAgBF,EAAM,CAK7B,GAJIpD,IAC6ER,GAASQ,CAAO,EAC/FA,EAAU,MAERoD,EAAM,OAmCV,MAAMG,EAAItD,EACVA,EAAU,KACNsD,EAAE,QAAQzC,GAAW,IAAMvB,GAAWgE,CAAC,EAAG,EAAK,CAErD,CACA,SAAS/D,GAASgE,EAAO,CACvB,QAASlB,EAAI,EAAGA,EAAIkB,EAAM,OAAQlB,IAAKY,GAAOM,EAAMlB,CAAC,CAAC,CACxD,CAkBA,SAASX,GAAe6B,EAAO,CAC7B,IAAIlB,EACFmB,EAAa,EACf,IAAKnB,EAAI,EAAGA,EAAIkB,EAAM,OAAQlB,IAAK,CACjC,MAAMiB,EAAIC,EAAMlB,CAAC,EACZiB,EAAE,KAAqBC,EAAMC,GAAY,EAAIF,EAArCL,GAAOK,CAAC,CACvB,CAcA,IAAKjB,EAAI,EAAGA,EAAImB,EAAYnB,IAAKY,GAAOM,EAAMlB,CAAC,CAAC,CAClD,CACA,SAASJ,GAAaE,EAAMsB,EAAQ,CAEUtB,EAAK,MAAQ,EACzD,QAAS,EAAI,EAAG,EAAIA,EAAK,QAAQ,OAAQ,GAAK,EAAG,CAC/C,MAAMuB,EAASvB,EAAK,QAAQ,CAAC,EAC7B,GAAIuB,EAAO,QAAS,CAClB,MAAMV,EAA4CU,EAAO,MACrDV,IAAUxD,EACRkE,IAAWD,IAAW,CAACC,EAAO,WAAaA,EAAO,UAAYzD,KAAYgD,GAAOS,CAAM,EAClFV,IAAUvD,IAASwC,GAAayB,EAAQD,CAAM,CAC3D,CACF,CACF,CACA,SAASjB,GAAeL,EAAM,CAE5B,QAASE,EAAI,EAAGA,EAAIF,EAAK,UAAU,OAAQE,GAAK,EAAG,CACjD,MAAMC,EAAIH,EAAK,UAAUE,CAAC,EACWC,EAAE,QACUA,EAAE,MAAQ7C,GACrD6C,EAAE,KAAMvC,EAAQ,KAAKuC,CAAC,EAAOtC,EAAQ,KAAKsC,CAAC,EAC/CA,EAAE,WAAaE,GAAeF,CAAC,EAEnC,CACF,CACA,SAAS1B,GAAUuB,EAAM,CACvB,IAAIE,EACJ,GAAIF,EAAK,QACP,KAAOA,EAAK,QAAQ,QAAQ,CAC1B,MAAMuB,EAASvB,EAAK,QAAQ,IAAG,EAC7BwB,EAAQxB,EAAK,YAAY,IAAG,EAC5ByB,EAAMF,EAAO,UACf,GAAIE,GAAOA,EAAI,OAAQ,CACrB,MAAM,EAAIA,EAAI,IAAG,EACf3C,EAAIyC,EAAO,cAAc,IAAG,EAC1BC,EAAQC,EAAI,SACd,EAAE,YAAY3C,CAAC,EAAI0C,EACnBC,EAAID,CAAK,EAAI,EACbD,EAAO,cAAcC,CAAK,EAAI1C,EAElC,CACF,CAEF,GAAIkB,EAAK,OAAQ,CACf,IAAKE,EAAIF,EAAK,OAAO,OAAS,EAAGE,GAAK,EAAGA,IAAKzB,GAAUuB,EAAK,OAAOE,CAAC,CAAC,EACtE,OAAOF,EAAK,MACd,CAGO,GAAIA,EAAK,MAAO,CACrB,IAAKE,EAAIF,EAAK,MAAM,OAAS,EAAGE,GAAK,EAAGA,IAAKzB,GAAUuB,EAAK,MAAME,CAAC,CAAC,EACpEF,EAAK,MAAQ,IACf,CACA,GAAIA,EAAK,SAAU,CACjB,IAAKE,EAAIF,EAAK,SAAS,OAAS,EAAGE,GAAK,EAAGA,IAAKF,EAAK,SAASE,CAAC,EAAC,EAChEF,EAAK,SAAW,IAClB,CAC2DA,EAAK,MAAQ,CAC1E,CAUA,SAAS0B,GAAUjB,EAAK,CACtB,OAAIA,aAAe,MAAcA,EAC1B,IAAI,MAAM,OAAOA,GAAQ,SAAWA,EAAM,gBAAiB,CAChE,MAAOA,CACX,CAAG,CACH,CAQA,SAASC,GAAYD,EAAKtC,EAAQX,EAAO,CAG7B,MADIkE,GAAUjB,CAAG,CAQ7B,CAgGA,MAAMkB,GAAW,OAAO,UAAU,EAClC,SAASC,GAAQC,EAAG,CAClB,QAAS3B,EAAI,EAAGA,EAAI2B,EAAE,OAAQ3B,IAAK2B,EAAE3B,CAAC,EAAC,CACzC,CACA,SAAS4B,GAASC,EAAMC,EAAOnD,EAAU,CAAA,EAAI,CAC3C,IAAIoD,EAAQ,CAAA,EACVC,EAAS,CAAA,EACTC,EAAY,CAAA,EACZC,EAAM,EACNC,EAAUL,EAAM,OAAS,EAAI,CAAA,EAAK,KACpC,OAAArC,GAAU,IAAMiC,GAAQO,CAAS,CAAC,EAC3B,IAAM,CACX,IAAIG,EAAWP,EAAI,GAAM,CAAA,EACvBQ,EAASD,EAAS,OAClBpC,EACAsC,EACF,OAAAF,EAASrF,EAAM,EACRuB,EAAQ,IAAM,CACnB,IAAIiE,EAAYC,EAAgBC,EAAMC,EAAeC,EAAaC,EAAOC,EAAKC,EAAQC,EACtF,GAAIV,IAAW,EACTH,IAAQ,IACVR,GAAQO,CAAS,EACjBA,EAAY,CAAA,EACZF,EAAQ,CAAA,EACRC,EAAS,CAAA,EACTE,EAAM,EACNC,IAAYA,EAAU,KAEpBxD,EAAQ,WACVoD,EAAQ,CAACN,EAAQ,EACjBO,EAAO,CAAC,EAAInE,GAAWmF,IACrBf,EAAU,CAAC,EAAIe,EACRrE,EAAQ,SAAQ,EACxB,EACDuD,EAAM,WAGDA,IAAQ,EAAG,CAElB,IADAF,EAAS,IAAI,MAAMK,CAAM,EACpBC,EAAI,EAAGA,EAAID,EAAQC,IACtBP,EAAMO,CAAC,EAAIF,EAASE,CAAC,EACrBN,EAAOM,CAAC,EAAIzE,GAAWoF,CAAM,EAE/Bf,EAAMG,CACR,KAAO,CAIL,IAHAI,EAAO,IAAI,MAAMJ,CAAM,EACvBK,EAAgB,IAAI,MAAML,CAAM,EAChCF,IAAYQ,EAAc,IAAI,MAAMN,CAAM,GACrCO,EAAQ,EAAGC,EAAM,KAAK,IAAIX,EAAKG,CAAM,EAAGO,EAAQC,GAAOd,EAAMa,CAAK,IAAMR,EAASQ,CAAK,EAAGA,IAAQ,CACtG,IAAKC,EAAMX,EAAM,EAAGY,EAAST,EAAS,EAAGQ,GAAOD,GAASE,GAAUF,GAASb,EAAMc,CAAG,IAAMT,EAASU,CAAM,EAAGD,IAAOC,IAClHL,EAAKK,CAAM,EAAId,EAAOa,CAAG,EACzBH,EAAcI,CAAM,EAAIb,EAAUY,CAAG,EACrCV,IAAYQ,EAAYG,CAAM,EAAIX,EAAQU,CAAG,GAI/C,IAFAN,EAAa,IAAI,IACjBC,EAAiB,IAAI,MAAMM,EAAS,CAAC,EAChCR,EAAIQ,EAAQR,GAAKM,EAAON,IAC3BS,EAAOX,EAASE,CAAC,EACjBtC,EAAIuC,EAAW,IAAIQ,CAAI,EACvBP,EAAeF,CAAC,EAAItC,IAAM,OAAY,GAAKA,EAC3CuC,EAAW,IAAIQ,EAAMT,CAAC,EAExB,IAAKtC,EAAI4C,EAAO5C,GAAK6C,EAAK7C,IACxB+C,EAAOhB,EAAM/B,CAAC,EACdsC,EAAIC,EAAW,IAAIQ,CAAI,EACnBT,IAAM,QAAaA,IAAM,IAC3BG,EAAKH,CAAC,EAAIN,EAAOhC,CAAC,EAClB0C,EAAcJ,CAAC,EAAIL,EAAUjC,CAAC,EAC9BmC,IAAYQ,EAAYL,CAAC,EAAIH,EAAQnC,CAAC,GACtCsC,EAAIE,EAAeF,CAAC,EACpBC,EAAW,IAAIQ,EAAMT,CAAC,GACjBL,EAAUjC,CAAC,EAAC,EAErB,IAAKsC,EAAIM,EAAON,EAAID,EAAQC,IACtBA,KAAKG,GACPT,EAAOM,CAAC,EAAIG,EAAKH,CAAC,EAClBL,EAAUK,CAAC,EAAII,EAAcJ,CAAC,EAC1BH,IACFA,EAAQG,CAAC,EAAIK,EAAYL,CAAC,EAC1BH,EAAQG,CAAC,EAAEA,CAAC,IAETN,EAAOM,CAAC,EAAIzE,GAAWoF,CAAM,EAEtCjB,EAASA,EAAO,MAAM,EAAGE,EAAMG,CAAM,EACrCN,EAAQK,EAAS,MAAM,CAAC,CAC1B,CACA,OAAOJ,CACT,CAAC,EACD,SAASiB,EAAOD,EAAU,CAExB,GADAf,EAAUK,CAAC,EAAIU,EACXb,EAAS,CACX,KAAM,CAACvD,EAAGsE,CAAG,EAAIzE,EAAa6D,CAAC,EAC/B,OAAAH,EAAQG,CAAC,EAAIY,EACNpB,EAAMM,EAASE,CAAC,EAAG1D,CAAC,CAC7B,CACA,OAAOkD,EAAMM,EAASE,CAAC,CAAC,CAC1B,CACF,CACF,CAmEA,SAASa,EAAgBC,EAAMC,EAAO,CAUpC,OAAO/E,EAAQ,IAAM8E,EAAKC,GAAS,CAAA,CAAE,CAAC,CACxC,CA6LA,MAAMC,GAAgBC,GAAQ,oBAAoBA,CAAI,KACtD,SAASC,GAAIH,EAAO,CAClB,MAAMI,EAAW,aAAcJ,GAAS,CACtC,SAAU,IAAMA,EAAM,QAC1B,EACE,OAAO/D,GAAWsC,GAAS,IAAMyB,EAAM,KAAMA,EAAM,SAAUI,GAAY,MAAS,CAAC,CACrF,CAOA,SAASC,EAAKL,EAAO,CACnB,MAAMM,EAAQN,EAAM,MACdO,EAAiBtE,GAAW,IAAM+D,EAAM,KAAM,OAAW,MAAS,EAClEQ,EAAYF,EAAQC,EAAiBtE,GAAWsE,EAAgB,OAAW,CAC/E,OAAQ,CAAChH,EAAGC,IAAM,CAACD,GAAM,CAACC,CAC9B,CAAG,EACD,OAAOyC,GAAW,IAAM,CACtB,MAAML,EAAI4E,EAAS,EACnB,GAAI5E,EAAG,CACL,MAAM6E,EAAQT,EAAM,SAEpB,OADW,OAAOS,GAAU,YAAcA,EAAM,OAAS,EAC7CxF,EAAQ,IAAMwF,EAAMH,EAAQ1E,EAAI,IAAM,CAChD,GAAI,CAACX,EAAQuF,CAAS,EAAG,MAAMP,GAAc,MAAM,EACnD,OAAOM,EAAc,CACvB,CAAC,CAAC,EAAIE,CACR,CACA,OAAOT,EAAM,QACf,EAAG,OAAW,MAAS,CACzB,CCj0CA,MAAMU,GAAOjG,GAAMwB,GAAW,IAAMxB,EAAE,CAAE,EAExC,SAASkG,GAAgBC,EAAYrH,EAAGC,EAAG,CACzC,IAAIqH,EAAUrH,EAAE,OACdsH,EAAOvH,EAAE,OACTwH,EAAOF,EACPG,EAAS,EACTC,EAAS,EACTC,EAAQ3H,EAAEuH,EAAO,CAAC,EAAE,YACpBK,EAAM,KACR,KAAOH,EAASF,GAAQG,EAASF,GAAM,CACrC,GAAIxH,EAAEyH,CAAM,IAAMxH,EAAEyH,CAAM,EAAG,CAC3BD,IACAC,IACA,QACF,CACA,KAAO1H,EAAEuH,EAAO,CAAC,IAAMtH,EAAEuH,EAAO,CAAC,GAC/BD,IACAC,IAEF,GAAID,IAASE,EAAQ,CACnB,MAAMvE,EAAOsE,EAAOF,EAAUI,EAASzH,EAAEyH,EAAS,CAAC,EAAE,YAAczH,EAAEuH,EAAOE,CAAM,EAAIC,EACtF,KAAOD,EAASF,GAAMH,EAAW,aAAapH,EAAEyH,GAAQ,EAAGxE,CAAI,CACjE,SAAWsE,IAASE,EAClB,KAAOD,EAASF,IACV,CAACK,GAAO,CAACA,EAAI,IAAI5H,EAAEyH,CAAM,CAAC,IAAGzH,EAAEyH,CAAM,EAAE,OAAM,EACjDA,YAEOzH,EAAEyH,CAAM,IAAMxH,EAAEuH,EAAO,CAAC,GAAKvH,EAAEyH,CAAM,IAAM1H,EAAEuH,EAAO,CAAC,EAAG,CACjE,MAAMrE,EAAOlD,EAAE,EAAEuH,CAAI,EAAE,YACvBF,EAAW,aAAapH,EAAEyH,GAAQ,EAAG1H,EAAEyH,GAAQ,EAAE,WAAW,EAC5DJ,EAAW,aAAapH,EAAE,EAAEuH,CAAI,EAAGtE,CAAI,EACvClD,EAAEuH,CAAI,EAAItH,EAAEuH,CAAI,CAClB,KAAO,CACL,GAAI,CAACI,EAAK,CACRA,EAAM,IAAI,IACV,IAAIxE,EAAIsE,EACR,KAAOtE,EAAIoE,GAAMI,EAAI,IAAI3H,EAAEmD,CAAC,EAAGA,GAAG,CACpC,CACA,MAAMsB,EAAQkD,EAAI,IAAI5H,EAAEyH,CAAM,CAAC,EAC/B,GAAI/C,GAAS,KACX,GAAIgD,EAAShD,GAASA,EAAQ8C,EAAM,CAClC,IAAIpE,EAAIqE,EACNI,EAAW,EACXC,EACF,KAAO,EAAE1E,EAAImE,GAAQnE,EAAIoE,GAClB,GAAAM,EAAIF,EAAI,IAAI5H,EAAEoD,CAAC,CAAC,IAAM,MAAQ0E,IAAMpD,EAAQmD,IACjDA,IAEF,GAAIA,EAAWnD,EAAQgD,EAAQ,CAC7B,MAAMxE,EAAOlD,EAAEyH,CAAM,EACrB,KAAOC,EAAShD,GAAO2C,EAAW,aAAapH,EAAEyH,GAAQ,EAAGxE,CAAI,CAClE,MAAOmE,EAAW,aAAapH,EAAEyH,GAAQ,EAAG1H,EAAEyH,GAAQ,CAAC,CACzD,MAAOA,SACFzH,EAAEyH,GAAQ,EAAE,OAAM,CAC3B,CACF,CACF,CAEA,MAAMM,GAAW,gBACjB,SAASC,GAAOC,EAAMC,EAASrE,EAAM9B,EAAU,CAAA,EAAI,CACjD,IAAIqE,EACJ,OAAAnF,GAAW6D,GAAW,CACpBsB,EAAWtB,EACXoD,IAAY,SAAWD,EAAI,EAAKE,EAAOD,EAASD,EAAI,EAAIC,EAAQ,WAAa,KAAO,OAAWrE,CAAI,CACrG,EAAG9B,EAAQ,KAAK,EACT,IAAM,CACXqE,EAAQ,EACR8B,EAAQ,YAAc,EACxB,CACF,CACA,SAASE,EAASC,EAAMC,EAAcC,EAAOC,EAAU,CACrD,IAAItF,EACJ,MAAMuF,EAAS,IAAM,CACnB,MAAMX,EAA4F,SAAS,cAAc,UAAU,EACnI,OAAAA,EAAE,UAAYO,EAC6DP,EAAE,QAAQ,UACvF,EACM5G,EAAgG,KAAOgC,IAASA,EAAOuF,MAAW,UAAU,EAAI,EACtJ,OAAAvH,EAAG,UAAYA,EACRA,CACT,CACA,SAASwH,GAAeC,EAAYC,EAAW,OAAO,SAAU,CAC9D,MAAMvE,EAAIuE,EAASb,EAAQ,IAAMa,EAASb,EAAQ,EAAI,IAAI,KAC1D,QAAS3E,EAAI,EAAG,EAAIuF,EAAW,OAAQvF,EAAI,EAAGA,IAAK,CACjD,MAAMuD,EAAOgC,EAAWvF,CAAC,EACpBiB,EAAE,IAAIsC,CAAI,IACbtC,EAAE,IAAIsC,CAAI,EACViC,EAAS,iBAAiBjC,EAAMkC,EAAY,EAEhD,CACF,CAWA,SAASC,GAAa5F,EAAMyD,EAAM7E,EAAO,CAEnCA,GAAS,KAAMoB,EAAK,gBAAgByD,CAAI,EAAOzD,EAAK,aAAayD,EAAM7E,CAAK,CAClF,CASA,SAASiH,EAAU7F,EAAMpB,EAAO,CAE1BA,GAAS,KAAMoB,EAAK,gBAAgB,OAAO,EAAOA,EAAK,UAAYpB,CACzE,CACA,SAASkH,EAAiB9F,EAAMyD,EAAMsC,EAASC,EAAU,CAEjD,MAAM,QAAQD,CAAO,GACvB/F,EAAK,KAAKyD,CAAI,EAAE,EAAIsC,EAAQ,CAAC,EAC7B/F,EAAK,KAAKyD,CAAI,MAAM,EAAIsC,EAAQ,CAAC,GAC5B/F,EAAK,KAAKyD,CAAI,EAAE,EAAIsC,CAK/B,CA+DA,SAASE,GAAIjI,EAAIgH,EAASkB,EAAK,CAC7B,OAAO1H,EAAQ,IAAMR,EAAGgH,EAASkB,CAAG,CAAC,CACvC,CACA,SAASjB,EAAOkB,EAAQC,EAAUC,EAAQC,EAAS,CAEjD,GADID,IAAW,QAAa,CAACC,IAASA,EAAU,CAAA,GAC5C,OAAOF,GAAa,WAAY,OAAOG,GAAiBJ,EAAQC,EAAUE,EAASD,CAAM,EAC7FnH,EAAmBb,GAAWkI,GAAiBJ,EAAQC,EAAQ,EAAI/H,EAASgI,CAAM,EAAGC,CAAO,CAC9F,CAkJA,SAASX,GAAa,EAAG,CAIvB,IAAI3F,EAAO,EAAE,OACb,MAAMwG,EAAM,KAAK,EAAE,IAAI,GACjBC,EAAY,EAAE,OACdC,EAAmB,EAAE,cACrBC,EAAW/H,GAAS,OAAO,eAAe,EAAG,SAAU,CAC3D,aAAc,GACd,MAAAA,CACJ,CAAG,EACKgI,EAAa,IAAM,CACvB,MAAMb,EAAU/F,EAAKwG,CAAG,EACxB,GAAIT,GAAW,CAAC/F,EAAK,SAAU,CAC7B,MAAM6G,EAAO7G,EAAK,GAAGwG,CAAG,MAAM,EAE9B,GADAK,IAAS,OAAYd,EAAQ,KAAK/F,EAAM6G,EAAM,CAAC,EAAId,EAAQ,KAAK/F,EAAM,CAAC,EACnE,EAAE,aAAc,MACtB,CACA,OAAAA,EAAK,MAAQ,OAAOA,EAAK,MAAS,UAAY,CAACA,EAAK,KAAK,QAAUA,EAAK,SAAS,EAAE,MAAM,GAAK2G,EAAS3G,EAAK,IAAI,EACzG,EACT,EACM8G,EAAa,IAAM,CACvB,KAAOF,EAAU,IAAO5G,EAAOA,EAAK,QAAUA,EAAK,YAAcA,EAAK,OAAM,CAC9E,EAQA,GAPA,OAAO,eAAe,EAAG,gBAAiB,CACxC,aAAc,GACd,KAAM,CACJ,OAAOA,GAAQ,QACjB,CACJ,CAAG,EAEG,EAAE,aAAc,CAClB,MAAM+G,EAAO,EAAE,aAAY,EAC3BJ,EAASI,EAAK,CAAC,CAAC,EAChB,QAAS7G,EAAI,EAAGA,EAAI6G,EAAK,OAAS,IAChC/G,EAAO+G,EAAK7G,CAAC,EACT,EAAC0G,EAAU,GAFoB1G,IAAK,CAGxC,GAAIF,EAAK,OAAQ,CACfA,EAAOA,EAAK,OACZ8G,EAAU,EACV,KACF,CACA,GAAI9G,EAAK,aAAe0G,EACtB,KAEJ,CACF,MACKI,EAAU,EACfH,EAASF,CAAS,CACpB,CACA,SAASF,GAAiBJ,EAAQvH,EAAOP,EAASgI,EAAQW,EAAa,CAWrE,KAAO,OAAO3I,GAAY,YAAYA,EAAUA,EAAO,EACvD,GAAIO,IAAUP,EAAS,OAAOA,EAC9B,MAAMuG,EAAI,OAAOhG,EACfqI,EAAQZ,IAAW,OAErB,GADAF,EAASc,GAAS5I,EAAQ,CAAC,GAAKA,EAAQ,CAAC,EAAE,YAAc8H,EACrDvB,IAAM,UAAYA,IAAM,SAAU,CAEpC,GAAIA,IAAM,WACRhG,EAAQA,EAAM,SAAQ,EAClBA,IAAUP,GAAS,OAAOA,EAEhC,GAAI4I,EAAO,CACT,IAAIjH,EAAO3B,EAAQ,CAAC,EAChB2B,GAAQA,EAAK,WAAa,EAC5BA,EAAK,OAASpB,IAAUoB,EAAK,KAAOpB,GAC/BoB,EAAO,SAAS,eAAepB,CAAK,EAC3CP,EAAU6I,GAAcf,EAAQ9H,EAASgI,EAAQrG,CAAI,CACvD,MACM3B,IAAY,IAAM,OAAOA,GAAY,SACvCA,EAAU8H,EAAO,WAAW,KAAOvH,EAC9BP,EAAU8H,EAAO,YAAcvH,CAE1C,SAAWA,GAAS,MAAQgG,IAAM,UAEhCvG,EAAU6I,GAAcf,EAAQ9H,EAASgI,CAAM,MAC1C,IAAIzB,IAAM,WACf,OAAA1F,EAAmB,IAAM,CACvB,IAAIiI,EAAIvI,EAAK,EACb,KAAO,OAAOuI,GAAM,YAAYA,EAAIA,EAAC,EACrC9I,EAAUkI,GAAiBJ,EAAQgB,EAAG9I,EAASgI,CAAM,CACvD,CAAC,EACM,IAAMhI,EACR,GAAI,MAAM,QAAQO,CAAK,EAAG,CAC/B,MAAMwI,EAAQ,CAAA,EACRC,EAAehJ,GAAW,MAAM,QAAQA,CAAO,EACrD,GAAIiJ,GAAuBF,EAAOxI,EAAOP,EAAS2I,CAAW,EAC3D,OAAA9H,EAAmB,IAAMb,EAAUkI,GAAiBJ,EAAQiB,EAAO/I,EAASgI,EAAQ,EAAI,CAAC,EAClF,IAAMhI,EAWf,GAAI+I,EAAM,SAAW,GAEnB,GADA/I,EAAU6I,GAAcf,EAAQ9H,EAASgI,CAAM,EAC3CY,EAAO,OAAO5I,OACTgJ,EACLhJ,EAAQ,SAAW,EACrBkJ,GAAYpB,EAAQiB,EAAOf,CAAM,EAC5BnC,GAAgBiC,EAAQ9H,EAAS+I,CAAK,GAE7C/I,GAAW6I,GAAcf,CAAM,EAC/BoB,GAAYpB,EAAQiB,CAAK,GAE3B/I,EAAU+I,CACZ,SAAWxI,EAAM,SAAU,CAEzB,GAAI,MAAM,QAAQP,CAAO,EAAG,CAC1B,GAAI4I,EAAO,OAAO5I,EAAU6I,GAAcf,EAAQ9H,EAASgI,EAAQzH,CAAK,EACxEsI,GAAcf,EAAQ9H,EAAS,KAAMO,CAAK,CAC5C,MAAWP,GAAW,MAAQA,IAAY,IAAM,CAAC8H,EAAO,WACtDA,EAAO,YAAYvH,CAAK,EACnBuH,EAAO,aAAavH,EAAOuH,EAAO,UAAU,EACnD9H,EAAUO,CACZ,EACA,OAAOP,CACT,CACA,SAASiJ,GAAuBE,EAAYJ,EAAO/I,EAASoJ,EAAQ,CAClE,IAAIC,EAAU,GACd,QAASxH,EAAI,EAAGkC,EAAMgF,EAAM,OAAQlH,EAAIkC,EAAKlC,IAAK,CAChD,IAAI+C,EAAOmE,EAAMlH,CAAC,EAChByH,EAAOtJ,GAAWA,EAAQmJ,EAAW,MAAM,EAC3C5C,EACF,GAAI,EAAA3B,GAAQ,MAAQA,IAAS,IAAQA,IAAS,IAAc,IAAK2B,EAAI,OAAO3B,IAAU,UAAYA,EAAK,SACrGuE,EAAW,KAAKvE,CAAI,UACX,MAAM,QAAQA,CAAI,EAC3ByE,EAAUJ,GAAuBE,EAAYvE,EAAM0E,CAAI,GAAKD,UACnD9C,IAAM,WACf,GAAI6C,EAAQ,CACV,KAAO,OAAOxE,GAAS,YAAYA,EAAOA,EAAI,EAC9CyE,EAAUJ,GAAuBE,EAAY,MAAM,QAAQvE,CAAI,EAAIA,EAAO,CAACA,CAAI,EAAG,MAAM,QAAQ0E,CAAI,EAAIA,EAAO,CAACA,CAAI,CAAC,GAAKD,CAC5H,MACEF,EAAW,KAAKvE,CAAI,EACpByE,EAAU,OAEP,CACL,MAAM9I,EAAQ,OAAOqE,CAAI,EACrB0E,GAAQA,EAAK,WAAa,GAAKA,EAAK,OAAS/I,EAAO4I,EAAW,KAAKG,CAAI,EAAOH,EAAW,KAAK,SAAS,eAAe5I,CAAK,CAAC,CACnI,CACF,CACA,OAAO8I,CACT,CACA,SAASH,GAAYpB,EAAQiB,EAAOf,EAAS,KAAM,CACjD,QAASnG,EAAI,EAAGkC,EAAMgF,EAAM,OAAQlH,EAAIkC,EAAKlC,IAAKiG,EAAO,aAAaiB,EAAMlH,CAAC,EAAGmG,CAAM,CACxF,CACA,SAASa,GAAcf,EAAQ9H,EAASgI,EAAQuB,EAAa,CAC3D,GAAIvB,IAAW,OAAW,OAAOF,EAAO,YAAc,GACtD,MAAMnG,EAAO4H,GAAe,SAAS,eAAe,EAAE,EACtD,GAAIvJ,EAAQ,OAAQ,CAClB,IAAIwJ,EAAW,GACf,QAAS3H,EAAI7B,EAAQ,OAAS,EAAG6B,GAAK,EAAGA,IAAK,CAC5C,MAAM4H,EAAKzJ,EAAQ6B,CAAC,EACpB,GAAIF,IAAS8H,EAAI,CACf,MAAMC,EAAWD,EAAG,aAAe3B,EAC/B,CAAC0B,GAAY,CAAC3H,EAAG6H,EAAW5B,EAAO,aAAanG,EAAM8H,CAAE,EAAI3B,EAAO,aAAanG,EAAMqG,CAAM,EAAO0B,GAAYD,EAAG,OAAM,CAC9H,MAAOD,EAAW,EACpB,CACF,MAAO1B,EAAO,aAAanG,EAAMqG,CAAM,EACvC,MAAO,CAACrG,CAAI,CACd,CC1oBA,MAAMgI,GAAO,OAAO,WAAW,EAC7BC,GAAQ,OAAO,YAAY,EAC3BC,EAAO,OAAO,WAAW,EACzBC,GAAQ,OAAO,YAAY,EAC7B,SAASC,GAAOxJ,EAAO,CACrB,IAAIyJ,EAAIzJ,EAAM5B,CAAM,EACpB,GAAI,CAACqL,IACH,OAAO,eAAezJ,EAAO5B,EAAQ,CACnC,MAAOqL,EAAI,IAAI,MAAMzJ,EAAO0J,EAAY,CAC9C,CAAK,EACG,CAAC,MAAM,QAAQ1J,CAAK,GAAG,CACzB,MAAM2J,EAAO,OAAO,KAAK3J,CAAK,EAC5B4J,EAAO,OAAO,0BAA0B5J,CAAK,EAC/C,QAASsB,EAAI,EAAGuI,EAAIF,EAAK,OAAQrI,EAAIuI,EAAGvI,IAAK,CAC3C,MAAMwI,EAAOH,EAAKrI,CAAC,EACfsI,EAAKE,CAAI,EAAE,KACb,OAAO,eAAe9J,EAAO8J,EAAM,CACjC,WAAYF,EAAKE,CAAI,EAAE,WACvB,IAAKF,EAAKE,CAAI,EAAE,IAAI,KAAKL,CAAC,CACtC,CAAW,CAEL,CACF,CAEF,OAAOA,CACT,CACA,SAASM,GAAYC,EAAK,CACxB,IAAIC,EACJ,OAAOD,GAAO,MAAQ,OAAOA,GAAQ,WAAaA,EAAI5L,CAAM,GAAK,EAAE6L,EAAQ,OAAO,eAAeD,CAAG,IAAMC,IAAU,OAAO,WAAa,MAAM,QAAQD,CAAG,EAC3J,CACA,SAASnB,GAAOxE,EAAMG,EAAM,IAAI,IAAO,CACrC,IAAI0F,EAAQC,EAAW5B,EAAGuB,EAC1B,GAAII,EAAS7F,GAAQ,MAAQA,EAAK+E,EAAI,EAAG,OAAOc,EAChD,GAAI,CAACH,GAAY1F,CAAI,GAAKG,EAAI,IAAIH,CAAI,EAAG,OAAOA,EAChD,GAAI,MAAM,QAAQA,CAAI,EAAG,CACnB,OAAO,SAASA,CAAI,EAAGA,EAAOA,EAAK,MAAM,CAAC,EAAOG,EAAI,IAAIH,CAAI,EACjE,QAAS/C,EAAI,EAAGuI,EAAIxF,EAAK,OAAQ/C,EAAIuI,EAAGvI,IACtCiH,EAAIlE,EAAK/C,CAAC,GACL6I,EAAYtB,GAAON,EAAG/D,CAAG,KAAO+D,IAAGlE,EAAK/C,CAAC,EAAI6I,EAEtD,KAAO,CACD,OAAO,SAAS9F,CAAI,EAAGA,EAAO,OAAO,OAAO,CAAA,EAAIA,CAAI,EAAOG,EAAI,IAAIH,CAAI,EAC3E,MAAMsF,EAAO,OAAO,KAAKtF,CAAI,EAC3BuF,EAAO,OAAO,0BAA0BvF,CAAI,EAC9C,QAAS/C,EAAI,EAAGuI,EAAIF,EAAK,OAAQrI,EAAIuI,EAAGvI,IACtCwI,EAAOH,EAAKrI,CAAC,EACT,CAAAsI,EAAKE,CAAI,EAAE,MACfvB,EAAIlE,EAAKyF,CAAI,GACRK,EAAYtB,GAAON,EAAG/D,CAAG,KAAO+D,IAAGlE,EAAKyF,CAAI,EAAIK,GAEzD,CACA,OAAO9F,CACT,CACA,SAAS+F,GAASC,EAAQC,EAAQ,CAChC,IAAIC,EAAQF,EAAOC,CAAM,EACzB,OAAKC,GAAO,OAAO,eAAeF,EAAQC,EAAQ,CAChD,MAAOC,EAAQ,OAAO,OAAO,IAAI,CACrC,CAAG,EACMA,CACT,CACA,SAASC,GAAQD,EAAOE,EAAUzK,EAAO,CACvC,GAAIuK,EAAME,CAAQ,EAAG,OAAOF,EAAME,CAAQ,EAC1C,KAAM,CAAC,EAAGjG,CAAG,EAAIzE,EAAaC,EAAO,CACnC,OAAQ,GACR,SAAU,EACd,CAAG,EACD,SAAE,EAAIwE,EACC+F,EAAME,CAAQ,EAAI,CAC3B,CACA,SAASC,GAAkBL,EAAQI,EAAU,CAC3C,MAAMb,EAAO,QAAQ,yBAAyBS,EAAQI,CAAQ,EAC9D,MAAI,CAACb,GAAQA,EAAK,KAAO,CAACA,EAAK,cAAgBa,IAAarM,GAAUqM,IAAapB,KACnF,OAAOO,EAAK,MACZ,OAAOA,EAAK,SACZA,EAAK,IAAM,IAAMS,EAAOjM,CAAM,EAAEqM,CAAQ,GACjCb,CACT,CACA,SAASe,GAAUN,EAAQ,CACzBrJ,GAAW,GAAMwJ,GAAQJ,GAASC,EAAQhB,EAAK,EAAGE,EAAK,EAAC,CAC1D,CACA,SAASqB,GAAQP,EAAQ,CACvB,OAAAM,GAAUN,CAAM,EACT,QAAQ,QAAQA,CAAM,CAC/B,CACA,MAAMX,GAAe,CACnB,IAAIW,EAAQI,EAAUI,EAAU,CAC9B,GAAIJ,IAAarB,GAAM,OAAOiB,EAC9B,GAAII,IAAarM,EAAQ,OAAOyM,EAChC,GAAIJ,IAAapM,GACf,OAAAsM,GAAUN,CAAM,EACTQ,EAET,MAAMN,EAAQH,GAASC,EAAQhB,EAAK,EAC9ByB,EAAUP,EAAME,CAAQ,EAC9B,IAAIzK,EAAQ8K,EAAUA,EAAO,EAAKT,EAAOI,CAAQ,EACjD,GAAIA,IAAapB,IAASoB,IAAanB,GAAQmB,IAAa,YAAa,OAAOzK,EAChF,GAAI,CAAC8K,EAAS,CACZ,MAAMlB,EAAO,OAAO,yBAAyBS,EAAQI,CAAQ,EACzDzJ,GAAW,IAAO,OAAOhB,GAAU,YAAcqK,EAAO,eAAeI,CAAQ,IAAM,EAAEb,GAAQA,EAAK,OAAM5J,EAAQwK,GAAQD,EAAOE,EAAUzK,CAAK,EAAC,EACvJ,CACA,OAAO+J,GAAY/J,CAAK,EAAIwJ,GAAOxJ,CAAK,EAAIA,CAC9C,EACA,IAAIqK,EAAQI,EAAU,CACpB,OAAIA,IAAarB,IAAQqB,IAAarM,GAAUqM,IAAapM,IAAUoM,IAAapB,IAASoB,IAAanB,GAAQmB,IAAa,YAAoB,IACnJzJ,GAAW,GAAMwJ,GAAQJ,GAASC,EAAQf,CAAI,EAAGmB,CAAQ,EAAC,EACnDA,KAAYJ,EACrB,EACA,KAAM,CACJ,MAAO,EACT,EACA,gBAAiB,CACf,MAAO,EACT,EACA,QAASO,GACT,yBAA0BF,EAC5B,EACA,SAASK,GAAY9I,EAAOwI,EAAUzK,EAAOgL,EAAW,GAAO,CAC7D,GAAI,CAACA,GAAY/I,EAAMwI,CAAQ,IAAMzK,EAAO,OAC5C,MAAM+I,EAAO9G,EAAMwI,CAAQ,EACzBjH,EAAMvB,EAAM,OACVjC,IAAU,QACZ,OAAOiC,EAAMwI,CAAQ,EACjBxI,EAAMqH,CAAI,GAAKrH,EAAMqH,CAAI,EAAEmB,CAAQ,GAAK1B,IAAS,QAAW9G,EAAMqH,CAAI,EAAEmB,CAAQ,EAAE,EAAC,IAEvFxI,EAAMwI,CAAQ,EAAIzK,EACdiC,EAAMqH,CAAI,GAAKrH,EAAMqH,CAAI,EAAEmB,CAAQ,GAAK1B,IAAS,QAAW9G,EAAMqH,CAAI,EAAEmB,CAAQ,EAAE,EAAC,GAEzF,IAAIF,EAAQH,GAASnI,EAAOoH,EAAK,EAC/BjI,EAEF,IADIA,EAAOoJ,GAAQD,EAAOE,EAAU1B,CAAI,IAAG3H,EAAK,EAAE,IAAMpB,CAAK,EACzD,MAAM,QAAQiC,CAAK,GAAKA,EAAM,SAAWuB,EAAK,CAChD,QAASlC,EAAIW,EAAM,OAAQX,EAAIkC,EAAKlC,KAAMF,EAAOmJ,EAAMjJ,CAAC,IAAMF,EAAK,EAAC,GACnEA,EAAOoJ,GAAQD,EAAO,SAAU/G,CAAG,IAAMpC,EAAK,EAAEa,EAAM,MAAM,CAC/D,EACCb,EAAOmJ,EAAMhB,EAAK,IAAMnI,EAAK,EAAC,CACjC,CACA,SAAS6J,GAAehJ,EAAOjC,EAAO,CACpC,MAAM2J,EAAO,OAAO,KAAK3J,CAAK,EAC9B,QAASsB,EAAI,EAAGA,EAAIqI,EAAK,OAAQrI,GAAK,EAAG,CACvC,MAAMsG,EAAM+B,EAAKrI,CAAC,EAClByJ,GAAY9I,EAAO2F,EAAK5H,EAAM4H,CAAG,CAAC,CACpC,CACF,CACA,SAASsD,GAAYzL,EAAS0L,EAAM,CAGlC,GAFI,OAAOA,GAAS,aAAYA,EAAOA,EAAK1L,CAAO,GACnD0L,EAAOtC,GAAOsC,CAAI,EACd,MAAM,QAAQA,CAAI,EAAG,CACvB,GAAI1L,IAAY0L,EAAM,OACtB,IAAI,EAAI,EACN3H,EAAM2H,EAAK,OACb,KAAO,EAAI3H,EAAK,IAAK,CACnB,MAAMxD,EAAQmL,EAAK,CAAC,EAChB1L,EAAQ,CAAC,IAAMO,GAAO+K,GAAYtL,EAAS,EAAGO,CAAK,CACzD,CACA+K,GAAYtL,EAAS,SAAU+D,CAAG,CACpC,MAAOyH,GAAexL,EAAS0L,CAAI,CACrC,CACA,SAASC,GAAW3L,EAAS0I,EAAMkD,EAAY,CAAA,EAAI,CACjD,IAAIC,EACFvC,EAAOtJ,EACT,GAAI0I,EAAK,OAAS,EAAG,CACnBmD,EAAOnD,EAAK,MAAK,EACjB,MAAMoD,EAAW,OAAOD,EACtBE,EAAU,MAAM,QAAQ/L,CAAO,EACjC,GAAI,MAAM,QAAQ6L,CAAI,EAAG,CACvB,QAAShK,EAAI,EAAGA,EAAIgK,EAAK,OAAQhK,IAC/B8J,GAAW3L,EAAS,CAAC6L,EAAKhK,CAAC,CAAC,EAAE,OAAO6G,CAAI,EAAGkD,CAAS,EAEvD,MACF,SAAWG,GAAWD,IAAa,WAAY,CAC7C,QAASjK,EAAI,EAAGA,EAAI7B,EAAQ,OAAQ6B,IAC9BgK,EAAK7L,EAAQ6B,CAAC,EAAGA,CAAC,GAAG8J,GAAW3L,EAAS,CAAC6B,CAAC,EAAE,OAAO6G,CAAI,EAAGkD,CAAS,EAE1E,MACF,SAAWG,GAAWD,IAAa,SAAU,CAC3C,KAAM,CACJ,KAAAE,EAAO,EACP,GAAAC,EAAKjM,EAAQ,OAAS,EACtB,GAAAkM,EAAK,CACb,EAAUL,EACJ,QAAShK,EAAImK,EAAMnK,GAAKoK,EAAIpK,GAAKqK,EAC/BP,GAAW3L,EAAS,CAAC6B,CAAC,EAAE,OAAO6G,CAAI,EAAGkD,CAAS,EAEjD,MACF,SAAWlD,EAAK,OAAS,EAAG,CAC1BiD,GAAW3L,EAAQ6L,CAAI,EAAGnD,EAAM,CAACmD,CAAI,EAAE,OAAOD,CAAS,CAAC,EACxD,MACF,CACAtC,EAAOtJ,EAAQ6L,CAAI,EACnBD,EAAY,CAACC,CAAI,EAAE,OAAOD,CAAS,CACrC,CACA,IAAIrL,EAAQmI,EAAK,CAAC,EACd,OAAOnI,GAAU,aACnBA,EAAQA,EAAM+I,EAAMsC,CAAS,EACzBrL,IAAU+I,IAEZuC,IAAS,QAAatL,GAAS,OACnCA,EAAQ6I,GAAO7I,CAAK,EAChBsL,IAAS,QAAavB,GAAYhB,CAAI,GAAKgB,GAAY/J,CAAK,GAAK,CAAC,MAAM,QAAQA,CAAK,EACvFiL,GAAelC,EAAM/I,CAAK,EACrB+K,GAAYtL,EAAS6L,EAAMtL,CAAK,EACzC,CACA,SAAS4L,MAAe,CAACC,EAAO5L,CAAO,EAAG,CACxC,MAAM6L,EAAiBjD,GAAOgD,GAAS,EAAE,EACnCL,EAAU,MAAM,QAAQM,CAAc,EACtCC,EAAevC,GAAOsC,CAAc,EAC1C,SAASE,KAAYC,EAAM,CACzBpL,GAAM,IAAM,CACV2K,GAAWS,EAAK,SAAW,EAAIf,GAAYY,EAAgBG,EAAK,CAAC,CAAC,EAAIb,GAAWU,EAAgBG,CAAI,CACvG,CAAC,CACH,CACA,MAAO,CAACF,EAAcC,CAAQ,CAChC,CCrNO,MAAME,EAAS,CAEpB,IAAK,CACH,QAA8C,OAAO,SAAS,OAAS,UACvE,UAAW,CACT,UAAW,aACX,gBAAiB,oBACjB,aAAc,iBACd,OAAQ,WACR,WAAY,eACZ,YAAa,gBACb,SAAU,YAAA,CACZ,EAIF,UAAW,CACT,IAAoC,QAAQ,OAAO,SAAS,IAAI,KAAA,EAIlE,OAAQ,CAEN,YACE,uLAGF,YAAa,CACX,UAAW,SACX,SAAU,OACV,OAAQ,GAAA,EAIV,QAAS,CACP,IAAK,0CAAA,CACP,EAIF,KAAM,CACJ,iBAAkB,GAClB,kBAAmB,IACnB,cAAe,GACf,YAAa,CACX,OAAQ,GACR,KAAM,GACN,UAAW,GAAA,EAEb,WAAY,CACV,OAAQ,UACR,KAAM,UACN,UAAW,SAAA,CACb,EAIF,MAAO,CACL,SAAU,QACV,mBAAoB,IACpB,kBAAmB,CACjB,WAAY,UAAW,YAAa,QAAA,CACtC,EAIF,GAAI,CACF,iBAAkB,IAClB,gBAAiB,IACjB,cAAe,CAAA,EAIjB,UAAW,CACT,aAAc,CACZ,MAAO,QACP,MAAO,IACP,MAAO,SAAA,EAET,eAAgB,CACd,MAAO,MACP,MAAO,IACP,MAAO,SAAA,EAET,WAAY,CACV,MAAO,GACP,gBAAiB,iBAAA,CACnB,EAIF,GAAI,CACF,kBAAmB,IACnB,oBAAqB,IACrB,gBAAiB,sBAAA,EAInB,cAAe,CACb,MAAO,KACP,MAAO,KACP,KAAM,MACN,KAAM,KAAA,CAEV,ECnGM,CAACC,EAAWC,CAAY,EAAIR,GAAuB,CACvD,OAAQ,OACR,YAAa,CACX,SAAU,GACV,WAAY,EACZ,cAAe,EACf,WAAY,EACZ,aAAc,EACd,UAAW,EACX,cAAe,EACf,WAAY,MAAA,EAEd,YAAa,CAAA,EACb,YAAa,OACb,aAAc,EAChB,CAAC,EAGK,CAACS,GAAWC,EAAY,EAAIvM,EAAa,EAAK,EAC9C,CAACwM,GAAcC,EAAe,EAAIzM,EAAqB,EAAE,EAGlD0M,GAAc,CAEzB,MAAM,eAAeC,EAAkB,CACrCJ,GAAa,EAAI,EACjB,GAAI,CACF,MAAMK,GAAgBD,CAAQ,EAC9B,MAAME,GAAiBF,CAAQ,EAC/BN,EAAa,eAAgB,EAAI,CACnC,OAASS,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,QAAA,CACEP,GAAa,EAAK,CACpB,CACF,EAGA,MAAM,qBAAqBQ,EAAkBC,EAAmB,CAC9D,GAAKZ,EAAU,OAEf,GAAI,CACF,MAAMa,EAAW,MAAM,MAAM,GAAGd,EAAO,IAAI,OAAO,GAAGA,EAAO,IAAI,UAAU,QAAQ,GAAI,CACpF,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CACnB,SAAUC,EAAU,OAAO,GAC3B,IAAKW,EACL,IAAKC,CAAA,CACN,CAAA,CACF,EAED,GAAIC,EAAS,GAAI,CACf,MAAM/E,EAAO,MAAM+E,EAAS,KAAA,EAG5BZ,EAAa,SAAU,WAAYU,CAAQ,EAC3CV,EAAa,SAAU,YAAaW,CAAS,EAGzC9E,EAAK,gBACPgF,GAA8BhF,EAAK,eAAgBA,EAAK,cAAc,CAK1E,CACF,OAAS4E,EAAO,CACd,QAAQ,MAAM,oCAAqCA,CAAK,CAC1D,CACF,EAGA,MAAM,YAAYK,EAAgBC,EAAmBC,EAAkD,CACrG,GAAI,CAACjB,EAAU,OAAQ,OAAO,KAE9B,GAAI,CACF,MAAMa,EAAW,MAAM,MAAM,GAAGd,EAAO,IAAI,OAAO,GAAGA,EAAO,IAAI,UAAU,WAAW,GAAI,CACvF,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CACnB,SAAUC,EAAU,OAAO,GAC3B,OAAAe,EACA,IAAKC,EACL,IAAKC,CAAA,CACN,CAAA,CACF,EAED,GAAIJ,EAAS,GAAI,CAEf,MAAM9C,GADO,MAAM8C,EAAS,KAAA,GACR,KAEpB,GAAI9C,EAAO,QAAS,CAElBkC,EAAa,cAAe,aAAclC,EAAO,UAAU,EAC3DkC,EAAa,cAAe,aAAcrD,GAAQA,EAAO,CAAC,EAG1D,MAAMsE,EAAWC,GAAepD,EAAO,UAAU,EACjD,OAAImD,EAAWlB,EAAU,OAAO,QAC9BC,EAAa,SAAU,QAASiB,CAAQ,EACxCE,GAAY,QAAQF,CAAQ,KAAK,GAInCjB,EAAa,iBAAuBrD,EAAK,UAAe1E,EAAK,KAAO6I,CAAM,CAAC,EAGvEhD,EAAO,MACTqD,GAAY,OAAOrD,EAAO,KAAK,IAAI,KAAKA,EAAO,KAAK,IAAI,EAGnDA,CACT,CACF,CACF,OAAS2C,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,CAChD,CAEA,OAAO,IACT,EAGA,YAAYW,EAAgBC,EAAgB,CAC1C,MAAMC,EAAevB,EAAU,YAAY,WAAaqB,EAGxD,GAFApB,EAAa,cAAe,aAAcsB,CAAY,EAElDvB,EAAU,OAAQ,CACpB,MAAMkB,EAAWC,GAAeI,CAAY,EACxCL,EAAWlB,EAAU,OAAO,QAC9BC,EAAa,SAAU,QAASiB,CAAQ,EACxCE,GAAY,QAAQF,CAAQ,KAAK,EAErC,CAEAE,GAAY,GAAGE,CAAM,KAAKD,CAAM,IAAI,CACtC,EAGA,mBAAoB,CAEpB,EAGA,gBAAiB,CACf,OAAOrB,EAAU,WACnB,EAGA,MAAM,gBAAiB,CACrB,GAAKA,EAAU,YAEf,GAAI,EACe,MAAM,MAAM,GAAGD,EAAO,IAAI,OAAO,kBAAkBC,EAAU,YAAY,EAAE,OAAQ,CAClG,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CACnB,MAAOA,EAAU,YAAY,WAC7B,SAAU,KAAK,OAAO,KAAK,MAAQ,IAAI,KAAKA,EAAU,YAAY,SAAS,EAAE,QAAA,GAAa,GAAI,CAAA,CAC/F,CAAA,CACF,GAEY,KACXC,EAAa,cAAe,MAAS,EACrCA,EAAa,eAAgB,EAAK,EAEtC,OAASS,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,CACF,CACF,EAGA,eAAeF,GAAgBD,EAAkB,CAC/C,GAAI,CACF,MAAMM,EAAW,MAAM,MAAM,GAAGd,EAAO,IAAI,OAAO,GAAGA,EAAO,IAAI,UAAU,UAAU,aAAaQ,CAAQ,EAAE,EAE3G,GAAIM,EAAS,GAAI,CACf,MAAM/E,EAAO,MAAM+E,EAAS,KAAA,EAC5B,GAAI/E,EAAK,KAAM,CACb,MAAM0F,EAAS1F,EAAK,KACpBmE,EAAa,SAAUuB,CAAM,EAC7BvB,EAAa,cAAe,CAC1B,SAAAM,EACA,WAAYiB,EAAO,MACnB,cAAe,EACf,WAAY,EACZ,aAAcA,EAAO,MACrB,UAAWA,EAAO,MAClB,cAAe,CAAA,CAChB,CACH,CACF,MAEE,MAAMC,GAAgBlB,CAAQ,CAElC,OAASG,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EAEnDgB,GAAoBnB,CAAQ,CAC9B,CACF,CAEA,eAAekB,GAAgBlB,EAAkB,CAC/C,GAAI,CACF,MAAMM,EAAW,MAAM,MAAM,GAAGd,EAAO,IAAI,OAAO,gBAAiB,CACjE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CACnB,GAAIQ,EACJ,KAAM,UAAUA,EAAS,UAAU,EAAG,CAAC,CAAC,GACxC,SAAUR,EAAO,OAAO,YAAY,SACpC,UAAWA,EAAO,OAAO,YAAY,SAAA,CACtC,CAAA,CACF,EAED,GAAIc,EAAS,GAAI,CAEf,MAAMW,GADO,MAAMX,EAAS,KAAA,GACR,KACpBZ,EAAa,SAAUuB,CAAM,CAC/B,CACF,OAASd,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EACnDgB,GAAoBnB,CAAQ,CAC9B,CACF,CAEA,SAASmB,GAAoBnB,EAAkB,CAC7C,MAAMoB,EAAgB,CACpB,GAAIpB,EACJ,KAAM,UAAUA,EAAS,UAAU,EAAG,CAAC,CAAC,GACxC,SAAUR,EAAO,OAAO,YAAY,SACpC,UAAWA,EAAO,OAAO,YAAY,UACrC,MAAO,EACP,MAAO,EACP,MAAO,CAAA,EAGTE,EAAa,SAAU0B,CAAa,EACpC1B,EAAa,cAAe,CAC1B,SAAAM,EACA,WAAY,EACZ,cAAe,EACf,WAAY,EACZ,aAAc,EACd,UAAW,EACX,cAAe,EACf,eAAgB,IAAK,CACtB,CACH,CAEA,eAAeE,GAAiBF,EAAkB,CAChD,GAAI,CACF,MAAMM,EAAW,MAAM,MAAM,GAAGd,EAAO,IAAI,OAAO,iBAAkB,CAClE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,SAAAQ,EAAU,CAAA,CAClC,EAED,GAAIM,EAAS,GAAI,CACf,MAAM/E,EAAO,MAAM+E,EAAS,KAAA,EAC5BZ,EAAa,cAAenE,EAAK,IAAI,CACvC,CACF,OAAS4E,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,CACF,CAEA,SAASS,GAAeS,EAAuB,CAC7C,OAAO,KAAK,MAAMA,EAAQ,GAAG,EAAI,CACnC,CAEA,SAASd,GAA8Be,EAAWC,EAAyB,CACzE,QAAQ,IAAI,mCAAoCD,EAAK,IAAI,EAGzDvB,GAAY,YAAY,GAAI,QAAQ,EAEpCc,GAAY,UAAUS,EAAK,IAAI,EAAE,CACnC,CAOA,SAAST,GAAYW,EAAiB,CACpC,MAAMC,EAAY,IAAI,KAAA,EAAO,mBAAA,EAC7B3B,GAAgB,GAAG2B,CAAS,MAAMD,CAAO,EAAE,CAC7C,CAGO,MAAME,GAAe,CAC1B,IAAI,eAAgB,CAClB,OAAOjC,EAAU,MACnB,EACA,IAAI,aAAc,CAChB,OAAOA,EAAU,WACnB,CAaF,2hFCrTA,MAAMkC,GAAkC1J,GAAU,CAChD,KAAM,CAAC2J,EAAWC,CAAY,EAAIxO,EAAa,SAAS,EAElDyO,EAAiB,CACrB,CAAEC,GAAI,UAAWC,MAAO,KAAMC,KAAM,qUAAA,EACpC,CAAEF,GAAI,YAAaC,MAAO,KAAMC,KAAM,8bAAA,EACtC,CAAEF,GAAI,WAAYC,MAAO,KAAMC,KAAM,y9BAAA,CAA29B,EAGlgC,OAAA,IAAA,CAAA,IAAAC,EAAAC,KAAAC,EAAAF,EAAAG,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAG,EAAAD,EAAAE,YAAAC,EAAAF,EAAAC,YAAAE,EAAAD,EAAAL,WAAAO,EAAAD,EAAAF,YAAAI,EAAAD,EAAAH,YAAAK,EAAAD,EAAAR,WAAAU,EAAAD,EAAAL,YAAAO,EAAAD,EAAAV,WAAAY,OAAAA,EAAAT,EAAA,IAqBWV,EAAe1I,QAAQ,IAAA,CAAA,IAAA8J,EAAAC,KAAAC,EAAAF,EAAAb,WAAAgB,EAAAD,EAAAf,WAAAiB,EAAAF,EAAAX,YAAAS,OAAAA,EAAAK,QAEX,IAAM1B,EAAa2B,EAAIzB,EAAE,EAACkB,EAAAK,EAAA,IAUKE,EAAIxB,KAAK,EAAAyB,EAAAC,GAAA,CAAA,IAAAC,EAT1C,2FACL/B,EAAAA,IAAgB4B,EAAIzB,GAChB,qCACA,qDAAqD,GACzD6B,EAG2EJ,EAAIvB,KAAI0B,OAAAA,IAAAD,EAAA7N,GAAAgO,EAAAX,EAAAQ,EAAA7N,EAAA8N,CAAA,EAAAC,IAAAF,EAAApK,GAAAwK,GAAAT,EAAA,IAAAK,EAAApK,EAAAsK,CAAA,EAAAF,CAAA,EAAA,CAAA7N,EAAAkO,OAAAzK,EAAAyK,MAAAA,CAAA,EAAAb,CAAA,GAAA,CAIxF,CAAC,EAAAc,EAAArB,EAAA,QAOS1K,EAAMgM,aAAa,EAAAD,EAAApB,EAAA,QAanB3K,EAAMiM,YAAY,EAAAjB,EAAAD,EAAA,IAc8BtB,GAAayC,YAAYC,UAAU,EAAAlC,CAAA,GAAA,CAgB1G,EAEsBmC,GAAA,CAAA,OAAA,CAAA,6tCCrFtB,MAAMC,GAAwCrM,GAAU,CACtD,IAAIsM,EACAC,EAEJ,KAAM,CAACC,EAAgBC,CAAiB,EAAIrR,EAAuB,CACjE+M,SAAU,OACVC,UAAW,QAAA,CACZ,EAE6BhN,EAAiD,WAAW,EAC1F,KAAM,CAACsM,EAAWC,CAAY,EAAIvM,EAAa,EAAI,EAGZ,OAqB9BoR,IAAiBrE,SACjBqE,IAAiBpE,UAK1BjM,GAAQ,SAAY,CAClBuQ,QAAQC,IAAI,kCAAkC,EAE9C,GAAI,CAEFC,GAAWC,mBAAqBtF,EAAOuF,OAAOC,YAG9CR,EAAS,IAAIK,GAAcN,EAAc,CACvCU,QAASJ,GAAeK,iBAAAA,EACxBC,gBAAiB,GACjBC,SAAU,GACVC,WAAY,GACZC,gBAAiB,GACjBC,qBAAsB,GACtBC,UAAW,GACXC,SAAU,GACVC,iBAAkB,GAClBC,SAAU,GACVC,YAAa,EAAA,CACd,EAGAC,OAAeC,aAAetB,EAG/BA,EAAOuB,MAAMC,MAAMC,KAAO,GAC1BzB,EAAOuB,MAAMG,OAAOD,KAAO,GAG3BzB,EAAOuB,MAAMI,gBAAkBtB,GAAauB,cAG5C5B,EAAOuB,MAAMC,MAAMK,eAAiB,GACpC7B,EAAOuB,MAAMO,IAAIC,QAAU,GAC3B/B,EAAOuB,MAAMS,cAAcP,KAAO,GAGlCzB,EAAOiC,OAAOC,QAAQ,CACpBC,YAAa9B,GAAkB+B,YAC7BpH,EAAOuF,OAAO8B,YAAYxG,UAC1Bb,EAAOuF,OAAO8B,YAAYzG,SAC1BZ,EAAOuF,OAAO8B,YAAYC,MAC5B,CAAA,CACD,EAGDtC,EAAOuC,aAAaC,wBAAwBC,eAAgBC,GAAe,CACzE,MAAMC,EAAiB3C,EAAQiC,OAAOW,cAAcF,EAAMG,SAAU7C,EAAQuB,MAAMC,MAAMsB,SAAS,EACjG,GAAIH,EAAgB,CAClB,MAAMI,EAAe1C,GAAoB2C,cAAcL,CAAc,EAC/D9G,EAAYwE,GAAY4C,UAAUF,EAAalH,SAAS,EACxDD,EAAWyE,GAAY4C,UAAUF,EAAanH,QAAQ,EAE5DsE,EAAkB,CAAEtE,SAAAA,EAAUC,UAAAA,CAAAA,CAAW,EACzCpI,EAAMyP,aAAatH,EAAUC,CAAS,CACxC,CACF,EAAGwE,GAA4B8C,UAAU,EAEzC/H,EAAa,EAAK,EAClB+E,QAAQC,IAAI,8CAA8C,CAC5D,OAASzE,EAAO,CACdwE,QAAQxE,MAAM,iCAAkCA,CAAK,EACrDP,EAAa,EAAK,CACpB,CACF,CAAC,EAEDvL,GAAU,IAAM,CACVmQ,GACFA,EAAOoD,QAAAA,CAEX,CAAC,GAyBD,IAAA,CAAA,IAAA1F,EAAAC,GAAAA,EAAAC,EAAAF,EAAAG,WAAAC,EAAAF,EAAAK,YAAAF,EAAAD,EAAAD,WAAAG,EAAAD,EAAAF,WAAAK,EAAAF,EAAAC,YAAAE,EAAAD,EAAAL,WAAAM,EAAAN,WAAAA,IAAAQ,EAAAF,EAAAF,YAAAI,EAAAR,WAAA,IAAAwF,EAIWtD,EAAY,cAAAsD,GAAA,WAAAC,GAAAD,EAAAzF,CAAA,EAAZmC,EAAYnC,EAAAa,EAAAf,GAAA,IAAA,CAAA,IAAA6F,EAAAC,GAAA,IAAA,CAAA,CAQlBrI,GAAW,EAAA,MAAA,IAAXoI,EAAAA,GAAA5E,GAAAA,CAcA,GAAA,EAAAb,CAAA,EAAAW,EAAAN,EAAA,IAWY8B,EAAAA,EAAiBrE,SAAS6H,QAAQ,CAAC,EAAC,IAAA,EAAAhF,EAAAJ,EAAA,IAGpC4B,EAAAA,EAAiBpE,UAAU4H,QAAQ,CAAC,EAAC,IAAA,EAAA/F,CAAA,GAAA,CAOxD,8yHCxLA,MAAMgG,GAAwCjQ,GAAU,OACR5E,EAAa,UAAU,EAErE,MAAM8U,EAA4B,CAChC,CACEpG,GAAI,QACJqG,MAAO,KACP9U,QAAOoO,EAAAA,GAAa2G,gBAAb3G,YAAAA,EAA4B4G,QAAS,EAC5CC,OAAQ,QACRC,MAAO,KACPvG,KAAM,qpBACNwG,MAAO,2BAAA,EAET,CACE1G,GAAI,QACJqG,MAAO,KACP9U,MAAOoO,GAAayC,YAAYC,WAChCmE,OAAQ,UACRC,MAAO,KACPvG,KAAM,qpBACNwG,MAAO,iCAAA,EAET,CACE1G,GAAI,QACJqG,MAAO,KACP9U,MAAOoO,GAAayC,YAAYuE,WAChCH,OAAQ,KACRC,MAAO,UACPvG,KAAM,wWACNwG,MAAO,+BAAA,CACR,EAGGE,EAAmB,CACvB,CAAE3T,KAAM,OAAQ4T,OAAQ,QAASC,KAAM,UAAW5G,KAAM,KAAA,EACxD,CAAEjN,KAAM,OAAQ4T,OAAQ,SAAUC,KAAM,cAAe5G,KAAM,IAAA,EAC7D,CAAEjN,KAAM,QAAS4T,OAAQ,UAAWC,KAAM,OAAQ5G,KAAM,IAAA,EACxD,CAAEjN,KAAM,QAAS4T,OAAQ,SAAUC,KAAM,OAAQ5G,KAAM,IAAA,CAAM,EAG/D,OAAA,IAAA,CAAA,IAAAC,EAAA4G,GAAAA,EAAA1G,EAAAF,EAAAG,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAG,EAAAD,EAAAF,WAAAK,EAAAF,EAAAC,YAAAE,EAAAD,EAAAL,WAAA2B,OAAAA,EAAAtB,EAAA,QAqBqBzK,EAAM8Q,QAAQ,EAAA9F,EAAAb,EAAA4G,EAiB5B1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEhR,EAAMiR,UAAU,EAAA,IAAAC,UAAA,CAAA,IAAAvG,EAAAT,GAAAA,EAAAU,EAAAD,EAAAP,WAAAS,EAAAD,EAAAR,WAAAU,EAAAD,EAAAL,YAAAO,EAAAH,EAAAJ,YAAAS,EAAAF,EAAAP,YAAAW,EAAAF,EAAAT,YAAAY,EAAAD,EAAAX,YAAAa,EAAAD,EAAAhB,WAAA+G,EAAA9F,EAAAb,YAAAQ,OAAAA,EAAAF,EAAAiG,EAanB5Q,GAAG,CAACiR,KAAMlB,EAAWgB,aACZ,IAAA,CAAA,IAAAG,EAAAC,KAAAC,EAAAF,EAAAjH,WAAAoH,EAAAD,EAAAnH,WAAAqH,EAAAD,EAAApH,WAAAsH,EAAAD,EAAArH,WAAAuH,GAAAD,EAAAtH,WAAAwH,EAAAD,GAAAvH,WAAAyH,EAAAH,EAAAlH,YAAAsH,EAAAD,EAAAzH,WAAA2H,EAAAD,EAAAtH,YAAAwH,EAAAP,EAAAjH,YAAAyH,EAAAD,EAAA5H,WAAAY,OAAAA,EAAA8G,EAAA,IAW4CI,EAAO/B,KAAK,EAAAnF,EAAA+G,EAAA,IACDG,EAAO7W,KAAK,EAAA2P,EAAAgH,GAAA,IAAA,CAAA,IAAAlC,EAAAC,GAAA,IAIhEmC,EAAO3B,QAAU,IAAI,EAAA,MAAA,IAArBT,EAAAA,GAAAqC,GAAAA,CAIA,GAAA,EAAAF,CAAA,EAAAjH,EAAAgH,GAAA,IAAA,CAAA,IAAAI,EAAArC,GAAA,IACAmC,EAAO3B,QAAU,MAAM,EAAA,MAAA,IAAvB6B,EAAAA,GAAAC,GAAAA,CAIA,GAAA,EAAAJ,CAAA,EAAAjH,EAAAiH,EAAA,IAMEC,EAAO5B,MAAM,EAAA9E,EAAAC,GAAA,CAAA,IAAA6G,EA1BJ,+BAA+BJ,EAAO1B,KAAK,yDAAwD+B,GAEhCL,EAAOlI,KAAIwI,GAmB7E,4BACXN,EAAO3B,QAAU,KAAO,mBACxB2B,EAAO3B,QAAU,OAAS,eAC1B,gBAAgB,GAChB+B,OAAAA,IAAA7G,EAAA7N,GAAAgO,EAAA8F,EAAAjG,EAAA7N,EAAA0U,CAAA,EAAAC,KAAA9G,EAAApK,GAAAwK,GAAA+F,EAAA,IAAAnG,EAAApK,EAAAkR,EAAA,EAAAC,KAAA/G,EAAAlS,GAAAqS,EAAAqG,EAAAxG,EAAAlS,EAAAiZ,EAAA,EAAA/G,CAAA,EAAA,CAAA7N,EAAAkO,OAAAzK,EAAAyK,OAAAvS,EAAAuS,MAAAA,CAAA,EAAAuF,CAAA,GAAA,CAAA,CAOX,CAAA,EAAArG,EAAAmG,EAAAJ,EAuCF5Q,GAAG,CAACiR,KAAMV,EAAgBQ,aACf,IAAA,CAAA,IAAAuB,EAAAC,GAAAA,EAAAC,EAAAF,EAAArI,WAAAwI,EAAAD,EAAAnI,YAAAqI,EAAAD,EAAAxI,WAAA0I,EAAAD,EAAArI,YAAAQ,OAAAA,EAAA2H,EAAA,IAEiBI,EAAS/I,IAAI,EAAAgB,EAAA6H,EAAA,IAEgBE,EAASpC,MAAM,EAAA3F,EAAA8H,EAAA,IACzBC,EAAShW,IAAI,EAAA0V,CAAA,GAAA,CAAA,CAM1D,CAAA,EAAA9H,CAAA,CAAA,CAAA,EAAA,IAAA,EAAAK,EAAAb,EAAA4G,EAQV1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,MAAE,CAAChR,EAAMiR,UAAU,EAAA,IAAAC,UAAA,CAAA,IAAA8B,EAAA9H,GAAAA,EAAA+H,EAAAD,EAAA5I,WAAA2B,OAAAA,EAAAkH,EAAA,QAGdjT,EAAM8Q,QAAQ,EAAAkC,CAAA,CAAA,CAAA,EAAA,IAAA,EAAAxH,EAAAC,GAAA,CAAA,IAAAC,EAtJrB,sEACV1L,EAAMiR,WAAa,gBAAkB,gBAAgB,GACrDtF,EAoBe3L,EAAMiR,WAAa,OAAS,OAAMiC,EAGhC,6CAA6ClT,EAAMiR,WAAa,YAAc,EAAE,GAAEvF,OAAAA,IAAAD,EAAA7N,GAAAgO,EAAA3B,EAAAwB,EAAA7N,EAAA8N,CAAA,EAAAC,IAAAF,EAAApK,GAAAwK,GAAApB,EAAA,QAAAgB,EAAApK,EAAAsK,CAAA,EAAAuH,IAAAzH,EAAAlS,GAAAsS,GAAAnB,EAAA,QAAAe,EAAAlS,EAAA2Z,CAAA,EAAAzH,CAAA,EAAA,CAAA7N,EAAAkO,OAAAzK,EAAAyK,OAAAvS,EAAAuS,MAAAA,CAAA,EAAA7B,CAAA,GAAA,CAyIzG,EAEyBmC,GAAA,CAAA,OAAA,CAAA,8qJCxNzB,MAAM+G,GAAwCnT,GAAU,CACtD,KAAM,CAACoT,EAAUC,CAAW,EAAIjY,EAA4B,CAC1D,CACE0O,GAAI,IACJwJ,OAAQ,KACR/J,QAAS,wCACTC,UAAW+J,KAAKC,MAAQ,GAAA,CACzB,CACF,EAEK,CAACC,EAAYC,CAAa,EAAItY,EAAa,EAAE,EAC7C,CAACuY,EAAcC,CAAe,EAAIxY,EAAa,EAAK,EAEpDyY,EAAoB,SAAY,CACpC,MAAMtK,EAAUkK,EAAAA,EAAaK,KAAAA,EAC7B,GAAI,CAACvK,GAAWoK,IAAgB,OAGhC,MAAMI,EAA2B,CAC/BjK,GAAIyJ,KAAKC,IAAAA,EAAMQ,SAAAA,EACfV,OAAQ,OACR/J,QAAAA,EACAC,UAAW+J,KAAKC,IAAAA,CAAI,EAGtBH,EAAYjP,GAAQ,CAAC,GAAGA,EAAM2P,CAAW,CAAC,EAC1CL,EAAc,EAAE,EAChBE,EAAgB,EAAI,EAEpB,GAAI,CAEFK,WAAW,IAAM,CACf,MAAMC,EAA0B,CAC9BpK,IAAKyJ,KAAKC,IAAAA,EAAQ,GAAGQ,SAAAA,EACrBV,OAAQ,KACR/J,QAAS4K,EAAiB5K,CAAO,GAAK,eACtCC,UAAW+J,KAAKC,IAAAA,CAAI,EAGtBH,EAAYjP,GAAQ,CAAC,GAAGA,EAAM8P,CAAU,CAAC,EACzCN,EAAgB,EAAK,CACvB,EAAG,GAAI,CACT,OAAS1L,EAAO,CACdwE,QAAQxE,MAAM,0BAA2BA,CAAK,EAC9C0L,EAAgB,EAAK,CACvB,CACF,EAEMQ,EAAkBxW,GAAqB,CACvCA,EAAEqF,MAAQ,SAAW,CAACrF,EAAEyW,WAC1BzW,EAAE0W,eAAAA,EACFT,EAAAA,EAEJ,EAEMM,EAAoBI,GAAiC,CACzD,MAAMC,EAAaD,EAAME,YAAAA,EAEnBC,EAAyC,CAC7C,GAAM,wCACN,IAAO;AAAA;AAAA;AAAA;AAAA,cACP,KAAQ;AAAA;AAAA;AAAA;AAAA,mBACR,GAAM;AAAA;AAAA;AAAA,UACN,GAAM;AAAA;AAAA;AAAA;AAAA;AAAA,eAAA,EAGR,SAAW,CAACzR,EAAKoF,CAAQ,IAAKsM,OAAOC,QAAQF,CAAc,EACzD,GAAIF,EAAWK,SAAS5R,CAAG,EACzB,OAAOoF,EAIX,OAAO,IACT,EAEMyM,EAActL,GACX,IAAI+J,KAAK/J,CAAS,EAAEuL,mBAAmB,QAAS,CACrDC,KAAM,UACNC,OAAQ,SAAA,CACT,EAGH,OAAA,IAAA,CAAA,IAAAhL,EAAAiB,KAAAf,EAAAF,EAAAG,WAAAC,EAAAF,EAAAK,YAAAF,EAAAD,EAAAG,YAAAD,EAAAD,EAAAF,WAAAK,EAAAF,EAAAH,WAAAM,EAAAD,EAAAD,YAAAG,EAAAL,EAAAE,YAAAK,EAAAF,EAAAH,YAAAM,EAAAD,EAAAT,WAAAW,EAAAD,EAAAV,WAAAa,EAAAF,EAAAX,WAAAe,EAAAJ,EAAAP,YAAAY,EAAAD,EAAAf,WAAAiB,EAAAD,EAAAhB,WAAA+G,EAAA9F,EAAAb,YAAAwI,GAAAlI,EAAAN,YAAAuB,OAAAA,EAAArB,EAAA,QA0BmB1K,EAAMkV,OAAO,EAAAlK,EAAAL,EAAAoG,EAUzB5Q,GAAG,CAAA,IAACiR,MAAI,CAAA,OAAEgC,EAAAA,CAAU,EAAAlC,aACV,IAAA,CAAA,IAAA+B,EAAApC,KAAAQ,EAAA4B,EAAA7I,WAAAmH,EAAAF,EAAAjH,WAAAoH,EAAAD,EAAAnH,WAAAqH,EAAAD,EAAAhH,YAAAkH,EAAAD,EAAAjH,YAAAQ,OAAAA,EAAAqG,GAAA,IAAA,CAAA,IAAAvB,EAAAC,GAAA,IAGFxG,EAAQ+J,SAAW,IAAI,EAAA,MAAA,IAAvBxD,EAAAA,GAAAwB,GAAAA,CAIA,GAAA,EAAAC,CAAA,EAAAvG,EAAAwG,EAAA,IASIjI,EAAQA,OAAO,EAAAyB,EAAAyG,EAAA,IAOfqD,EAAWvL,EAAQC,SAAS,CAAC,EAAAgC,EAAAC,GAAA,CAAA,IAAA6G,GAtB1B,QAAQ/I,EAAQ+J,SAAW,OAAS,cAAgB,eAAe,kBAAiBf,GAClF,8BAA8BhJ,EAAQ+J,SAAW,OAAS,UAAY,SAAS,GAAEd,GAOlF,4EACLjJ,EAAQ+J,SAAW,OACf,4FACA,gHAAgH,GACpH6B,GAKU,iCACV5L,EAAQ+J,SAAW,OACf,qBACA,eAAe,GACnB8B,GAKU,YACV7L,EAAQ+J,SAAW,OACf,gGACA,2HAA2H,GAC/HhB,OAAAA,KAAA7G,EAAA7N,GAAAgO,EAAAqH,EAAAxH,EAAA7N,EAAA0U,EAAA,EAAAC,KAAA9G,EAAApK,GAAAuK,EAAAyF,EAAA5F,EAAApK,EAAAkR,EAAA,EAAAC,KAAA/G,EAAAlS,GAAAqS,EAAA2F,EAAA9F,EAAAlS,EAAAiZ,EAAA,EAAA2C,KAAA1J,EAAA7O,GAAAgP,EAAA6F,EAAAhG,EAAA7O,EAAAuY,EAAA,EAAAC,KAAA3J,EAAA9O,GAAAiP,EAAA8F,EAAAjG,EAAA9O,EAAAyY,EAAA,EAAA3J,CAAA,EAAA,CAAA7N,EAAAkO,OAAAzK,EAAAyK,OAAAvS,EAAAuS,OAAAlP,EAAAkP,OAAAnP,EAAAmP,MAAAA,CAAA,EAAAmH,CAAA,GAAA,CAAA,CAIT,EAAA,IAAA,EAAAjI,EAAAL,EAAAoG,EAGF1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAE2C,EAAAA,CAAc,EAAA,IAAAzC,UAAA,CAAA,OAAAhH,GAAAA,CAAA,CAAA,CAAA,EAAA,IAAA,EAAAe,EAAA1I,iBAAA,WA6BR6R,CAAc,EAAAnJ,EAAAoK,QADhBzX,GAAM8V,EAAc9V,EAAE0X,cAAcja,KAAK,EAAC8P,EAAAG,QAY7CuI,EAAiB7I,EAAAK,EAAA,IAMrBsI,EAAAA,EAAiB,IAAM,IAAI,EAAA3I,EAAAmG,EAAA,IAG3BwC,EAAAA,EAAiB,MAAQ,IAAI,EAAA3I,EAAAgI,GAAA,IASnC,CAAC,KAAM,MAAO,IAAI,EAAE7R,IAAIoU,IAAI,IAAA,CAAA,IAAA3D,EAAAO,GAAAA,EAAAP,OAAAA,EAAAtG,QAEhB,IAAMoI,EAAc6B,CAAI,EAACvK,EAAA4G,EAIjC2D,CAAI,EAAA/J,MAAAoG,EAAA4D,SAFK7B,EAAAA,CAAc,EAAA/B,CAAA,GAAA,CAI3B,CAAC,EAAApG,EAAAC,GAAA,CAAA,IAAAC,EAjCYiI,EAAAA,EAAchI,EAQhB,CAAC8H,IAAaK,KAAAA,GAAUH,EAAAA,EAAcT,EAIjC,qCAAqCS,EAAAA,EAAiB,eAAiB,uBAAuB,GAAEjI,OAAAA,IAAAD,EAAA7N,IAAAqN,EAAAuK,SAAA/J,EAAA7N,EAAA8N,GAAAC,IAAAF,EAAApK,IAAA8J,EAAAqK,SAAA/J,EAAApK,EAAAsK,GAAAuH,IAAAzH,EAAAlS,GAAAqS,EAAAP,EAAAI,EAAAlS,EAAA2Z,CAAA,EAAAzH,CAAA,EAAA,CAAA7N,EAAAkO,OAAAzK,EAAAyK,OAAAvS,EAAAuS,MAAAA,CAAA,EAAAN,MAAAP,EAAA5P,MAlBtGoY,EAAAA,CAAY,EAAAxJ,CAAA,GAAA,CA4CjC,EAEyBmC,GAAA,CAAA,QAAA,OAAA,CAAA,yrCCvOzB,MAAMqJ,GAA0CzV,GAAU,CACxD,KAAM,CAAC0V,EAAaC,CAAc,EAAIva,EAAa,EAAK,EAClD,CAACwa,EAAQC,CAAS,EAAIza,EAAa,MAAM,EACzC,CAAC0a,CAAW,EAAI1a,EAAa,OAAOwS,OAAW,MAAgB,sBAAuBA,QAAU,4BAA6BA,OAAO,EAEpImI,EAAwBA,IAAM,CAC9BL,IACFM,EAAAA,EAEAC,EAAAA,CAEJ,EAEMA,EAAiBA,IAAM,CAE3BN,EAAe,EAAI,EACnBE,EAAU,gBAAgB,EAG1B5B,WAAW,IAAM,CACf4B,EAAU,aAAa,EACvBF,EAAe,EAAK,CACtB,EAAG,GAAI,CACT,EAEMK,EAAgBA,IAAM,CAC1BL,EAAe,EAAK,EACpBE,EAAU,MAAM,CAClB,EA0BA,OAAA,IAAA,CAAA,IAAA5L,EAAA4G,KAAA1G,EAAAF,EAAAG,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAG,EAAAD,EAAAE,YAAAC,EAAAJ,EAAAG,YAAAE,EAAAD,EAAAL,WAAAO,EAAAF,EAAAD,YAAAuB,OAAAA,EAAAxB,EAAA,QAUmBvK,EAAMkV,OAAO,EAAAlK,EAAAN,EAgBrBkL,CAAM,EAAA5K,EAAAL,EAAAoG,EAMR1Q,EAAI,CAAA,IACH2Q,MAAI,CAAA,OAAE8E,EAAAA,CAAa,EAAA,IACnB1V,UAAQ,CAAA,OAAAkR,GAAAA,CAAA,EAAA,IAAAJ,UAAA,CAAA,MAAA,EAAA,IAAA,CAAA,IAAAtG,EAAAV,GAAAA,EAAAU,OAAAA,EAAAU,QAOGyK,EAAqB/K,EAAAJ,EAAA,IAS7B8K,EAAAA,EAAgB,KAAO,IAAI,EAAAlK,EAAA,IAAAI,EAAAhB,EARrB;AAAA;AAAA,kBAEH8K,EAAAA,EACE,sDACA,6CAA6C;AAAA,eAElD,CAAA,EAAA9K,CAAA,GAAA,GAAA,IAAA,CAAA,IAAAC,EAAAK,GAAAA,EAAAF,OAAAA,EAAAH,EAAA,IAKA6K,EAAAA,EAAgB,SAAW,QAAQ,EAAA7K,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAAW,EAAA,IAAAI,EAAAlB,EAlC5B;AAAA;AAAA,cAERgL,EAAAA,EACE,wCACA,6BAA6B;AAAA,WAElC,CAAA,EAAAzL,CAAA,GAAA,CA6DX,EAE0BmC,GAAA,CAAA,OAAA,CAAA,yxDC5I1B,MAAM8J,GAA4DlW,GAAU,CAC1E,MAAMmW,EAAkBA,IAAM,CAK5B,GAHAzJ,QAAQC,IAAI,2BAA4B3M,EAAMqJ,KAAKnJ,IAAI,EAGnD,oBAAqB0N,OAAQ,CAC/B,MAAMwI,EAAY,IAAIC,yBACpB,QAAQrW,EAAMqJ,KAAKnJ,IAAI,IAAIF,EAAMqJ,KAAKiN,WAAW,EACnD,EACAF,EAAUG,KAAO,QACjBC,gBAAgBC,MAAML,CAAS,CACjC,CACF,EAEA,OAAA,IAAA,CAAA,IAAAnM,EAAAqH,KAAAnH,EAAAF,EAAAG,WAAAC,EAAAF,EAAAC,WAAAC,EAAAD,WAAAA,IAAAG,EAAAF,EAAAG,YAAAC,EAAAN,EAAAK,YAAAE,EAAAD,EAAAL,WAAAO,EAAAD,EAAAN,WAAAQ,EAAAF,EAAAF,YAAAK,EAAAD,EAAAR,WAAAU,EAAAD,EAAAL,YAAAO,EAAAH,EAAAJ,YAAAS,EAAAF,EAAAX,WAAAe,EAAAF,EAAAT,YAAA+G,EAAAxG,EAAAP,YAAAgH,EAAAD,EAAAnH,WAAAsH,EAAAH,EAAA/G,YAAAmH,EAAAD,EAAAtH,WAAAwH,EAAAD,EAAAvH,WAAAwH,EAAAxH,WAAAA,IAAA0H,EAAAF,EAAApH,YAAAsH,OAAAA,EAAA1H,WAAAY,EAAAX,EAAA,IAMSrK,EAAMqJ,KAAKnJ,KAAI,IAAA,EAAA6L,EAAAxB,EAAA,QAGPvK,EAAMkV,OAAO,EAAAlK,EAAAL,EAAA,IAYnB3K,EAAMqJ,KAAKiN,WAAW,EAAAtL,EAAAF,EAAA,IAQtB9K,EAAMqJ,KAAKqN,GAAG,EAAA1L,EAAAG,EAAA,IAOUnL,EAAMqJ,KAAKsN,WAAWC,gBAAgB,EAAA5L,EAAAP,EAAAsG,EAIlE1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEhR,EAAMqJ,KAAKwN,OAAO,EAAA,IAAA3F,UAAA,CAAA,IAAA9F,EAAAlB,GAAAA,EAAAmB,EAAAD,EAAAhB,WAAA+G,EAAA9F,EAAAb,YAAAQ,OAAAA,EAAAmG,EAAA,IAGnBnR,EAAMqJ,KAAKwN,OAAO,EAAAzL,CAAA,CAAA,CAAA,EAAAmG,CAAA,EAAAvG,EAAAP,EAAAsG,EAK5B1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEhR,EAAMqJ,KAAKC,cAAc,EAAA,IAAA4H,UAAA,CAAA,IAAA8B,EAAA9H,GAAAA,EAAA+H,EAAAD,EAAA5I,WAAAiH,EAAA4B,EAAAzI,YAAAQ,OAAAA,EAAAqG,EAAA,IAO9BrR,EAAMqJ,KAAKC,cAAc,EAAA0J,CAAA,CAAA,CAAA,EAAAzB,CAAA,EAAAC,EAAAlG,QAQnB6K,EAAenL,EAAAuG,EAAAR,EAOzB1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEjB,GAAA,IAAA,CAAA,CAAA/P,EAAMqJ,KAAKyN,MAAM,EAAA,GAAI9W,EAAMqJ,KAAKyN,OAAOC,OAAS,CAAC,EAAA,IAAA7F,UAAA,CAAA,OAAAL,GAAAA,CAAA,CAAA,CAAA,EAAA,IAAA,EAAA7F,EAAA4G,EAAA,IAajD5R,EAAMqJ,KAAKlB,SAAS6H,QAAQ,CAAC,EAAC,IAAA,EAAAhF,EAAA8G,EAAA,IAC9B9R,EAAMqJ,KAAKjB,UAAU4H,QAAQ,CAAC,EAAC,IAAA,EAAA/F,CAAA,GAAA,CAMrD,EAEmCmC,GAAA,CAAA,OAAA,CAAA,8cC7GnC,MAAM4K,GAAkDhX,IACtD,IAAA,CAAA,IAAAiK,EAAAC,GAAAA,EAAAC,EAAAF,EAAAG,WAAAC,EAAAF,EAAAK,YAAAQ,OAAAA,EAAAX,EAAA,IAYOrK,EAAMuJ,SAAW,QAAQ,EAAAU,CAAA,GAAA,0hGCNlC,MAAMgN,GAAiBA,IAAM,CAE3B,KAAM,CAACC,EAASC,CAAU,EAAIlQ,GAAqB,CACjDmQ,iBAAkB,GAClBC,gBAAiB,GACjBC,oBAAqB,GACrBC,oBAAqB,GACrB7P,UAAW,GACX8P,sBAAuB1L,MAAAA,CACxB,EAEK,CAAC2L,CAAM,EAAIrc,EAAasc,GAAgB,EAE9Cvb,GAAQ,SAAY,CAClB,GAAI,CAEF,MAAM2L,GAAY6P,eAAeF,GAAQ,EAEzCN,EAAW,YAAa,EAAK,EAC7BzK,QAAQC,IAAI,0DAA0D,CACxE,OAASzE,EAAO,CACdwE,QAAQxE,MAAM,oCAAqCA,CAAK,EACxDiP,EAAW,YAAa,EAAK,CAC/B,CACF,CAAC,EAGD,MAAMS,EAAyBA,IAAM,CACnCT,EAAW,mBAAoB,CAACD,EAAQE,gBAAgB,CAC1D,EAEMS,EAAwBA,IAAM,CAClCV,EAAW,kBAAmB,CAACD,EAAQG,eAAe,CACxD,EAEMS,EAAwBA,IAAM,CAClCX,EAAW,sBAAuB,CAACD,EAAQI,mBAAmB,CAChE,EAEMS,EAA4B1O,GAAyB,CACzD8N,EAAW,wBAAyB9N,CAAI,EACxC8N,EAAW,sBAAuB,EAAI,CACxC,EAEMa,EAA4BA,IAAM,CACtCb,EAAW,sBAAuB,EAAK,EACvCA,EAAW,wBAAyBrL,MAAS,CAC/C,EAEMmM,EAAmBA,CAAC9P,EAAkBC,IAAsB,CAChEN,GAAYoQ,qBAAqB/P,EAAUC,CAAS,CACtD,EAEA,SAASsP,GAAyB,CAChC,MAAO,QAAUS,KAAKC,OAAAA,EAASpE,SAAS,EAAE,EAAEqE,UAAU,CAAC,EAAI9E,KAAKC,IAAAA,EAAMQ,SAAS,EAAE,CACnF,CAEA,OAAA,IAAA,CAAA,IAAA/J,EAAA4G,KAAA1G,EAAAF,EAAAG,WAAAC,EAAAF,EAAAK,YAAAF,EAAAD,EAAAD,WAAAG,EAAAD,EAAAF,WAAAK,EAAAF,EAAAC,YAAAE,EAAAD,EAAAL,WAAAO,EAAAD,EAAAF,YAAAI,EAAAD,EAAAP,WAAAS,EAAAP,EAAAE,YAAAY,EAAAf,EAAAG,YAAAa,EAAAD,EAAAhB,WAAA+G,EAAA9F,EAAAjB,WAAA4I,EAAA7B,EAAA3G,YAAAyI,EAAAD,EAAA5I,WAAAiH,EAAA4B,EAAAzI,YAAAQ,OAAAA,EAAAf,EAAA8G,EAsBKrH,GAAM,CACLsC,cAAe4L,EACf3L,aAAc4L,CAAAA,CAAqB,EAAAxN,CAAA,EAAAW,EAAAT,EAAAwG,EAS9B1E,GAAS,CACRoD,aAAcwI,EACdK,sBAAuBP,CAAAA,CAAwB,CAAA,EAAA/M,EAAAN,EAAAqG,EAQ9Cd,GAAS,CAAA,IACRgB,YAAU,CAAA,OAAEiG,EAAQI,mBAAmB,EACvCxG,SAAUgH,CAAAA,CAAqB,CAAA,EAAAlN,EAAAU,QAOtBwM,EAAqB9M,EAAAH,EAAAkG,EAcnC1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEkG,EAAQG,eAAe,EAAA,IAAAnG,UAAA,CAAA,IAAApG,EAAAZ,GAAAA,EAAAc,OAAAA,EAAAF,EAAAiG,EAE9BoC,GAAS,CACR+B,QAASA,IAAMiC,EAAW,kBAAmB,EAAK,CAAA,CAAC,CAAA,EAAArM,CAAA,CAAA,CAAA,EAAA,IAAA,EAAAE,EAAAH,EAAAkG,EAMxD1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEkG,EAAQE,gBAAgB,EAAA,IAAAlG,UAAA,CAAA,IAAAnG,EAAAb,GAAAA,EAAAc,OAAAA,EAAAD,EAAAgG,EAE/B0E,GAAU,CACTP,QAASA,IAAMiC,EAAW,mBAAoB,EAAK,CAAA,CAAC,CAAA,EAAApM,CAAA,CAAA,CAAA,EAAA,IAAA,EAAAC,EAAAH,EAAAkG,EAMzD1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEjB,SAAAmH,EAAQK,mBAAmB,EAAA,GAAIL,EAAQM,qBAAqB,EAAA,IAAAtG,UAAA,CAAA,IAAAjG,EAAAf,GAAAA,EAAAc,OAAAA,EAAAC,EAAA8F,EAEnEmF,GAAmB,CAAA,IAClB7M,MAAI,CAAA,OAAE6N,EAAQM,qBAAsB,EACpCtC,QAAS8C,CAAAA,CAAyB,CAAA,EAAA/M,CAAA,CAAA,CAAA,EAAA,IAAA,EAAAD,EAAAf,EAAA8G,EAQ3C1Q,EAAI,CAAA,IAAC2Q,MAAI,CAAA,OAAEkG,EAAQxP,SAAS,EAAA,IAAAwJ,UAAA,CAAA,IAAA/F,EAAAD,GAAAA,EAAAF,OAAAA,EAAAG,EAAA4F,EAExBiG,GAAc,CAACzN,QAAO,aAAA,CAAA,CAAA,EAAA4B,CAAA,CAAA,CAAA,EAAAC,CAAA,EAAA6H,EAAA3H,QAaVsM,EAAsBvG,EAAA/F,QAQtBuM,EAAqB5N,CAAA,GAAA,CAY5C,EAEmBmC,GAAA,CAAA,OAAA,CAAA,ECtMnB,MAAMrR,GAAOoH,SAASoW,eAAe,MAAM,EAQ3ChX,GAAO,IAAAwP,EAAOkG,GAAG,CAAA,CAAA,EAAKlc,EAAK","x_google_ignoreList":[0,1,2]}